<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸ‘‰ é˜²æŠ–å’ŒèŠ‚æµ | CHIEMINCHAN&#39;S BLOG</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/donut.png">
    <meta name="description" content="Hi, glad you came.">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.448d156c.js" as="script"><link rel="preload" href="/assets/js/2.fefa3fa1.js" as="script"><link rel="preload" href="/assets/js/1.67a15f5a.js" as="script"><link rel="preload" href="/assets/js/51.9de8257a.js" as="script"><link rel="prefetch" href="/assets/js/10.5229b01a.js"><link rel="prefetch" href="/assets/js/11.9dccb5a1.js"><link rel="prefetch" href="/assets/js/12.1aa023e7.js"><link rel="prefetch" href="/assets/js/13.da540175.js"><link rel="prefetch" href="/assets/js/14.981e669d.js"><link rel="prefetch" href="/assets/js/15.f28dd0b3.js"><link rel="prefetch" href="/assets/js/16.47e1d84d.js"><link rel="prefetch" href="/assets/js/17.7ff34030.js"><link rel="prefetch" href="/assets/js/18.6dcbdd16.js"><link rel="prefetch" href="/assets/js/19.e568fd00.js"><link rel="prefetch" href="/assets/js/20.182f1f9b.js"><link rel="prefetch" href="/assets/js/21.b834a74a.js"><link rel="prefetch" href="/assets/js/22.a3523cd2.js"><link rel="prefetch" href="/assets/js/23.61d15c5b.js"><link rel="prefetch" href="/assets/js/24.2aadb209.js"><link rel="prefetch" href="/assets/js/25.836695fb.js"><link rel="prefetch" href="/assets/js/26.0ab922cb.js"><link rel="prefetch" href="/assets/js/27.5ac9e339.js"><link rel="prefetch" href="/assets/js/28.d6a5eb15.js"><link rel="prefetch" href="/assets/js/29.3eea682e.js"><link rel="prefetch" href="/assets/js/3.fc739620.js"><link rel="prefetch" href="/assets/js/30.5225944d.js"><link rel="prefetch" href="/assets/js/31.ec02d3da.js"><link rel="prefetch" href="/assets/js/32.bd05dede.js"><link rel="prefetch" href="/assets/js/33.4a293dcf.js"><link rel="prefetch" href="/assets/js/34.4464026b.js"><link rel="prefetch" href="/assets/js/35.4dd4f327.js"><link rel="prefetch" href="/assets/js/36.ca28dda7.js"><link rel="prefetch" href="/assets/js/37.3a17971f.js"><link rel="prefetch" href="/assets/js/38.f86fa51b.js"><link rel="prefetch" href="/assets/js/39.6ff149b0.js"><link rel="prefetch" href="/assets/js/4.0471e9ae.js"><link rel="prefetch" href="/assets/js/40.23565895.js"><link rel="prefetch" href="/assets/js/41.0116a1ec.js"><link rel="prefetch" href="/assets/js/42.c38f3e0c.js"><link rel="prefetch" href="/assets/js/43.1d0d8ffd.js"><link rel="prefetch" href="/assets/js/44.631fa43e.js"><link rel="prefetch" href="/assets/js/45.0f88df1f.js"><link rel="prefetch" href="/assets/js/46.cc671ab0.js"><link rel="prefetch" href="/assets/js/47.90cce12d.js"><link rel="prefetch" href="/assets/js/48.ad0ce6a4.js"><link rel="prefetch" href="/assets/js/49.ade35f37.js"><link rel="prefetch" href="/assets/js/5.5356be46.js"><link rel="prefetch" href="/assets/js/50.de00c31b.js"><link rel="prefetch" href="/assets/js/52.50f1abf2.js"><link rel="prefetch" href="/assets/js/53.b3b3acb2.js"><link rel="prefetch" href="/assets/js/54.71bfe1b2.js"><link rel="prefetch" href="/assets/js/55.b00cfb1c.js"><link rel="prefetch" href="/assets/js/56.1bb058d3.js"><link rel="prefetch" href="/assets/js/57.5651fd65.js"><link rel="prefetch" href="/assets/js/58.3dd11306.js"><link rel="prefetch" href="/assets/js/59.233d45e8.js"><link rel="prefetch" href="/assets/js/6.5b3d5499.js"><link rel="prefetch" href="/assets/js/60.7c729149.js"><link rel="prefetch" href="/assets/js/61.eb5805f6.js"><link rel="prefetch" href="/assets/js/62.fde12179.js"><link rel="prefetch" href="/assets/js/63.3358d1e0.js"><link rel="prefetch" href="/assets/js/64.1b930210.js"><link rel="prefetch" href="/assets/js/65.3048ba53.js"><link rel="prefetch" href="/assets/js/66.a065502e.js"><link rel="prefetch" href="/assets/js/67.715eef17.js"><link rel="prefetch" href="/assets/js/68.edf44196.js"><link rel="prefetch" href="/assets/js/69.94cb6d60.js"><link rel="prefetch" href="/assets/js/7.c94df317.js"><link rel="prefetch" href="/assets/js/70.9061bb98.js"><link rel="prefetch" href="/assets/js/71.980c8e32.js"><link rel="prefetch" href="/assets/js/72.43be58ba.js"><link rel="prefetch" href="/assets/js/73.e2f40377.js"><link rel="prefetch" href="/assets/js/74.9ef8a48c.js"><link rel="prefetch" href="/assets/js/75.b006fb40.js"><link rel="prefetch" href="/assets/js/76.311cf38f.js"><link rel="prefetch" href="/assets/js/77.2d4b2c6d.js"><link rel="prefetch" href="/assets/js/78.81fd1ead.js"><link rel="prefetch" href="/assets/js/79.01e24fba.js"><link rel="prefetch" href="/assets/js/80.b15cc1f3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.934ed2fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CHIEMINCHAN'S BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">
  æ–‡ç« 
</a></div><div class="nav-item"><a href="/fragments/" class="nav-link">
  çŸ¥è¯†ç¢ç‰‡
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  è¯»/è§‚åæ„Ÿ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chieminchan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">
  æ–‡ç« 
</a></div><div class="nav-item"><a href="/fragments/" class="nav-link">
  çŸ¥è¯†ç¢ç‰‡
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  ç®—æ³•
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  è¯»/è§‚åæ„Ÿ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chieminchan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DesignPatterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/JavaScript/JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡.html" class="sidebar-link">ğŸ‘‰ JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡</a></li><li><a href="/articles/JavaScript/PromiseA+å®ç°åŸç†.html" class="sidebar-link">ğŸ‘‰ Promise/A+ å®ç°åŸç†</a></li><li><a href="/articles/JavaScript/V8å·¥ä½œåŸç†.html" class="sidebar-link">ğŸ‘‰ V8 å·¥ä½œåŸç†</a></li><li><a href="/articles/JavaScript/callã€applyã€bindçš„å®ç°.html" class="sidebar-link">ğŸ‘‰ callã€applyã€bind çš„å®ç°</a></li><li><a href="/articles/JavaScript/äº‹ä»¶æµå’Œäº‹ä»¶å¤„ç†ç¨‹åº.html" class="sidebar-link">ğŸ‘‰ äº‹ä»¶æµå’Œäº‹ä»¶å¤„ç†ç¨‹åº</a></li><li><a href="/articles/JavaScript/å…³äºPromiseçš„ä¸€äº›äº‹.html" class="sidebar-link">ğŸ‘‰ å…³äº Promise çš„ä¸€äº›äº‹</a></li><li><a href="/articles/JavaScript/æµè§ˆå™¨çš„ JavaScript äº‹ä»¶å¾ªç¯æœºåˆ¶.html" class="sidebar-link">ğŸ‘‰ æµè§ˆå™¨çš„ JavaScript äº‹ä»¶å¾ªç¯æœºåˆ¶</a></li><li><a href="/articles/JavaScript/æ·±æµ…æ‹·è´çš„å®ç°.html" class="sidebar-link">ğŸ‘‰ æ·±æµ…æ‹·è´çš„å®ç°</a></li><li><a href="/articles/JavaScript/ç†è§£ JavaScript çš„ async å’Œ await.html" class="sidebar-link">ğŸ‘‰ ç†è§£ JavaScript çš„ async/await</a></li><li><a href="/articles/JavaScript/ç»§æ‰¿.html" class="sidebar-link">ğŸ‘‰ ç»§æ‰¿</a></li><li><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html" class="active sidebar-link">ğŸ‘‰ é˜²æŠ–å’ŒèŠ‚æµ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#é˜²æŠ–-debounce" class="sidebar-link">é˜²æŠ– debounce</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#é˜²æŠ–åŸç†" class="sidebar-link">é˜²æŠ–åŸç†</a></li><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#é˜²æŠ–åº”ç”¨åœºæ™¯" class="sidebar-link">é˜²æŠ–åº”ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#é˜²æŠ–å®ç°" class="sidebar-link">é˜²æŠ–å®ç°</a></li></ul></li><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#èŠ‚æµ-throttle" class="sidebar-link">èŠ‚æµ throttle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#èŠ‚æµåŸç†" class="sidebar-link">èŠ‚æµåŸç†</a></li><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#èŠ‚æµ-åº”ç”¨åœºæ™¯" class="sidebar-link">èŠ‚æµ åº”ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/articles/JavaScript/é˜²æŠ–å’ŒèŠ‚æµ.html#èŠ‚æµå®ç°" class="sidebar-link">èŠ‚æµå®ç°</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Microapp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Project Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é˜²æŠ–å’ŒèŠ‚æµ"><a href="#é˜²æŠ–å’ŒèŠ‚æµ" class="header-anchor">#</a> ğŸ‘‰ é˜²æŠ–å’ŒèŠ‚æµ</h1> <p>é˜²æŠ–å’ŒèŠ‚æµçš„ä¸»è¦ä½œç”¨éƒ½æ˜¯ä¸ºäº†å‡å°‘å‡½æ•°æ— ç”¨çš„è§¦å‘æ¬¡æ•°ï¼Œä»¥ä¾¿è§£å†³å“åº”è·Ÿä¸ä¸Šè§¦å‘é¢‘ç‡å¯¼è‡´é¡µé¢å¡é¡¿è¿™ç±»é—®é¢˜ï¼Œæé«˜æ€§èƒ½å’Œé¿å…èµ„æºæµªè´¹ã€‚</p> <p>ä½†é˜²æŠ–åŠ¨å’ŒèŠ‚æµæœ¬è´¨æ˜¯ä¸ä¸€æ ·çš„ï¼Œé˜²æŠ–æ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œï¼ŒèŠ‚æµæ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜æˆæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œã€‚</p> <h2 id="é˜²æŠ–-debounce"><a href="#é˜²æŠ–-debounce" class="header-anchor">#</a> é˜²æŠ– debounce</h2> <h3 id="é˜²æŠ–åŸç†"><a href="#é˜²æŠ–åŸç†" class="header-anchor">#</a> é˜²æŠ–åŸç†</h3> <p>åœ¨è§¦å‘è§¦å‘æŸä¸ªäº‹ä»¶åçš„ n ç§’åæ‰èƒ½é‡æ–°æ‰§è¡Œï¼Œè‹¥åœ¨è§¦å‘äº‹ä»¶çš„ n ç§’å†…å†æ¬¡è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œæ—¶é—´ n å°†ä¼šé‡æ–°å¼€å§‹è®¡æ—¶ï¼Œç›´åˆ°è§¦å‘å®Œäº‹ä»¶çš„ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶æ‰ä¼šæ‰§è¡Œã€‚ï¼ˆæŒ‡å®šæ—¶é—´å†…åªèƒ½è§¦å‘ä¸€æ¬¡äº‹ä»¶ï¼Œå¦åˆ™å¤šæ¬¡è§¦å‘ä¼šé‡æ–°è®¡æ—¶ã€‚ï¼‰</p> <h3 id="é˜²æŠ–åº”ç”¨åœºæ™¯"><a href="#é˜²æŠ–åº”ç”¨åœºæ™¯" class="header-anchor">#</a> é˜²æŠ–åº”ç”¨åœºæ™¯</h3> <p>åœºæ™¯: ä¸‹è½½èµ„æºæŒ‰é’®ï¼Œçª—å£ resizeï¼ˆåªéœ€è¦åˆ¤æ–­æœ€åä¸€æ¬¡çš„å˜åŒ–æƒ…å†µï¼‰ï¼‰</p> <p>ç”¨æˆ·åœ¨ç‚¹å‡»æŸä¸ªæŒ‰é’®åä¼šè§¦å‘æŸäº›ä»»åŠ¡äº‹ä»¶ï¼Œä½†è‹¥ç”¨æˆ·åœ¨å¾ˆçŸ­æ—¶é—´å†…è¿ç»­ç‚¹å‡»æŒ‰é’®ï¼Œåˆ™ä¼šå¯¼è‡´é¢‘ç¹è§¦å‘ä»»åŠ¡äº‹ä»¶ã€‚å› æ­¤æƒ³è¦è¿™ä¸ªä»»åŠ¡äº‹ä»¶åœ¨ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡ï¼ˆä¸ç®¡è¢«ç‚¹å‡»äº†å¤šå°‘æ¬¡ï¼‰ï¼Œç„¶åè¿‡äº†æŒ‡å®šæ—¶é—´åç‚¹å‡»æ‰èƒ½é‡æ–°è¢«è§¦å‘ã€‚</p> <h3 id="é˜²æŠ–å®ç°"><a href="#é˜²æŠ–å®ç°" class="header-anchor">#</a> é˜²æŠ–å®ç°</h3> <p>å®ç°æ€è·¯ï¼šè®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ»¡è¶³è®¾å®šç­‰å¾…çš„æ—¶é—´ä¹‹åï¼Œæ‰§è¡Œå‡½æ•°å¹¶æ¸…ç©ºå®šæ—¶å™¨ï¼Œå¦åˆ™åˆ™ä¸æ‰§è¡Œå¹¶é‡åˆ¶å®šæ—¶å™¨ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç«‹å³æ‰§è¡Œç‰ˆé˜²æŠ–ï¼šè¡¨ç¤ºä¸ç­‰äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œï¼Œå…ˆç«‹åˆ»æ‰§è¡Œäº‹ä»¶ï¼Œç­‰åˆ°åœæ­¢è§¦å‘ n ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚</span>
<span class="token comment">// éç«‹å³æ‰§è¡Œç‰ˆé˜²æŠ–ï¼šè¡¨ç¤ºéœ€è¦ç­‰äº‹ä»¶åœæ­¢è§¦å‘åçš„nç§’åï¼Œæ‰ä¼šæ‰§è¡Œã€‚</span>

<span class="token comment">/**
 * @desc å‡½æ•°é˜²æŠ–
 * @param func å‡½æ•°
 * @param timewait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°
 * @param immediate true è¡¨ç«‹å³æ‰§è¡Œï¼Œfalse è¡¨éç«‹å³æ‰§è¡Œ
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">_debounce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">handler<span class="token punctuation">,</span> timewait <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">,</span> result<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

        <span class="token comment">// åœ¨timewaitè¿˜æ²¡ç»“æŸå‰ï¼Œé‡æ–°è§¦å‘ï¼Œå°±ä¼šé‡æ–°å¼€å§‹è®¡æ—¶</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¿™æ—¶timerè¿˜æ˜¯ç­‰äºå®šæ—¶å™¨IDï¼ˆclearTimeoutå¹¶ä¸ä¼šåˆ æ‰timeoutä¸­ä¿å­˜çš„IDï¼‰</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// å¦‚æœéœ€è¦ç«‹å³æ‰§è¡Œ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// timerä¸ºç©ºçš„æ—¶å€™æ‰æ‰§è¡Œï¼Œå³é¦–æ¬¡å’Œtimewaitåˆ°æœŸå</span>
            <span class="token comment">// clearTimeoutåï¼Œtimerä¾ç„¶ä¸ºä¸€ä¸ªå®šæ—¶å™¨ID</span>
            <span class="token keyword">let</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timer<span class="token punctuation">;</span>

            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> timewait<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// å½“ä¸”ä»…å½“åˆ°è¾¾ timewait è¦æ±‚æ—¶ï¼Œtimer æ‰ä¼šè¢«è®¾ç½®ä¸º nullï¼Œå†è§¦å‘ callNow æ‰ä¼šå˜æˆä¸º true</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¸éœ€è¦ç«‹å³æ‰§è¡Œ</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                result <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> timewait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">getActionText</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        container<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    container<span class="token punctuation">.</span>onmousemover <span class="token operator">=</span> <span class="token function">_debounce</span><span class="token punctuation">(</span>getActionText<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="èŠ‚æµ-throttle"><a href="#èŠ‚æµ-throttle" class="header-anchor">#</a> èŠ‚æµ throttle</h2> <h3 id="èŠ‚æµåŸç†"><a href="#èŠ‚æµåŸç†" class="header-anchor">#</a> èŠ‚æµåŸç†</h3> <p>å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ä¸€å®šæ—¶é—´æ®µå†…åªèƒ½æ‰§è¡Œä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ã€‚ï¼ˆæŒ‡å®šæ—¶é—´å†…å¤šæ¬¡è§¦å‘æ—¶é—´åï¼Œéœ€è¦é—´éš”ä¸€å®šæ—¶é—´æ‰ä¼šæ‰§è¡Œï¼‰</p> <h3 id="èŠ‚æµ-åº”ç”¨åœºæ™¯"><a href="#èŠ‚æµ-åº”ç”¨åœºæ™¯" class="header-anchor">#</a> èŠ‚æµ åº”ç”¨åœºæ™¯</h3> <p>åœºæ™¯: å¸¸ç”¨äºè¾“å…¥æ¡†è¾“å…¥å†…å®¹å®æ—¶æŸ¥è¯¢ï¼ˆé—´éš”ä¸€æ®µæ—¶é—´å°±å¿…é¡»æŸ¥è¯¢ç›¸å…³å†…å®¹ï¼Œå¦‚æœéœ€è¦ç”¨æˆ·è¾“å…¥å®Œå†æœç´¢å¯ç”¨é˜²æŠ–ï¼‰ã€ç›‘å¬æ»šåŠ¨æ¡<br>
åŸç†: è§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚</p> <h3 id="èŠ‚æµå®ç°"><a href="#èŠ‚æµå®ç°" class="header-anchor">#</a> èŠ‚æµå®ç°</h3> <p>å’Œé˜²æŠ–ç±»ä¼¼ï¼Œæ ¹æ®é¦–æ¬¡æ˜¯å¦æ‰§è¡Œä»¥åŠç»“æŸåæ˜¯å¦æ‰§è¡Œï¼Œæ•ˆæœæœ‰æ‰€ä¸åŒï¼Œå®ç°çš„æ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p> <p>å¯¹äºèŠ‚æµï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ï¼Œåˆ†åˆ«æ˜¯æ—¶é—´æˆ³ç‰ˆå’Œå®šæ—¶å™¨ç‰ˆã€‚</p> <p>æ—¶é—´æˆ³ç‰ˆå®ç°åŸç†ï¼š<br>
è·å–æ¯æ¬¡æ‰§è¡Œçš„æ—¶é—´æˆ³ previousï¼Œåœ¨å†æ¬¡è§¦å‘æ—¶ï¼Œåˆ¤æ–­å½“å‰æ—¶é—´æˆ³å’Œå‰ä¸€æ¬¡æ—¶é—´æˆ³å·®å€¼ï¼Œå¤§äº timewait åˆ™æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ—¶é—´æˆ³ï¼Œé¦–æ¬¡äº‹ä»¶ä¼šç«‹åˆ»æ‰§è¡Œä¸€æ¬¡ï¼Œä¸€ç›´è§¦å‘ä¹Ÿä¼šæŒ‰ç…§é—´éš”æ‰§è¡Œï¼Œåœæ­¢è§¦å‘åä¸ä¼šå†æ‰§è¡Œ</span>
<span class="token keyword">function</span> <span class="token function">_throttle</span><span class="token punctuation">(</span><span class="token parameter">handler<span class="token punctuation">,</span> timewait <span class="token operator">=</span> <span class="token number">2000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        result<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

        <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> previous <span class="token operator">&gt;</span> timewait<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            previous <span class="token operator">=</span> now<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®šæ—¶å™¨ï¼Œäº‹ä»¶ä¼šåœ¨ n ç§’åç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œåœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶</span>
<span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> timewait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

        <span class="token comment">// æŒ‡å®šæ—¶é—´å†…çš„è§¦å‘éƒ½ä¸ä¼šåƒé˜²æŠ–ä¸€æ ·é‡ç½®è®¡æ—¶å™¨ï¼Œè€Œæ˜¯ä¼šä¸¢åˆ° setTimeout çš„é˜Ÿåˆ—é‡Œç­‰å¾…æ‰§è¡Œå¹¶ç½®ç©ºè®¡æ—¶å™¨</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> timewait<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ç»“åˆå‰ä¸¤ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬å†å®Œå–„ä¸€ä¸ªç‰ˆæœ¬ï¼š<br>
æœ‰å¤´æœ‰å°¾çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œé¦–æ¬¡éœ€è¦ä¸€è§¦å‘å°±ç«‹åˆ»æ‰§è¡Œï¼Œç»“å°¾åœæ­¢è§¦å‘åè¿˜èƒ½æ‰§è¡Œæœ€åä¸€æ¬¡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_throttle</span><span class="token punctuation">(</span><span class="token parameter">handler<span class="token punctuation">,</span> timewait <span class="token operator">=</span> <span class="token number">1000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">,</span> result<span class="token punctuation">;</span>
    <span class="token keyword">let</span> previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

        <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> remain <span class="token operator">=</span> timewait <span class="token operator">-</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> previous<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// é¦–æ¬¡ä¼šç«‹åˆ»æ‰§è¡Œï¼Œæˆ–è€…ä¸‹ä¸€æ¬¡è§¦å‘æ—¶è¶…è¿‡äº†timewaitæ—¶é—´ä¹Ÿå¯è§¦å‘</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>remain <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
            previous <span class="token operator">=</span> now<span class="token punctuation">;</span>

            <span class="token comment">// è‹¥ timer ä¸ä¸ºç©ºï¼Œåˆ™ç½®ç©ºæ¸…é™¤ï¼Œæ–¹ä¾¿ä¸‹æ¬¡é‡æ–°è®¡æ—¶</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¦‚æœè¿˜æ²¡è¶…è¿‡timewaitå†æ¬¡è¢«è§¦å‘ï¼Œåˆ™ä¼šé€šè¿‡å®šæ—¶å™¨ç¼“å­˜ä¸‹æ¥ï¼Œå€’è®¡æ—¶æ‰§è¡Œ</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

                <span class="token comment">// è®°å½•æ‰§è¡Œæ—¶é—´</span>
                previous <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> remain<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">getActionText</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        container<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    container<span class="token punctuation">.</span>onmousemover <span class="token operator">=</span> <span class="token function">_throttle</span><span class="token punctuation">(</span>getActionText<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/articles/JavaScript/ç»§æ‰¿.html" class="prev">
        ğŸ‘‰ ç»§æ‰¿
      </a></span> <span class="next"><a href="/articles/Microapp/å°ç¨‹åºä¸Šæ‰‹ç¯‡.html">
        å°ç¨‹åºä¸Šæ‰‹ç¯‡
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.448d156c.js" defer></script><script src="/assets/js/2.fefa3fa1.js" defer></script><script src="/assets/js/1.67a15f5a.js" defer></script><script src="/assets/js/51.9de8257a.js" defer></script>
  </body>
</html>
