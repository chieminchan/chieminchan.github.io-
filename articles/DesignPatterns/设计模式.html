<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ЁЯСЙ шо╛шобцибх╝П | CHIEMINCHAN&#39;S BLOG</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/donut.png">
    <meta name="description" content="Hi, glad you came.">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.448d156c.js" as="script"><link rel="preload" href="/assets/js/2.fefa3fa1.js" as="script"><link rel="preload" href="/assets/js/1.67a15f5a.js" as="script"><link rel="preload" href="/assets/js/40.23565895.js" as="script"><link rel="prefetch" href="/assets/js/10.5229b01a.js"><link rel="prefetch" href="/assets/js/11.9dccb5a1.js"><link rel="prefetch" href="/assets/js/12.1aa023e7.js"><link rel="prefetch" href="/assets/js/13.da540175.js"><link rel="prefetch" href="/assets/js/14.981e669d.js"><link rel="prefetch" href="/assets/js/15.f28dd0b3.js"><link rel="prefetch" href="/assets/js/16.47e1d84d.js"><link rel="prefetch" href="/assets/js/17.7ff34030.js"><link rel="prefetch" href="/assets/js/18.6dcbdd16.js"><link rel="prefetch" href="/assets/js/19.e568fd00.js"><link rel="prefetch" href="/assets/js/20.182f1f9b.js"><link rel="prefetch" href="/assets/js/21.b834a74a.js"><link rel="prefetch" href="/assets/js/22.a3523cd2.js"><link rel="prefetch" href="/assets/js/23.61d15c5b.js"><link rel="prefetch" href="/assets/js/24.2aadb209.js"><link rel="prefetch" href="/assets/js/25.836695fb.js"><link rel="prefetch" href="/assets/js/26.0ab922cb.js"><link rel="prefetch" href="/assets/js/27.5ac9e339.js"><link rel="prefetch" href="/assets/js/28.d6a5eb15.js"><link rel="prefetch" href="/assets/js/29.3eea682e.js"><link rel="prefetch" href="/assets/js/3.fc739620.js"><link rel="prefetch" href="/assets/js/30.5225944d.js"><link rel="prefetch" href="/assets/js/31.ec02d3da.js"><link rel="prefetch" href="/assets/js/32.bd05dede.js"><link rel="prefetch" href="/assets/js/33.4a293dcf.js"><link rel="prefetch" href="/assets/js/34.4464026b.js"><link rel="prefetch" href="/assets/js/35.4dd4f327.js"><link rel="prefetch" href="/assets/js/36.ca28dda7.js"><link rel="prefetch" href="/assets/js/37.3a17971f.js"><link rel="prefetch" href="/assets/js/38.f86fa51b.js"><link rel="prefetch" href="/assets/js/39.6ff149b0.js"><link rel="prefetch" href="/assets/js/4.0471e9ae.js"><link rel="prefetch" href="/assets/js/41.0116a1ec.js"><link rel="prefetch" href="/assets/js/42.c38f3e0c.js"><link rel="prefetch" href="/assets/js/43.1d0d8ffd.js"><link rel="prefetch" href="/assets/js/44.631fa43e.js"><link rel="prefetch" href="/assets/js/45.0f88df1f.js"><link rel="prefetch" href="/assets/js/46.cc671ab0.js"><link rel="prefetch" href="/assets/js/47.90cce12d.js"><link rel="prefetch" href="/assets/js/48.ad0ce6a4.js"><link rel="prefetch" href="/assets/js/49.ade35f37.js"><link rel="prefetch" href="/assets/js/5.5356be46.js"><link rel="prefetch" href="/assets/js/50.de00c31b.js"><link rel="prefetch" href="/assets/js/51.9de8257a.js"><link rel="prefetch" href="/assets/js/52.50f1abf2.js"><link rel="prefetch" href="/assets/js/53.b3b3acb2.js"><link rel="prefetch" href="/assets/js/54.71bfe1b2.js"><link rel="prefetch" href="/assets/js/55.b00cfb1c.js"><link rel="prefetch" href="/assets/js/56.1bb058d3.js"><link rel="prefetch" href="/assets/js/57.5651fd65.js"><link rel="prefetch" href="/assets/js/58.3dd11306.js"><link rel="prefetch" href="/assets/js/59.233d45e8.js"><link rel="prefetch" href="/assets/js/6.5b3d5499.js"><link rel="prefetch" href="/assets/js/60.7c729149.js"><link rel="prefetch" href="/assets/js/61.eb5805f6.js"><link rel="prefetch" href="/assets/js/62.fde12179.js"><link rel="prefetch" href="/assets/js/63.3358d1e0.js"><link rel="prefetch" href="/assets/js/64.1b930210.js"><link rel="prefetch" href="/assets/js/65.3048ba53.js"><link rel="prefetch" href="/assets/js/66.a065502e.js"><link rel="prefetch" href="/assets/js/67.715eef17.js"><link rel="prefetch" href="/assets/js/68.edf44196.js"><link rel="prefetch" href="/assets/js/69.94cb6d60.js"><link rel="prefetch" href="/assets/js/7.c94df317.js"><link rel="prefetch" href="/assets/js/70.9061bb98.js"><link rel="prefetch" href="/assets/js/71.980c8e32.js"><link rel="prefetch" href="/assets/js/72.43be58ba.js"><link rel="prefetch" href="/assets/js/73.e2f40377.js"><link rel="prefetch" href="/assets/js/74.9ef8a48c.js"><link rel="prefetch" href="/assets/js/75.b006fb40.js"><link rel="prefetch" href="/assets/js/76.311cf38f.js"><link rel="prefetch" href="/assets/js/77.2d4b2c6d.js"><link rel="prefetch" href="/assets/js/78.81fd1ead.js"><link rel="prefetch" href="/assets/js/79.01e24fba.js"><link rel="prefetch" href="/assets/js/80.b15cc1f3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.934ed2fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CHIEMINCHAN'S BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  щжЦщб╡
</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">
  цЦЗчла
</a></div><div class="nav-item"><a href="/fragments/" class="nav-link">
  чЯешпЖчвОчЙЗ
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  чоЧц│Х
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  шп╗/шзВхРОцДЯ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chieminchan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubщжЦщб╡
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  щжЦщб╡
</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">
  цЦЗчла
</a></div><div class="nav-item"><a href="/fragments/" class="nav-link">
  чЯешпЖчвОчЙЗ
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  чоЧц│Х
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  шп╗/шзВхРОцДЯ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chieminchan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubщжЦщб╡
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>DesignPatterns</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html" class="active sidebar-link">ЁЯСЙ шо╛шобцибх╝П</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#хИЫх╗║хЮЛцибх╝П" class="sidebar-link">хИЫх╗║хЮЛцибх╝П</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#х╖ехОВцибх╝П" class="sidebar-link">х╖ехОВцибх╝П</a></li><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#хНХф╛Лцибх╝П" class="sidebar-link">хНХф╛Лцибх╝П</a></li></ul></li><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#ч╗УцЮДхЮЛцибх╝П" class="sidebar-link">ч╗УцЮДхЮЛцибх╝П</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#шгЕще░хЩицибх╝П" class="sidebar-link">шгЕще░хЩицибх╝П</a></li><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#щАВщЕНхЩицибх╝П" class="sidebar-link">щАВщЕНхЩицибх╝П</a></li></ul></li><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#шбМф╕║хЮЛцибх╝П" class="sidebar-link">шбМф╕║хЮЛцибх╝П</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#чнЦчХецибх╝П" class="sidebar-link">чнЦчХецибх╝П</a></li><li class="sidebar-sub-header"><a href="/articles/DesignPatterns/шо╛шобцибх╝П.html#шзВхпЯшАЕцибх╝П" class="sidebar-link">шзВхпЯшАЕцибх╝П</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Microapp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Project Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="шо╛шобцибх╝П"><a href="#шо╛шобцибх╝П" class="header-anchor">#</a> ЁЯСЙ шо╛шобцибх╝П</h1> <p>шо╛шобцибх╝ПхоЪф╣Йя╝ЪхЬиш╜пф╗╢шо╛шобф╕нщТИхп╣ф╕НхРМхЬ║цЩпщЧощвШчЪДшзгхЖ│цЦ╣цбИя╝Мф╜┐чФишо╛шобцибх╝ПчЪДчЫочЪДцШпф╕║ф║ЖхПпщЗНчФиф╗гчаБя╝МцПРщлШф╗гчаБчЪДхПпцЙйх▒ХцАзхТМхПпч╗┤цКдцАзуАВ</p> <p>шо╛шобцибх╝ПчЪДца╕х┐ГцАЭцГ│я╝Мх░▒цШптАЬх░БшгЕхПШхМЦтАЭуАВф╜Хф╕║тАЬх░БшгЕхПШхМЦтАЭя╝Ъ</p> <blockquote><p>ш┐Щф╕АчВ╣чЫ╕ф┐бхдзхо╢ф╕НщЪ╛чРЖшзгтАФтАФхжВцЮЬшп┤цИСф╗мхЖЩф╕Аф╕кф╕ЪхКбя╝Мш┐Щф╕кф╕ЪхКбцШпф╕Ац╜нцн╗ц░┤я╝МхИЭхзЛчЙИцЬмцШп 1.0я╝М100 х╣┤хРОш┐ШцШп 1.0я╝Мф╕НцОехПЧф╗╗ф╜Хш┐нф╗гхТМф╝ШхМЦя╝МщВгф╣Иш┐Щф╕кф╕ЪхКбхЗаф╣ОхПпф╗ещЪПф╛┐хЖЩуАВхПНцнгхПкшжБхоЮчО░хКЯшГ╜х░▒шбМф║Жя╝МхоМхЕиф╕НщЬАшжБшАГшЩСхПпч╗┤цКдцАзуАБхПпцЙйх▒ХцАзуАВф╜ЖхЬихоЮщЩЕх╝АхПСф╕ня╝Мф╕НхПСчФЯхПШхМЦчЪДф╗гчаБхПпф╗ешп┤цШпф╕НхнШхЬичЪДуАВ</p> <p>цИСф╗мшГ╜хБЪчЪДхПкцЬЙх░Жш┐Щф╕кхПШхМЦщАацИРчЪДх╜▒хУНцЬАх░ПхМЦ тАФтАФ х░ЖхПШф╕Оф╕НхПШхИЖчж╗я╝Мчбоф┐ЭхПШхМЦчЪДщГихИЖчБ╡ц┤╗уАБф╕НхПШчЪДщГихИЖчи│хоЪуАВш┐Щф╕кш┐ЗчиЛя╝Мх░▒хПлтАЬх░БшгЕхПШхМЦтАЭя╝Ыш┐Щца╖чЪДф╗гчаБя╝Мх░▒цШпцИСф╗мцЙАш░УчЪДтАЬхБехготАЭчЪДф╗гчаБя╝МхоГхПпф╗еч╗Пх╛Чш╡╖хПШхМЦчЪДшАГщкМуАВшАМшо╛шобцибх╝ПхЗ║чО░чЪДцДПф╣Йя╝Мх░▒цШпх╕оцИСф╗мхЖЩхЗ║ш┐Щца╖чЪДф╗гчаБуАВ</p></blockquote> <p>шо╛шобцибх╝Пф╕╗шжБцЬЙ 23 чзНя╝МхИЖф╕║ф╕Йхдзч▒╗хЮЛф╕║я╝ЪхИЫх╗║хЮЛцибх╝ПуАБч╗УцЮДхЮЛцибх╝ПуАБшбМф╕║хЮЛцибх╝ПуАВ</p> <p>ш┐ЩщЗМх░▒ф╕Нф╕Аф╕Ашпжч╗Жх▒Хх╝Ая╝Мф╕╗шжБчФиф╜ЬчоАшжБшо░х╜Хх╕╕чФичЪДшо╛шобцибх╝ПуАВ</p> <h2 id="хИЫх╗║хЮЛцибх╝П"><a href="#хИЫх╗║хЮЛцибх╝П" class="header-anchor">#</a> хИЫх╗║хЮЛцибх╝П</h2> <h3 id="х╖ехОВцибх╝П"><a href="#х╖ехОВцибх╝П" class="header-anchor">#</a> х╖ехОВцибх╝П</h3> <p>шп┤хИ░х╖ехОВцибх╝Пф╣ЛхЙНя╝МчЬЛчЬЛцЮДщАахЩицШпф╗Аф╣Ия╝Ъ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// хЬ║цЩп1я╝Ъф╕Аф╕кхЕмхП╕щЬАшжБх╜ХхЕех╛ИхдЪхСШх╖еф┐бцБп</span>
<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>caree <span class="token operator">=</span> caree<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>User х░▒цШпф╕Аф╕кч▒╗чЪДцЮДщАахЩия╝ИцЮДщАахЗ╜цХ░я╝Йя╝МцЮДщАахЩих░Ж nameуАБageуАБcareer ш╡ЛхА╝ч╗ЩхоЮф╛Лхп╣ш▒бчЪДш┐ЗчиЛх░БшгЕя╝Мчбоф┐Эф║ЖцпПф╕кхп╣ш▒бщГ╜хЕ╖хдЗш┐Щф║Ых▒ЮцАзя╝Мчбоф┐Эф║ЖхЕ▒цАзчЪДф╕НхПШя╝МхРМцЧ╢х░Ж nameуАБageуАБcareer хРДшЗкчЪДхПЦхА╝цУНф╜Ьх╝АцФ╛я╝Мчбоф┐Эф║Жф╕кцАзчЪДчБ╡ц┤╗уАВ</p> <p>цЮДщАахЩицибх╝ПчЪДф╜ЬчФих░▒цШпхО╗цК╜ш▒бцпПф╕кхоЮф╛Лхп╣ш▒бчЪДхПШхТМф╕НхПШя╝ЫшАМх╖ехОВцибх╝Пф╣ЯцЬЙчВ╣ч▒╗ф╝╝цДПцАЭя╝Мф╕Нш┐Зф╕╗шжБцШпцК╜ш▒бф╕НхРМцЮДщАахЗ╜цХ░чЪДхПШхТМф╕НхПШуАВ</p> <p>щВгф╗Аф╣ИцШпх╖ехОВцибх╝Пя╝ЯцИСф╗мх╛Аф╕ЛчЬЛчЬЛх║ФчФихЬ║цЩп</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// хЬ║цЩп2я╝ЪхЬихЬ║цЩп1чЪДхЯ║чбАф╕Кя╝МщЬАшжБхп╣хСШх╖ехИЖч▒╗хПКхЕ╢ф╕╗шжБшБМш┤гш┐Ыф╕АцнехИЖч▒╗ш╡ЛхА╝я╝МчиЛх║ПхСШф╕╗шжБх╖еф╜ЬцШпцХ▓ф╗гчаБя╝Мф║зхУБч╗ПхОЖф╕╗шжБх╖еф╜ЬцШпхВмцЫ┤я╝МшАБцЭ┐ф╕╗шжБх╖еф╜ЬшзБховцИ╖</span>
<span class="token comment">// цПРчВ╝ф╕НхРМч▒╗чЪДхЕ▒цАз</span>
<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career<span class="token punctuation">,</span> work</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>caree <span class="token operator">=</span> caree<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>work <span class="token operator">=</span> work<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// хп╣ф╕НхРМч▒╗чЪДф╕кцАзш┐ЫшбМхИТхИЖ</span>
<span class="token keyword">function</span> <span class="token function">UserFactory</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> work
    <span class="token keyword">switch</span><span class="token punctuation">(</span>career<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'coder'</span><span class="token operator">:</span>
            work <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token string">'хЖЩф╗гчаБ'</span><span class="token punctuation">,</span> <span class="token string">'ф┐оBug'</span><span class="token punctuation">]</span>
            <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token string">'product manager'</span><span class="token operator">:</span>
            work <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'хЖЩPRD'</span><span class="token punctuation">,</span> <span class="token string">'хВмцЫ┤'</span><span class="token punctuation">]</span>
            <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token string">'boss'</span><span class="token operator">:</span>
            work <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'чЬЛцКе'</span><span class="token punctuation">,</span> <span class="token string">'шзБховцИ╖'</span><span class="token punctuation">]</span>
        <span class="token keyword">case</span> <span class="token string">'xxx'</span><span class="token operator">:</span>
            <span class="token comment">// хЕ╢хоГх╖ечзНчЪДшБМш┤гхИЖщЕН</span>
            <span class="token operator">...</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> career<span class="token punctuation">,</span> work<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token keyword">const</span> coder1 <span class="token operator">=</span> <span class="token function">userFactory</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token string">'coder'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> boss1 <span class="token operator">=</span> <span class="token function">userFactory</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token string">'boss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>х╖ехОВцибх╝ПхЕ╢хоЮх░▒цШпчЛмчлЛхЗ║ф╕Аф╕кхдзч▒╗я╝Мх░ЖхИЫх╗║хоЮф╛Лхп╣ш▒бчЪДш┐ЗчиЛчФихдзч▒╗чЪДхнРч▒╗цЭехоЮчО░уАВхН│х░Ж new цУНф╜ЬхНХчЛмх░БшгЕя╝МхПкхп╣хдЦцПРф╛ЫцОехПгя╝МхПВцХ░щЬАшжБцАОф╣ИхМ║хИЖцЭецИСхПпф╗еф╕НхЕ│х┐ГуАВ</p> <p>х╖ехОВцибх╝ПчЪДца╕х┐Гф╜ЬчФихжВф╕Ля╝Ъ</p> <ol><li>ф╕╗шжБчФиф║ОщЪРшЧПхИЫх╗║хоЮф╛ЛчЪДхдНцЭВх║жя╝МхПкщЬАхп╣хдЦцПРф╛Ыф╕Аф╕кцОехПгя╝Ы</li> <li>хоЮчО░цЮДщАахЗ╜цХ░хТМхИЫх╗║шАЕчЪДхИЖчж╗я╝Мц╗бш╢│х╝АцФ╛х░БщЧнчЪДхОЯхИЩя╝Ихп╣цЙйх▒Хх╝АцФ╛хТМхп╣ф┐оцФ╣х░БщЧня╝ЙуАВ</li></ol> <p>х╖ехОВцибх╝Пф╕╗шжБцЬЙф╕ЙчзНч╗ЖхИЖцибх╝Пя╝ЪчоАхНХх╖ехОВцибх╝ПуАБх╖ехОВцЦ╣ц│Хцибх╝ПуАБцК╜ш▒бх╖ехОВцибх╝ПуАВ</p> <h4 id="х║ФчФихЬ║цЩп"><a href="#х║ФчФихЬ║цЩп" class="header-anchor">#</a> х║ФчФихЬ║цЩп</h4> <p>х╣│цЧ╢щБЗхИ░шжБхИЫх╗║хоЮф╛ЛчЪДцЧ╢хАЩя╝Мх░▒хПпф╗ецГ│цГ│шГ╜хРжчФих╖ехОВцибх╝ПхоЮчО░ф║ЖуАВхЬихЖЩф║ЖхдзщЗПцЮДщАахЗ╜цХ░уАБш░ГчФиф║ЖхдзщЗПчЪД newуАБшЗкшзЙщЭЮх╕╕ф╕НчИ╜чЪДцГЕхЖ╡ф╕Ля╝МцИСф╗мф╣Ях║ФшпецАЭшАГцШпф╕НцШпхПпф╗ецОПхЗ║х╖ехОВцибх╝ПщЗНцЮДцИСф╗мчЪДф╗гчаБф║ЖуАВцпФхжВя╝ЪцЙЛцЬ║х╖ехОВя╝ИцК╜ш▒бхЗ║цУНф╜Ьч│╗ч╗ЯуАБчбмф╗╢шКпчЙЗуАБх▒Пх╣Х...я╝Й</p> <h3 id="хНХф╛Лцибх╝П"><a href="#хНХф╛Лцибх╝П" class="header-anchor">#</a> хНХф╛Лцибх╝П</h3> <blockquote><p>ф┐ЭшпБф╕Аф╕кч▒╗ф╗ЕцЬЙф╕Аф╕кхоЮф╛Ля╝Мх╣╢цПРф╛Ыф╕Аф╕кшо┐щЧохоГчЪДхЕих▒Ашо┐щЧочВ╣я╝Мш┐Щца╖чЪДцибх╝Пх░▒хПлхБЪхНХф╛Лцибх╝ПуАВ</p></blockquote> <p>хоЮчО░чЪДцЦ╣ц│Хя╝ЪхЕИхИдцЦнхоЮф╛ЛхнШхЬиф╕ОхРжя╝МхжВцЮЬхнШхЬихИЩчЫ┤цОеш┐ФхЫЮя╝МхжВцЮЬф╕НхнШхЬих░▒хИЫх╗║ф║ЖхЖНш┐ФхЫЮя╝Мш┐Щх░▒чбоф┐Эф║Жф╕Аф╕кч▒╗хПкцЬЙф╕Аф╕кхоЮф╛Лхп╣ш▒буАВ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Modal</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;цЙУх╝Ах╝╣чкЧ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;хЕ│щЧнх╝╣чкЧ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token function">createModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// хИдцЦнцШпхРжх╖▓ч╗Пnewш┐ЗхоЮф╛Л</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Modal<span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// шЛеш┐Щф╕кхФпф╕АчЪДхоЮф╛Лф╕НхнШхЬия╝МщВгф╣ИхЕИхИЫх╗║хоГ</span>
            Modal<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Modal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//шЛех╖▓ч╗ПхнШхЬия╝МхИЩчЫ┤цОеш┐ФхЫЮ</span>
        <span class="token keyword">return</span> Modal<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> modal1 <span class="token operator">=</span> Modal<span class="token punctuation">.</span><span class="token function">createModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> modal2 <span class="token operator">=</span> Modal<span class="token punctuation">.</span><span class="token function">createModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

modal1 <span class="token operator">===</span> modal2<span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// createModal чЪДщЧнхМЕхоЮчО░</span>
Modal<span class="token punctuation">.</span>createModal <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Modal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="х║ФчФихЬ║цЩп-2"><a href="#х║ФчФихЬ║цЩп-2" class="header-anchor">#</a> х║ФчФихЬ║цЩп</h4> <p>хЬицЧех╕╕ф╕ЪхКбхЬ║цЩпф╕ня╝МцИСф╗мч╗Пх╕╕ф╝ЪщБЗхИ░щЬАшжБхНХф╛Лцибх╝ПчЪДхЬ║цЩпя╝МцпФхжВцЬАхЯ║цЬмчЪДх╝╣чкЧя╝МцИЦцШпш┤нчЙйш╜жчнЙуАВхЫаф╕║ф╕Ншо║цШпхЬихНХщб╡щЭвш┐ШцШпхдЪщб╡щЭвх║ФчФичиЛх║Пф╕ня╝МцИСф╗мщГ╜щЬАшжБш┐Щф║Ыф╕ЪхКбхЬ║цЩпхПкф╝ЪхРМцЧ╢хнШхЬиф╕Аф╕куАВ</p> <p>чФЯф║зхоЮш╖╡ф╛ЛхнРя╝Ъvuex чК╢цАБчобчРЖф╕нчЪД store</p> <p><a href="https://www.weisuoke.com/fe2020/Gof/juejin-GoF.html#_4-2-%E7%94%9F%E4%BA%A7%E5%AE%9E%E8%B7%B5%EF%BC%9Avuex%E4%B8%AD%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">цЭешЗкхЕ╢ф╗Цхдзф╜мхНЪховчЪДф╕АчпЗхПВшАГцЦЗчла<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>я╝Ъ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// хоЙшгЕvuexцПТф╗╢</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// х░Жstoreц│ихЕехИ░VueхоЮф╛Лф╕н</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    store<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// щАЪш┐Зш░ГчФи Vue.use()цЦ╣ц│ХхоЙшгЕф║Ж Vuex цПТф╗╢уАВVuex цПТф╗╢цШпф╕Аф╕кхп╣ш▒бя╝МхоГхЬихЖЕщГихоЮчО░ф║Жф╕Аф╕к install цЦ╣ц│Хя╝Мш┐Щф╕кцЦ╣ц│Хф╝ЪхЬицПТф╗╢хоЙшгЕцЧ╢швлш░ГчФия╝Мф╗ОшАМцКК Store ц│ихЕехИ░ Vue хоЮф╛ЛщЗМхО╗уАВ</span>

<span class="token comment">// хЬи install цЦ╣ц│ХщЗМя╝МцЬЙф╕Ацо╡щА╗ш╛СхТМцИСф╗мце╝ф╕КчЪД getInstance щЭЮх╕╕чЫ╕ф╝╝чЪДщА╗ш╛Ся╝Ъ</span>
<span class="token keyword">let</span> Vue<span class="token punctuation">;</span> <span class="token comment">// ш┐Щф╕кVueчЪДф╜ЬчФихТМф╕Кш┐░ф╛ЛхнРф╕нчЪДinstanceф╜ЬчФиф╕Аца╖</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Auto install if it is not done yet and `window` has `Vue`.</span>
        <span class="token comment">// To allow users to avoid auto-installation in some cases,</span>
        <span class="token comment">// this code should be placed here. See #731</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Vue <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">install</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">_Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// хИдцЦнф╝ахЕечЪДVueхоЮф╛Лхп╣ш▒бцШпхРжх╖▓ч╗Пшвлinstallш┐ЗVuexцПТф╗╢я╝ИцШпхРжцЬЙф║ЖхФпф╕АчЪДstateя╝Й</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Vue <span class="token operator">&amp;&amp;</span> _Vue <span class="token operator">===</span> Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
                <span class="token string">&quot;[vuex] already installed. Vue.use(Vuex) should be called only once.&quot;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// шЛец▓бцЬЙя╝МхИЩф╕║ш┐Щф╕кVueхоЮф╛Лхп╣ш▒бinstallф╕Аф╕кхФпф╕АчЪДVuex</span>
    Vue <span class="token operator">=</span> _Vue<span class="token punctuation">;</span>

    <span class="token comment">// х░ЖVuexчЪДхИЭхзЛхМЦщА╗ш╛СхЖЩш┐ЫVueчЪДщТйхнРхЗ╜цХ░щЗМ</span>
    <span class="token function">applyMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ч╗УцЮДхЮЛцибх╝П"><a href="#ч╗УцЮДхЮЛцибх╝П" class="header-anchor">#</a> ч╗УцЮДхЮЛцибх╝П</h2> <h3 id="шгЕще░хЩицибх╝П"><a href="#шгЕще░хЩицибх╝П" class="header-anchor">#</a> шгЕще░хЩицибх╝П</h3> <blockquote><p>шгЕще░хЩицибх╝Пя╝МхПИхРНшгЕще░шАЕцибх╝ПуАВщб╛хРНцАЭф╣Йя╝МхоГчЪДхоЪф╣ЙцШптАЬхЬиф╕НцФ╣хПШхОЯхп╣ш▒бчЪДхЯ║чбАф╕Кя╝МщАЪш┐Зхп╣хЕ╢ш┐ЫшбМхМЕшгЕцЛУх▒Хя╝Мф╜┐хОЯцЬЙхп╣ш▒бхПпф╗ец╗бш╢│чФицИ╖чЪДцЫ┤хдНцЭВщЬАц▒ВтАЭуАВ</p></blockquote> <p>хЫацндхЕ╢чЙ╣х╛Бф╕╗шжБцЬЙф╕дчВ╣я╝Ъ<br>
1я╝Й ф╕║хп╣ш▒бц╖╗хКацЦ░хКЯшГ╜я╝Ы<br>
2я╝Йф╕НцФ╣хПШхЕ╢хОЯцЬЙчЪДч╗УцЮДхТМхКЯшГ╜я╝МхН│хОЯцЬЙхКЯшГ╜ш┐Шч╗зч╗нф╝ЪчФия╝Мф╕ФхЬ║цЩпф╕Нф╝ЪцФ╣хПШуАВ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;чФ╗ф╕Аф╕кхЬЖх╜в&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Decorator</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">circle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>circle <span class="token operator">=</span> circle<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>circle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// тАЬхМЕшгЕтАЭф║Жф╕Ах▒ВцЦ░щА╗ш╛С</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setRedBorder</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setRedBorder</span><span class="token punctuation">(</span><span class="token parameter">circle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;чФ╗ф╕Аф╕кч║вшЙ▓ш╛╣цбЖ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> decorator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Decorator</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
decorator<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//чФ╗ф╕Аф╕кхЬЖх╜вя╝МчФ╗ф╕Аф╕кч║вшЙ▓ш╛╣цбЖ</span>
</code></pre></div><p>шпеф╛Лф╕ня╝МцИСф╗мхЖЩф║Жф╕Аф╕к Decorator шгЕще░хЩич▒╗я╝МхоГщЗНхЖЩф║ЖхоЮф╛Лхп╣ш▒бчЪД drawуАВ</p> <p>хжВцЮЬхРОч╗нщЬАшжБхп╣ draw ш┐Щф╕кшбМф╕║ц╖╗хКацЫ┤хдЪшпжч╗Жхп╣щЬАц▒Вя╝МхПпф╗ечЫ┤цОехЬи Decorator ф╕нц╖╗хКауАВхжВцндф╕АцЭея╝МцИСф╗мх░▒хПпф╗ехоЮчО░тАЬхПкц╖╗хКая╝Мф╕Нф┐оцФ╣тАЭчЪДшгЕще░хЩицибх╝ПуАВ</p> <p>ES7 ф╕нф╣Ях╝ХхЕеф║ЖшгЕще░хЩишпнц│ХцПТф╗╢я╝МхЕ╖ф╜УчФиц│Хя╝Ъ</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install babel<span class="token operator">-</span>plugin<span class="token operator">-</span>transform<span class="token operator">-</span>decorators<span class="token operator">-</span>legacy
npm install babel<span class="token operator">-</span>cli <span class="token operator">-</span>g

<span class="token comment">//.babelrc</span>
<span class="token comment">// ц╡ПшзИхЩихТМ Node чЫохЙНщГ╜ф╕НцФпцМБшгЕще░хЩишпнц│Хя╝МщЬАшжБхдзхо╢хоЙшгЕ Babel ш┐ЫшбМш╜мчаБя╝Ъ</span>
<span class="token punctuation">{</span>
    <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;latest&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;transform-decorators-legacy&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// шгЕще░хЩихЗ╜цХ░я╝МхоГчЪДчммф╕Аф╕кхПВцХ░цШпчЫоцаЗч▒╗</span>
<span class="token keyword">function</span> <span class="token function">classDecorator</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">.</span>hasDecorator <span class="token operator">=</span> <span class="token boolean">true</span>
  	<span class="token keyword">return</span> target
<span class="token punctuation">}</span>

<span class="token comment">// х░ЖшгЕще░хЩитАЬхоЙшгЕтАЭхИ░Buttonч▒╗ф╕К</span>
@classDecorator
<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token punctuation">{</span>
    <span class="token comment">// Buttonч▒╗чЪДчЫ╕хЕ│щА╗ш╛С</span>
<span class="token punctuation">}</span>

<span class="token comment">// щкМшпБшгЕще░хЩицШпхРжчФЯцХИ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Button цШпхРжшвлшгЕще░ф║Жя╝Ъ'</span><span class="token punctuation">,</span> Button<span class="token punctuation">.</span>hasDecorator<span class="token punctuation">)</span>


<span class="token comment">// ф╗еф╕КчоАхМЦя╝Ъ</span>
@decorator
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// чнЙхРМф║О</span>

<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token constant">A</span> <span class="token operator">=</span> <span class="token function">decorator</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token constant">A</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="х║ФчФихЬ║цЩп-3"><a href="#х║ФчФихЬ║цЩп-3" class="header-anchor">#</a> х║ФчФихЬ║цЩп</h4> <h5 id="mixin"><a href="#mixin" class="header-anchor">#</a> mixin</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mixins</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token operator">...</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;in foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

@<span class="token function">mixins</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// in foo</span>
</code></pre></div><h5 id="х▒ЮцАзшгЕще░хЩи"><a href="#х▒ЮцАзшгЕще░хЩи" class="header-anchor">#</a> х▒ЮцАзшгЕще░хЩи</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// шгЕще░хЩи</span>
<span class="token comment">// шо╛ч╜ох▒ЮцАзхПкшп╗</span>
<span class="token keyword">function</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> name<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// descriptor х▒ЮцАзцППш┐░хп╣ш▒бя╝ИObject.defineProperty ф╕нф╝ЪчФихИ░я╝Й</span>
    <span class="token comment">/*
      {
          value: specifiedFunction,
          enumerable: false,
          configurable: true
          writable: true цШпхРжхПпцФ╣
      }
    */</span>

    descriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token string">&quot;хСи&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token string">&quot;цЭ░ф╝ж&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @readonly
    <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>first<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// цЙУхН░цИРхКЯ я╝МтАШхСицЭ░ф╝жтАЩ</span>

<span class="token comment">// шпХхЫ╛ф┐оцФ╣name</span>
p<span class="token punctuation">.</span><span class="token function-variable function">name</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;ccc&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught TypeErrorя╝ЪCannot assign to read only property 'name' of object '#&lt;Person&gt;'</span>
<span class="token comment">// хПпшзБя╝МхЖНч╗Щх▒ЮцАзц╖╗хКаф║ЖхПкшп╗чЪДшгЕще░хРОя╝Мф╗гчаБшпХхЫ╛ф┐оцФ╣х▒ЮцАзчЪДхС╜ф╗дх░Жф╝ЪцКещФЩуАВ</span>
</code></pre></div><h3 id="щАВщЕНхЩицибх╝П"><a href="#щАВщЕНхЩицибх╝П" class="header-anchor">#</a> щАВщЕНхЩицибх╝П</h3> <p>щАВщЕНхЩицибх╝Пх╛Ихе╜чРЖшзгя╝МхЬицЧех╕╕х╝АхПСф╕нхЕ╢хоЮф╕Нч╗ПцДПщЧ┤х░▒чФихИ░ф║ЖуАВ</p> <p>щАВщЕНхЩицибх╝Пя╝ИAdapterя╝ЙцШпх░Жф╕Аф╕к<strong>ч▒╗я╝Ихп╣ш▒бя╝ЙчЪДцОехПгя╝ИцЦ╣ц│ХцИЦх▒ЮцАзя╝Й<strong>ш╜мхМЦцИР</strong>щАВх║Фх╜УхЙНхЬ║цЩпчЪДхПжф╕Аф╕кцОехПгя╝ИцЦ╣ц│ХцИЦх▒ЮцАзя╝Й</strong>я╝МщАВщЕНхЩицибх╝Пф╜┐х╛ЧхОЯцЬмчФ▒ф║ОцОехПгф╕НхЕ╝хо╣шАМф╕НшГ╜ф╕Аш╡╖х╖еф╜ЬчЪДщВгф║Ыч▒╗я╝Ихп╣ш▒бя╝ЙхПпф╗еф╕Аф║Ых╖еф╜ЬуАВцЙАф╗ея╝МщАВщЕНхЩицибх╝Пх┐Ещб╗хМЕхРлчЫоцаЗя╝ИTargetя╝ЙуАБц║Ря╝ИAdapteeя╝ЙхТМщАВщЕНхЩия╝ИAdapterя╝Йф╕Йф╕кшзТшЙ▓уАВ</p> <p>ф╕╛ф╕кф╛ЛхнРя╝Ъ</p> <p>1я╝ЙцЧех╕╕цЩощАЪшА│цЬ║цПТхПгцШпхЬЖх╜вчЪДя╝МцНвф║Жф╕кцЦ░цЙЛцЬ║ iphone12 цЙЛцЬ║шА│цЬ║цПТхПгцШпцЙБх╣│чЪД usb-c цОехПгя╝МцГ│шжБцЧзшА│цЬ║хЬицЦ░цЙЛцЬ║ф╣ЯшГ╜хЕ╝хо╣чФих╛Чф╕КуАВш┐Щф╕кцЧ╢хАЩш╜мцНвхд┤х░▒хЗ║чО░ф║Жя╝МшАМш╜мцНвхд┤х░▒хЕЕх╜УчЭАф╕Аф╕кщАВщЕНхЩичЪДшзТшЙ▓...</p> <p>2я╝Йхп╣щб╣чЫоф╕нчЪД ajax щЗЗчФи fetch цЫ┐цНвя╝ИхН│щАВщЕНцЧзшп╖ц▒Вца╝х╝Пя╝Й</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HttpUtils</span> <span class="token punctuation">{</span>
    <span class="token comment">// getцЦ╣ц│Х</span>
    <span class="token keyword">static</span> <span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// ш░ГчФиfetch</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// postцЦ╣ц│Хя╝Мdataф╗еobjectх╜вх╝Пф╝ахЕе</span>
    <span class="token keyword">static</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// ш░ГчФиfetch</span>
            <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">Accept</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// х░Жobjectч▒╗хЮЛчЪДцХ░цНоца╝х╝ПхМЦф╕║хРИц│ХчЪДbodyхПВцХ░</span>
                <span class="token comment">// ш╜мцНвш┐ЗчиЛ: {a: 1, b: 2} -&gt; a=1&amp;b=2 -&gt; a%3D1%26b%3D2</span>
                <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// AjaxщАВщЕНхЩихЗ╜цХ░я╝МхЕехПВф╕ОцЧзцОехПгф┐ЭцМБф╕АшЗ┤</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">AjaxAdapter</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> success<span class="token punctuation">,</span> failed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> type <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> result<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// хоЮщЩЕчЪДшп╖ц▒ВхЕищГичФ▒цЦ░цОехПгхПСш╡╖</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> HttpUtils<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> HttpUtils<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// хБЗшо╛шп╖ц▒ВцИРхКЯхп╣х║ФчЪДчК╢цАБчаБцШп1</span>
        result<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> success
            <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
            <span class="token operator">:</span> <span class="token function">failed</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// цНХцНЙч╜Сч╗ЬщФЩшпп</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>failed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">failed</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// чФищАВщЕНхЩищАВщЕНцЧзчЪДAjaxцЦ╣ц│Х</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Ajax</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> success<span class="token punctuation">,</span> failed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">AjaxAdapter</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> success<span class="token punctuation">,</span> failed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="х║ФчФихЬ║цЩп-4"><a href="#х║ФчФихЬ║цЩп-4" class="header-anchor">#</a> х║ФчФихЬ║цЩп</h4> <p>чФЯф║зхоЮш╖╡я╝Ъaxios ф╕нчЪДщАВщЕНхЩи</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  axiosх╕╕чФицЦ╣х╝П</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user?ID=12345'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>


axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Flintstone'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/user/12345'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Flintstone'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>axios х╝║хдзчЪДхЬ░цЦ╣хЬиф║Оя╝МхоГф╕Нф╗Еф╗ЕцШпф╕Аф╕кх▒АщЩРф║Оц╡ПшзИхЩичлпчЪДх║УуАВхЬи Node чОпхвГф╕Ля╝МцИСф╗мх░ЭшпХш░ГчФиф╕КщЭвчЪД apiя╝Мф╝ЪхПСчО░хоГчЕзца╖хе╜ф╜┐ тАФтАФ axios хоМч╛ОхЬ░цК╣х╣│ф║Жф╕дчзНчОпхвГф╕Л api чЪДш░ГчФих╖ох╝Вя╝МщЭачЪДцнгцШпхп╣щАВщЕНхЩицибх╝ПчЪДчБ╡ц┤╗ш┐РчФиуАВ</p> <p>хЬи axios чЪДца╕х┐ГщА╗ш╛Сф╕ня╝МцИСф╗мхПпф╗ец│ицДПхИ░хоЮщЩЕф╕Кц┤╛хПСшп╖ц▒ВчЪДцШп dispatchRequest цЦ╣ц│ХуАВшпецЦ╣ц│ХхЖЕщГихЕ╢хоЮф╕╗шжБхБЪф║Жф╕дф╗╢ф║Ля╝Ъ<br>
1я╝ЙцХ░цНош╜мцНвя╝Мш╜мцНвшп╖ц▒Вф╜У/хУНх║Фф╜Уя╝МхПпф╗ечРЖшзгф╕║цХ░цНох▒ВщЭвчЪДщАВщЕНя╝Ы<br>
2я╝Йш░ГчФищАВщЕНхЩиуАВ</p> <p>ш░ГчФищАВщЕНхЩичЪДщА╗ш╛СхжВф╕Ля╝Ъ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// шЛечФицИ╖цЬкцЙЛхКищЕНч╜ощАВщЕНхЩия╝МхИЩф╜┐чФищ╗ШшодчЪДщАВщЕНхЩи</span>
<span class="token comment">// цЙЛхКищЕНч╜ощАВщЕНхЩихЕБшо╕цИСф╗мшЗкхоЪф╣ЙхдДчРЖшп╖ц▒Вя╝Мф╕╗шжБчЫочЪДцШпф╕║ф║Жф╜┐ц╡ЛшпХцЫ┤ш╜╗цЭ╛уАВ</span>
<span class="token keyword">var</span> adapter <span class="token operator">=</span> config<span class="token punctuation">.</span>adapter <span class="token operator">||</span> defaults<span class="token punctuation">.</span>adapter<span class="token punctuation">;</span>

<span class="token comment">// dispatchRequestцЦ╣ц│ХчЪДцЬлх░╛ш░ГчФичЪДцШпщАВщЕНхЩицЦ╣ц│Х</span>
<span class="token keyword">return</span> <span class="token function">adapter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token comment">// шп╖ц▒ВцИРхКЯчЪДхЫЮш░Г</span>
    <span class="token keyword">function</span> <span class="token function">onAdapterResolution</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">throwIfCancellationRequested</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ш╜мцНвхУНх║Фф╜У</span>
        response<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">transformData</span><span class="token punctuation">(</span>
            response<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
            response<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>
            config<span class="token punctuation">.</span>transformResponse
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> response<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// шп╖ц▒Вхд▒ш┤ечЪДхЫЮш░Г</span>
    <span class="token keyword">function</span> <span class="token function">onAdapterRejection</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isCancel</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">throwIfCancellationRequested</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// ш╜мцНвхУНх║Фф╜У</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>reason <span class="token operator">&amp;&amp;</span> reason<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                reason<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">transformData</span><span class="token punctuation">(</span>
                    reason<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
                    reason<span class="token punctuation">.</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>
                    config<span class="token punctuation">.</span>transformResponse
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// хоЮщЩЕх╝АхПСф╕ня╝МцИСф╗мф╜┐чФищ╗ШшодщАВщЕНхЩичЪДщвСчОЗцЫ┤щлШуАВщ╗ШшодщАВщЕНхЩихЬиaxios/lib/default.jsщЗМцШпщАЪш┐ЗgetDefaultAdapterцЦ╣ц│ХцЭешО╖хПЦчЪДя╝Ъ</span>
<span class="token keyword">function</span> <span class="token function">getDefaultAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> adapter<span class="token punctuation">;</span>

    <span class="token comment">// хИдцЦнх╜УхЙНцШпхРжцШпnodeчОпхвГ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
        <span class="token keyword">typeof</span> process <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span>
        <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object process]&quot;</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// хжВцЮЬцШпnodeчОпхвГя╝Мш░ГчФиnodeф╕Ух▒ЮчЪДhttpщАВщЕНхЩи</span>
        adapter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./adapters/http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> XMLHttpRequest <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// хжВцЮЬцШпц╡ПшзИхЩичОпхвГя╝Мш░ГчФихЯ║ф║ОxhrчЪДщАВщЕНхЩи</span>
        adapter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./adapters/xhr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> adapter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>ф╕Аф╕кхе╜чЪДщАВщЕНхЩичЪДшЗкцИСф┐охЕ╗тАФтАФцККхПШхМЦчХЩч╗ЩшЗкх╖▒я╝МцККч╗Яф╕АчХЩч╗ЩчФицИ╖уАВхЬицндхдДя╝МцЙАцЬЙхЕ│ф║О http цибхЭЧуАБхЕ│ф║О xhr чЪДхоЮчО░ч╗ЖшКВя╝МхЕищГишвл Adapter х░БшгЕш┐Ыф║ЖшЗкх╖▒хдНцЭВчЪДх║Хх▒ВщА╗ш╛СщЗМя╝МцЪ┤щЬ▓ч╗ЩчФицИ╖чЪДщГ╜цШпхНБхИЖчоАхНХчЪДч╗Яф╕АчЪДф╕Ьше┐тАФтАФч╗Яф╕АчЪДцОехПгя╝Мч╗Яф╕АчЪДхЕехПВя╝Мч╗Яф╕АчЪДхЗ║хПВя╝Мч╗Яф╕АчЪДшзДхИЩуАВ</p></blockquote> <h2 id="шбМф╕║хЮЛцибх╝П"><a href="#шбМф╕║хЮЛцибх╝П" class="header-anchor">#</a> шбМф╕║хЮЛцибх╝П</h2> <h3 id="чнЦчХецибх╝П"><a href="#чнЦчХецибх╝П" class="header-anchor">#</a> чнЦчХецибх╝П</h3> <blockquote><p>чнЦчХецибх╝ПчЪДхоЪф╣Йя╝ЪхоЪф╣Йф╕Ач│╗хИЧчЪДчоЧц│Хя╝МцККф╗Цф╗мф╕Аф╕кф╕кх░БшгЕш╡╖цЭея╝Мх╣╢ф╕Фф╜┐ф╗Цф╗мхПпф╗ечЫ╕ф║ТцЫ┐цНвуАВ</p></blockquote> <p>чнЦчХецибх╝ПчЪДчЫочЪДх░▒цШпх░ЖчоЧц│ХчЪДф╜┐чФихТМчоЧц│ХчЪДхоЮчО░хИЖчж╗х╝АцЭеуАВ</p> <p>ф╕Аф╕кхЯ║ф║ОчнЦчХецибх╝ПчЪДчиЛх║ПшЗ│х░СчФ▒ф╕дщГихИЖч╗ДцИРуАВ<br>
чммф╕Аф╕кщГихИЖцШпф╕Ач╗ДчнЦчХеч▒╗я╝ИхПпхПШя╝Йя╝МчнЦчХеч▒╗х░БшгЕф║ЖхЕ╖ф╜УчЪДчоЧц│Хя╝Мх╣╢ш┤Яш┤гхЕ╖ф╜УчЪДшобчоЧш┐ЗчиЛуАВ<br>
чммф║Мф╕кщГихИЖцШпчОпхвГч▒╗ Contextя╝Иф╕НхПШя╝Йя╝МContext цОехПЧховцИ╖чЪДшп╖ц▒Вя╝МщЪПхРОх░Жшп╖ц▒ВхзФцЙШч╗ЩцЯРф╕Аф╕кчнЦчХеч▒╗уАВшжБхБЪхИ░ш┐Щф╕АчВ╣я╝Мшп┤цШО Context ф╕ншжБч╗┤цМБхп╣цЯРф╕кчнЦчХехп╣ш▒бчЪДх╝ХчФиуАВ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*чнЦчХеч▒╗*/</span>
<span class="token keyword">var</span> levelOBJ <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">A</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">money</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> money <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">B</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">money</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> money <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">C</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">money</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> money <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*чОпхвГч▒╗*/</span>
<span class="token keyword">var</span> <span class="token function-variable function">calculateBouns</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">level<span class="token punctuation">,</span> money</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> levelOBJ<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculateBouns</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40000</span>
</code></pre></div><h3 id="шзВхпЯшАЕцибх╝П"><a href="#шзВхпЯшАЕцибх╝П" class="header-anchor">#</a> шзВхпЯшАЕцибх╝П</h3> <blockquote><p>шзВхпЯшАЕцибх╝ПхоЪф╣Йф║Жф╕АчзНф╕Ахп╣хдЪчЪДф╛Эш╡ЦхЕ│ч│╗я╝МшойхдЪф╕кшзВхпЯшАЕхп╣ш▒бхРМцЧ╢чЫСхРмцЯРф╕Аф╕кчЫоцаЗхп╣ш▒бя╝Мх╜Уш┐Щф╕кчЫоцаЗхп╣ш▒бчЪДчК╢цАБхПСчФЯхПШхМЦцЧ╢я╝Мф╝ЪщАЪчЯецЙАцЬЙшзВхпЯшАЕхп╣ш▒б(1 хп╣ N)я╝Мф╜┐хоГф╗мшГ╜хдЯшЗкхКицЫ┤цЦ░уАВ</p></blockquote> <blockquote><p>шзВхпЯшАЕцибх╝ПцЬЙф╕Аф╕ктАЬхИлхРНтАЭя╝МхПлхПСх╕Г - шовщШЕцибх╝Пя╝Иф╣ЛцЙАф╗ехИлхРНхКаф║Жх╝ХхП╖я╝МцШпхЫаф╕║ф╕дшАЕф╣ЛщЧ┤хнШхЬичЭАч╗Жх╛очЪДх╖ох╝Вя╝ЙуАВш┐Щф╕кхИлхРНщЭЮх╕╕х╜вш▒бхЬ░шпащЗКф║ЖшзВхпЯшАЕцибх╝ПщЗМф╕дф╕кца╕х┐ГчЪДшзТшЙ▓шжБч┤атАФтАФтАЬхПСх╕ГшАЕтАЭф╕ОтАЬшовщШЕшАЕтАЭуАВ</p></blockquote> <p>ф╛ЛхнРя╝Ъф╕Аф╕кф╕кх╝АхПСшвлф║зхУБч╗ПчРЖцЛЙч╛дя╝МчнЙщЬАц▒ВцЦЗцбгцХ┤чРЖхе╜ф║Жф╗ехРОя╝М@цЙАцЬЙф║║ щАЪчЯехРДф╜Нх╝АхПСх╝АхзЛтАЬ996тАЭуАВ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// хПСх╕ГшАЕ</span>
<span class="token keyword">class</span> <span class="token class-name">Publisher</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;publisher created, watchers is: &quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>watchers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ц╖╗хКашовщШЕшАЕ</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watchers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// хИащЩдшовщШЕшАЕ</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watchers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> watcher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>watchers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// щАЪчЯешовщШЕшАЕ</span>
    <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watchers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            watcher<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// шовщШЕшАЕ</span>
<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;watcher created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Watcher.update invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// хЬихоЮщЩЕчЪДф╕ЪхКбх╝АхПСф╕ня╝МцИСф╗мцЙАцЬЙчЪДхоЪхИ╢хМЦчЪДхПСх╕ГшАЕ/шовщШЕшАЕщА╗ш╛СщГ╜хПпф╗ехЯ║ф║Ош┐Щф╕дф╕кхЯ║цЬмч▒╗цЭецФ╣хЖЩуАВ</span>
<span class="token keyword">class</span> <span class="token class-name">PrdPublisher</span> <span class="token keyword">extends</span> <span class="token class-name">Publisher</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// хИЭхзЛхМЦщЬАц▒ВцЦЗцбг</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prdFile <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token comment">// хИЭхзЛхМЦч╛д</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;PrdPublisher created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;PrdPublisher.setState invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// щЬАц▒ВцЦЗцбгхПСчФЯцФ╣хПШ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prdFile <span class="token operator">=</span> state<span class="token punctuation">;</span>

        <span class="token comment">// члЛхИ╗щАЪчЯецЙАцЬЙх╝АхПСшАЕ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;PrdPublisher.getState invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prdFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DeveloperWatcher</span> <span class="token keyword">extends</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ш┐Шц▓бшО╖хПЦцЬАцЦ░щЬАц▒ВцЦЗцбг</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prdFile <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;DeveloperWatcher created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">publisher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;DeveloperWatcher.update invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// цЫ┤цЦ░щЬАц▒ВцЦЗцбг</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prdFile <span class="token operator">=</span> publisher<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// х╝АхзЛцРмчаЦ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ф╕УщЧицРмчаЦчЪДцЦ╣ц│Х</span>
    <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// шО╖хПЦщЬАц▒ВцЦЗцбг</span>
        <span class="token keyword">const</span> prd <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prdFile<span class="token punctuation">;</span>

        <span class="token comment">// х╝АхзЛхЯ║ф║ОщЬАц▒ВцЦЗцбгцПРф╛ЫчЪДф┐бцБпцРмчаЦуАВуАВуАВ</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;996 begins...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// х╝АхзЛф║Ж</span>
<span class="token comment">// хПСх╕ГшАЕ-щб╣чЫоч╛д</span>
<span class="token keyword">const</span> project1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrdPublisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// шовщШЕшАЕ</span>
<span class="token keyword">const</span> chieminchan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeveloperWatcher</span><span class="token punctuation">(</span><span class="token string">&quot;chieminchan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> kate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeveloperWatcher</span><span class="token punctuation">(</span><span class="token string">&quot;kate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> toby <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeveloperWatcher</span><span class="token punctuation">(</span><span class="token string">&quot;toby&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// щб╣чЫоч╛дцЛЙф║║</span>
project1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>chieminchan<span class="token punctuation">)</span><span class="token punctuation">;</span>
project1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>kate<span class="token punctuation">)</span><span class="token punctuation">;</span>
project1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>toby<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// цЫ┤цЦ░щЬАц▒ВцЦЗцбг</span>
<span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">day1</span><span class="token operator">:</span> <span class="token string">&quot;щЬАц▒ВшпДхоб&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">day2</span><span class="token operator">:</span> <span class="token string">&quot;цв│чРЖщЬАц▒Вшпжч╗Жц╡БчиЛ&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
project1<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="х║ФчФихЬ║цЩп-5"><a href="#х║ФчФихЬ║цЩп-5" class="header-anchor">#</a> х║ФчФихЬ║цЩп</h4> <p><a href="/articles/Vue/VueчЪДхПМхРСч╗СхоЪ.html">Vue чЪДхПМхРСч╗СхоЪ</a> уАБ EventBus/EventEmitter</p> <p>vue чЪДхПМхРСч╗СхоЪхПпф╗ехПВшАГхПжф╕АчпЗцЦЗчлая╝Мш┐ЩщЗМх▒Хх╝Аф╕Аф╕Л EventEmitter чЪДхоЮчО░уАВ</p> <p>хЕИцЭечЬЛчЬЛх║ФчФицЦ╣х╝Пя╝Ъ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> emitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// чЫСхРмsendMsgф║Лф╗╢</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;sendMsg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;цИСцОецФ╢хИ░ф║Жц╢ИцБп: &quot;</span><span class="token punctuation">,</span> text1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// шзжхПСemitterф║Лф╗╢</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;sendMsg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;send test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;----------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ф╕АцмбцАзчЫСхРм forOnceф║Лф╗╢</span>
emitter<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;forOnce&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text1<span class="token punctuation">,</span> text2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;цИСцОецФ╢хИ░ф║Жц╢ИцБп: &quot;</span><span class="token punctuation">,</span> text1<span class="token punctuation">,</span> text2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;forOnce&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tets2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
on invoked
цИСцОецФ╢хИ░ф║Жц╢ИцБп:  send test
----------------------
on invoked
цИСцОецФ╢хИ░ф║Жц╢ИцБп:  test1 tets2
off invoked
*/</span>
</code></pre></div><p>ES6 хоЮчО░цЦ╣х╝П</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ф║Лф╗╢ф╕ОхЫЮш░ГхЗ╜цХ░чЪДцШах░Дшби</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handlers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// хоЙшгЕф║Лф╗╢чЫСхРмхЩи</span>
    <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// хЕИцгАцЯеф╕Аф╕ЛчЫоцаЗф║Лф╗╢хРНцЬЙц▓бцЬЙхп╣х║ФчЪДчЫСхРмхЗ╜цХ░щШЯхИЧ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// цККхЫЮш░ГхЗ╜цХ░цОихЕечЫоцаЗф║Лф╗╢чЪДчЫСхРмхЗ╜цХ░щШЯхИЧщЗМхО╗</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;on invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// чз╗щЩдцЯРф╕кф║Лф╗╢хЫЮш░ГщШЯхИЧщЗМчЪДцМЗхоЪхЫЮш░ГхЗ╜цХ░</span>
    <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> index <span class="token operator">=</span> callbacks<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            callbacks<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;off invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// emitцЦ╣ц│ХчФиф║ОшзжхПСчЫоцаЗф║Лф╗╢</span>
    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">evnet<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>evnet<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>evnet<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">handler</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ф╕║ф║Лф╗╢ц│ихЖМхНХцмбчЫСхРмхЩи</span>
    <span class="token comment">// щЬАхп╣хЫЮш░ГхЗ╜цХ░ш┐ЫшбМхМЕшгЕя╝Мф╜┐хЕ╢цЙзшбМхоМцпХшЗкхКишвлчз╗щЩд</span>
    <span class="token function">once</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">wrapper</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>handler<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ES5 хоЮчО░цЦ╣х╝П</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">on</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;on invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">off</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> callbacks<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        callbacks<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;off invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">emit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">handler</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">once</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">wrapper</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="шзВхпЯшАЕцибх╝Пф╕ОхПСх╕Г-шовщШЕцибх╝ПчЪДхМ║хИлцШпф╗Аф╣И"><a href="#шзВхпЯшАЕцибх╝Пф╕ОхПСх╕Г-шовщШЕцибх╝ПчЪДхМ║хИлцШпф╗Аф╣И" class="header-anchor">#</a> шзВхпЯшАЕцибх╝Пф╕ОхПСх╕Г-шовщШЕцибх╝ПчЪДхМ║хИлцШпф╗Аф╣И</h4> <p>ф╕дчзНчЪДца╕х┐ГцАЭш╖пцШпф╕Аца╖чЪДя╝МхПкцШпшзДцибф╕НхРМцЙАщЗЗхПЦчЪДцЦ╣цбИф╕НхРМшАМх╖▓уАВ</p> <p>хЬихПСх╕ГшовщШЕцибх╝ПщЗМя╝МхПСх╕ГшАЕх╣╢ф╕Нф╝ЪчЫ┤цОещАЪчЯешовщШЕшАЕя╝МцНвхПешпЭшп┤я╝МхПСх╕ГшАЕхТМшовщШЕшАЕя╝Мх╜╝цндф║Тф╕НчЫ╕шпЖя╝МщАЪш┐Зчммф╕ЙшАЕя╝Мф╣Ях░▒цШпхЬиц╢ИцБпщШЯхИЧщЗМщЭвуАВ</p> <blockquote><p>цЬЙчВ╣ч▒╗ф╝╝ф║Ох┐лщАТхСШф╕КщЧищАБш┤зя╝МхРОцЭех┐лщАТхдкхдЪф║Жя╝Мф╕║ф║ЖхвЮхКацХИчОЗя╝МхИЖх╖ецЫ┤цШОчбоф╕АчВ╣я╝МчО░хЬихдЪф║Жф╕кф╕нщЧ┤члЩя╝МшПЬщ╕Ящй┐члЩя╝Мх┐лщАТхСШцЦ╣ф╛┐ф║Жя╝Мш┐ЩцШпхЬишзДцибш╡╖цЭеф╗ехРОшЗкчД╢шАМчД╢чЪДщАЙцЛйуАВчО░хЬицШпф║║ф╕╗хКихО╗цЛ┐х┐лщАТя╝МхжВцЮЬф╗ехРОш┐Юш┐Щф╣ЯхлМх╝ГцХИчОЗф╕НщлШя╝МцАОф╣ИхКЮя╝ЯхЖНхКаф╕Ах▒Вя╝МшПЬщ╕Ящй┐члЩц┤╛хЗ║цЬ║хЩиф║║щАБ..</p></blockquote> <p>ф╗ОшбищЭвф╕КчЬЛя╝Ъ</p> <ol><li>шзВхпЯшАЕцибх╝ПщЗМя╝МхПкцЬЙф╕дф╕кшзТшЙ▓ тАФтАФ шзВхпЯшАЕ + швлшзВхпЯшАЕ</li> <li>хПСх╕ГшовщШЕцибх╝ПщЗМя╝МхН┤ф╕Нф╗Еф╗ЕхПкцЬЙхПСх╕ГшАЕхТМшовщШЕшАЕф╕дф╕кшзТшЙ▓я╝Мш┐ШцЬЙф╕Аф╕кч╗Пх╕╕швлцИСф╗мх┐╜чХечЪД тАФтАФ ч╗Пч║кф║║ Broker</li></ol> <p>х╛АцЫ┤ц╖▒х▒Вцмбшо▓я╝Ъ</p> <ol><li>шзВхпЯшАЕхТМшвлшзВхпЯшАЕя╝МцШпцЭ╛шАжхРИчЪДхЕ│ч│╗</li> <li>хПСх╕ГшАЕхТМшовщШЕшАЕя╝МхИЩхоМхЕиф╕НхнШхЬишАжхРИ</li></ol> <p>ф╗Оф╜┐чФих▒ВщЭвф╕Кшо▓я╝Ъ</p> <ol><li>шзВхпЯшАЕцибх╝Пя╝МхдЪчФиф║ОхНХф╕кх║ФчФихЖЕщГи</li> <li>хПСх╕ГшовщШЕцибх╝Пя╝МхИЩцЫ┤хдЪчЪДцШпф╕АчзНш╖их║ФчФичЪДцибх╝П(cross-application pattern)я╝МцпФхжВцИСф╗мх╕╕чФичЪДц╢ИцБпф╕нщЧ┤ф╗╢</li></ol> <p>хПВшАГцЦЗчлая╝Ъ</p> <ul><li><p><a href="https://www.weisuoke.com/fe2020/Gof/juejin-GoF.htm" target="_blank" rel="noopener noreferrer">цОШщЗСх░ПхЖМ - JavaScript шо╛шобцибх╝Пца╕т╝╝хОЯчРЖф╕Ох║Фт╜дхоЮш╖╡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/6844903918330347533#heading-15" target="_blank" rel="noopener noreferrer">ц╖▒хЕе JavaScript шо╛шобцибх╝Пя╝Мф╗ОцндцЬЙф║Жф╝ШхМЦф╗гчаБчЪДчРЖшо║ф╛ЭцНо<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://github.com/MuYunyun/blog/tree/main/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">шо╛шобцибх╝ПчЪДх║ФчФи<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      тЖР
      <a href="/articles/Browser/ш╛УхЕе URL хИ░х▒Хчд║щб╡щЭвчЪДш┐ЗчиЛ.html" class="prev">
        ЁЯСЙ ф╗Ош╛УхЕе URL хИ░х▒Хчд║щб╡щЭвчЪДш┐ЗчиЛч╗ПхОЖф║Жф║Ыф╗Аф╣Ия╝Я
      </a></span> <span class="next"><a href="/articles/JavaScript/JavaScriptцЙзшбМф╕Кф╕ЛцЦЗ.html">
        ЁЯСЙ JavaScript цЙзшбМф╕Кф╕ЛцЦЗ
      </a>
      тЖТ
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.448d156c.js" defer></script><script src="/assets/js/2.fefa3fa1.js" defer></script><script src="/assets/js/1.67a15f5a.js" defer></script><script src="/assets/js/40.23565895.js" defer></script>
  </body>
</html>
