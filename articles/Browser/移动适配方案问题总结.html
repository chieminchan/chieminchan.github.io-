<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>👉 移动适配方案问题总结 | CHIEMINCHAN&#39;S BLOG</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/donut.png">
    <meta name="description" content="Hi, glad you came.">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.448d156c.js" as="script"><link rel="preload" href="/assets/js/2.fefa3fa1.js" as="script"><link rel="preload" href="/assets/js/1.67a15f5a.js" as="script"><link rel="preload" href="/assets/js/38.f86fa51b.js" as="script"><link rel="prefetch" href="/assets/js/10.5229b01a.js"><link rel="prefetch" href="/assets/js/11.9dccb5a1.js"><link rel="prefetch" href="/assets/js/12.1aa023e7.js"><link rel="prefetch" href="/assets/js/13.da540175.js"><link rel="prefetch" href="/assets/js/14.981e669d.js"><link rel="prefetch" href="/assets/js/15.f28dd0b3.js"><link rel="prefetch" href="/assets/js/16.47e1d84d.js"><link rel="prefetch" href="/assets/js/17.7ff34030.js"><link rel="prefetch" href="/assets/js/18.6dcbdd16.js"><link rel="prefetch" href="/assets/js/19.e568fd00.js"><link rel="prefetch" href="/assets/js/20.182f1f9b.js"><link rel="prefetch" href="/assets/js/21.b834a74a.js"><link rel="prefetch" href="/assets/js/22.a3523cd2.js"><link rel="prefetch" href="/assets/js/23.61d15c5b.js"><link rel="prefetch" href="/assets/js/24.2aadb209.js"><link rel="prefetch" href="/assets/js/25.836695fb.js"><link rel="prefetch" href="/assets/js/26.0ab922cb.js"><link rel="prefetch" href="/assets/js/27.5ac9e339.js"><link rel="prefetch" href="/assets/js/28.d6a5eb15.js"><link rel="prefetch" href="/assets/js/29.3eea682e.js"><link rel="prefetch" href="/assets/js/3.fc739620.js"><link rel="prefetch" href="/assets/js/30.5225944d.js"><link rel="prefetch" href="/assets/js/31.ec02d3da.js"><link rel="prefetch" href="/assets/js/32.bd05dede.js"><link rel="prefetch" href="/assets/js/33.4a293dcf.js"><link rel="prefetch" href="/assets/js/34.4464026b.js"><link rel="prefetch" href="/assets/js/35.4dd4f327.js"><link rel="prefetch" href="/assets/js/36.ca28dda7.js"><link rel="prefetch" href="/assets/js/37.3a17971f.js"><link rel="prefetch" href="/assets/js/39.6ff149b0.js"><link rel="prefetch" href="/assets/js/4.0471e9ae.js"><link rel="prefetch" href="/assets/js/40.23565895.js"><link rel="prefetch" href="/assets/js/41.0116a1ec.js"><link rel="prefetch" href="/assets/js/42.c38f3e0c.js"><link rel="prefetch" href="/assets/js/43.1d0d8ffd.js"><link rel="prefetch" href="/assets/js/44.631fa43e.js"><link rel="prefetch" href="/assets/js/45.0f88df1f.js"><link rel="prefetch" href="/assets/js/46.cc671ab0.js"><link rel="prefetch" href="/assets/js/47.90cce12d.js"><link rel="prefetch" href="/assets/js/48.ad0ce6a4.js"><link rel="prefetch" href="/assets/js/49.ade35f37.js"><link rel="prefetch" href="/assets/js/5.5356be46.js"><link rel="prefetch" href="/assets/js/50.de00c31b.js"><link rel="prefetch" href="/assets/js/51.9de8257a.js"><link rel="prefetch" href="/assets/js/52.50f1abf2.js"><link rel="prefetch" href="/assets/js/53.b3b3acb2.js"><link rel="prefetch" href="/assets/js/54.71bfe1b2.js"><link rel="prefetch" href="/assets/js/55.b00cfb1c.js"><link rel="prefetch" href="/assets/js/56.1bb058d3.js"><link rel="prefetch" href="/assets/js/57.5651fd65.js"><link rel="prefetch" href="/assets/js/58.3dd11306.js"><link rel="prefetch" href="/assets/js/59.233d45e8.js"><link rel="prefetch" href="/assets/js/6.5b3d5499.js"><link rel="prefetch" href="/assets/js/60.7c729149.js"><link rel="prefetch" href="/assets/js/61.eb5805f6.js"><link rel="prefetch" href="/assets/js/62.fde12179.js"><link rel="prefetch" href="/assets/js/63.3358d1e0.js"><link rel="prefetch" href="/assets/js/64.1b930210.js"><link rel="prefetch" href="/assets/js/65.3048ba53.js"><link rel="prefetch" href="/assets/js/66.a065502e.js"><link rel="prefetch" href="/assets/js/67.715eef17.js"><link rel="prefetch" href="/assets/js/68.edf44196.js"><link rel="prefetch" href="/assets/js/69.94cb6d60.js"><link rel="prefetch" href="/assets/js/7.c94df317.js"><link rel="prefetch" href="/assets/js/70.9061bb98.js"><link rel="prefetch" href="/assets/js/71.980c8e32.js"><link rel="prefetch" href="/assets/js/72.43be58ba.js"><link rel="prefetch" href="/assets/js/73.e2f40377.js"><link rel="prefetch" href="/assets/js/74.9ef8a48c.js"><link rel="prefetch" href="/assets/js/75.b006fb40.js"><link rel="prefetch" href="/assets/js/76.311cf38f.js"><link rel="prefetch" href="/assets/js/77.2d4b2c6d.js"><link rel="prefetch" href="/assets/js/78.81fd1ead.js"><link rel="prefetch" href="/assets/js/79.01e24fba.js"><link rel="prefetch" href="/assets/js/80.b15cc1f3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.934ed2fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CHIEMINCHAN'S BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">
  文章
</a></div><div class="nav-item"><a href="/fragments/" class="nav-link">
  知识碎片
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  读/观后感
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chieminchan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">
  文章
</a></div><div class="nav-item"><a href="/fragments/" class="nav-link">
  知识碎片
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/reading/" class="nav-link">
  读/观后感
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chieminchan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Browser</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/articles/Browser/前端路由实现.html" class="sidebar-link">👉 前端路由实现</a></li><li><a href="/articles/Browser/数据存储和通信方式.html" class="sidebar-link">👉 数据存储和通信方式</a></li><li><a href="/articles/Browser/移动适配方案问题总结.html" class="active sidebar-link">👉 移动适配方案问题总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#移动端适配原理" class="sidebar-link">移动端适配原理</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#像素" class="sidebar-link">像素</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#屏幕" class="sidebar-link">屏幕</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#viewport-视口" class="sidebar-link">viewport 视口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#layout-viewport" class="sidebar-link">layout viewport</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#visual-viewport" class="sidebar-link">visual viewport</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#idea-viewport" class="sidebar-link">idea viewport</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#meta-viewport" class="sidebar-link">meta - viewport</a></li></ul></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#rem-原理" class="sidebar-link">Rem 原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#flexible-js" class="sidebar-link">flexible.js</a></li></ul></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#vw-vh-原理" class="sidebar-link">vw/vh 原理</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#_1px-方案" class="sidebar-link">1px 方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#产生原因" class="sidebar-link">产生原因</a></li><li class="sidebar-sub-header"><a href="/articles/Browser/移动适配方案问题总结.html#解决方案" class="sidebar-link">解决方案</a></li></ul></li></ul></li><li><a href="/articles/Browser/输入 URL 到展示页面的过程.html" class="sidebar-link">👉 从输入 URL 到展示页面的过程经历了些什么？</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DesignPatterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Microapp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Project Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="移动适配方案问题总结"><a href="#移动适配方案问题总结" class="header-anchor">#</a> 👉 移动适配方案问题总结</h1> <h2 id="移动端适配原理"><a href="#移动端适配原理" class="header-anchor">#</a> 移动端适配原理</h2> <p>移动端多屏幕适配是为了保证各个屏幕上的布局视口都是等于屏幕（视觉上的）宽度。即<code>width（layoutVieport）= device-width</code>。</p> <p>理想的网页展示应该是用户进入页面不需要手动缩放就能够看清页面的内容也没有横向滚动条。</p> <p>要如何去实现移动端网页展示达到理想效果涉及到很多因素，但主要包括三个方面：像素（pixels）、屏幕（screen）、视口（viewport）、缩放（scale）。</p> <p>首先熟悉以下常见的几个概念。</p> <h2 id="像素"><a href="#像素" class="header-anchor">#</a> 像素</h2> <h4 id="物理像素-physical-pixel-设备像素"><a href="#物理像素-physical-pixel-设备像素" class="header-anchor">#</a> 物理像素 (physical pixel) / 设备像素</h4> <p>设备屏幕实际拥有的像素点，屏幕的基本单元，是有实体的。iphone6/7/8 物理像素为 <code>750 * 1334</code>，总共有 <code>750 * 1334</code> 个像素点。</p> <h4 id="设备像素独立像素-dip-device-independent-pixel-css-像素-逻辑像素"><a href="#设备像素独立像素-dip-device-independent-pixel-css-像素-逻辑像素" class="header-anchor">#</a> 设备像素独立像素 DIP (device-independent pixel) / CSS 像素 / 逻辑像素</h4> <p>反映在 CSS/JS 程序里面的像素点, css 的 px 是逻辑像素的一种。</p> <p>iphone6/7/8 物理像素为 <code>750 * 1334</code>，逻辑像素是 <code>375 * 667</code>。</p> <p>CSS 像素面积随着浏览器的缩放比例而同步缩放。</p> <p>缩放比为 100%时，一个 CSS 像素占多少个设备像素是由设备像素比（DPR）决定的。</p> <p>DPR 为 2，则占两个，DPR 为 3 则占三个。即 1 个 css 像素对应（覆盖）的物理像素个数。</p> <h4 id="设备像素比-dpr-device-pixel-ratio"><a href="#设备像素比-dpr-device-pixel-ratio" class="header-anchor">#</a> 设备像素比 DPR (device pixel ratio)</h4> <p>设备物理像素和设备独立像素的比例，也就是 <code>DevicePixelRatio = 物理像素 / 独立像素</code>。</p> <p>iphone6/7/8 物理像素为 <code>750 * 1334</code>，逻辑像素是 <code>375 * 667</code>。那设备像素比是 2（750 / 375）。</p> <p>CSS 中的 px 就可以看做是设备的独立像素，所以通过 devicePixelRatio，我们可以知道该设备上一个 CSS 像素代表多少个物理像素。CSS 中的像素只是一个抽象的单位，在不同的设备中 1px 所代表的设备物理像素是不同的。</p> <p>UI 设计稿 2 倍图、3 倍图,这个倍就是指设备像素比。例如设计稿是 2 倍图，里面的字体是 24 px，那我们用 24 / 2 就可以得出开发要用的像素为 12 px。</p> <ul><li><p>DPR 取值可以通过<code>window.devicePixelRatio</code>获取。</p></li> <li><p>媒体查询时：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">min-device-pixel-ratio</span><span class="token punctuation">:</span> 1<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="位图像素"><a href="#位图像素" class="header-anchor">#</a> 位图像素</h4> <p>一个位图像素是栅格图像(如：png, jpg, gif 等)最小的数据单元。每一个位图像素都包含着一些自身的显示信息(如：显示位置，颜色值，透明度等)。</p> <p>对于 DPR=2 的 retina 屏幕而言，1 个位图像素对应于 4 个物理像素，由于单个位图像素不可以再进一步分割，所以只能就近取色（导致使用一倍图图片会模糊原因）。所以，对于图片高清问题，比较好的方案就是两倍图片(@2x)。如：200×300(css pixel)img 标签，就需要提供 400×600 的图片。如此一来，位图像素点个数就是原来的 4 倍，在 retina 屏幕下，位图像素点个数就可以跟物理像素点个数形成  1 : 1 的比例，图片自然就清晰了(这也解释了之前留下的一个问题，为啥视觉稿的画布大小要 ×2？)。</p> <h2 id="屏幕"><a href="#屏幕" class="header-anchor">#</a> 屏幕</h2> <p>屏幕分辨率指一个屏幕具体由多少个像素点组成（设备像素）。iPhone 6 的屏幕分辨率为<code>750x1334</code>。这表示手机分别在水平和垂直上所具有的像素点数。</p> <p>屏幕的完整大小用设备像素来衡量，单位是物理属性的单位，做开发的时候也不需要太过关注，我们关注的是 CSS 像素。</p> <p>一般就可以理解为这个单位和 CSS 像素的大小在缩放比为 100%时是一样大的。我们可以在 chrome 这类下载浏览器中能够通过 screen.width/height</p> <p>当然分辨率高不代表屏幕就清晰，屏幕的清晰程度还与尺寸有关。</p> <h4 id="ppi-pixel-per-inch"><a href="#ppi-pixel-per-inch" class="header-anchor">#</a> PPI(Pixel Per Inch)</h4> <p>每英寸包括的像素数，屏幕像素密度。 PPI 可以用于描述屏幕的清晰度以及一张图片的质量。PPI 越高质量越高。一般来说，高像素密度的屏，屏幕分辨率也越大。</p> <h4 id="dpi-dot-per-inch"><a href="#dpi-dot-per-inch" class="header-anchor">#</a> DPI(Dot Per Inch)</h4> <p>即每英寸包括的点数。使用 DPI 来描述图片和屏幕，这时的 DPI 应该和 PPI 是等价的，DPI 最常用的是用于描述打印机，表示打印机每英寸可以打印的点数。</p> <p>在显示器中，dpi=ppi。dpi 强调的是每英寸多少点。同时，屏幕像素密度=分辨率/屏幕尺寸</p> <h2 id="viewport-视口"><a href="#viewport-视口" class="header-anchor">#</a> viewport 视口</h2> <p>先附上一张关于浏览器视口的图：</p> <p><img src="https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/browser/viewport.jpeg" alt="视口" title="视口"></p> <p>PC 浏览器的 viewport 视口指可视区域，移动端的 viewport 指布局视口，即 layout viewport，默认的情况下，布局视口的宽度是要远远大于浏览器的宽度的。</p> <h3 id="layout-viewport"><a href="#layout-viewport" class="header-anchor">#</a> layout viewport</h3> <p>布局视口，meta-viewport 设置的 width 就是 layoutviewport。</p> <p>在 PC 端上，布局视口等于浏览器窗口的宽度。</p> <p>而在移动端上，由于要使为 PC 端浏览器设计的网站能够完全显示在移动端的小屏幕里，浏览器厂商一般将其设为 980px 然后进行缩放，让网页在窄屏幕上能够全部显示。此时的布局视口会远大于移动设备的屏幕，就会出现滚动条。</p> <ul><li><p>布局视口尺寸可以通过 <code>document.documentElement.clientWidth</code>（不包括了滚动条）</p></li> <li><p>同时我们做的媒体查询中判断的 max-width 也是判断布局视口的宽度。</p></li> <li><p>虽然 document.documentElement 就是 html 元素，但是取值却不是取的 html 元素的宽度。</p></li> <li><p>取值 <code>max(width(viewport设置的width), ideaViewport宽度/scale)</code></p></li></ul> <h3 id="visual-viewport"><a href="#visual-viewport" class="header-anchor">#</a> visual viewport</h3> <p>可见视口，会根据屏幕大小缩放变化；</p> <p>也可以理解成是用户正在看到的网页的区域。用户可以通过缩放来查看网站的内容。如果用户缩小网站，我们看到的网站区域将变大，此时视觉视口也变大了，同理，用户放大网站，我们能看到的网站区域将缩小，此时视觉视口也变小了。不管用户如何缩放，都不会影响到布局视口的宽度。</p> <ul><li>取值  <code>visual viewport = idea viewpoint / scale = ideal viewport * dpr</code>；</li> <li>通过  <code>window.innerWidth</code>（包括滚动条）可获取；</li></ul> <h3 id="idea-viewport"><a href="#idea-viewport" class="header-anchor">#</a> idea viewport</h3> <p>理想视口，布局视口的一个理想尺寸，只有当布局视口的尺寸等于设备屏幕的尺寸时，才是理想视口。</p> <p>为浏览器定义的可完美适配移动端的理想 viewport，固定不变，可以认为是设备视口宽度。<br>
比如：iphone 6/7/8 为 375px, iphone 7p 为 414px。</p> <p>那么怎么才能得到 ideal viewport 呢？这就该轮到 meta 标签出场了。</p> <h3 id="meta-viewport"><a href="#meta-viewport" class="header-anchor">#</a> meta - viewport</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>该 meta 标签的作用是把当前的 viewport 宽度设置为 ideal viewport 的宽度。</p> <h4 id="initial-scale"><a href="#initial-scale" class="header-anchor">#</a> initial-scale</h4> <p>缩放的基准值，因此 initial-scale=1 和 width=device-width 效果一样。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 其实这两句话和上面达到的效果都是一样的，都可以把当前的的viewport变为ideal</span>
viewport
<span class="token comment">// 指定布局视口宽度=设备屏幕宽度，指定了布局视口就是理想视口</span>
<span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// 这样设置跟上面的width=device-width设置产生的效果是一样的。</span>
<span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;initial-scale=1&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>其中：<br>
1）width：设置的是 layout viewport 宽度。<br>
meta viewport 中把 width 设为 device-width，就将 layout viewport 的宽度设为移动设备的屏幕宽度（也就是 ideal viewport）。</p> <p>2）initial-scale：设置初始缩放值。<br>
这个缩放值相对于 ideal viewport 来缩放的（并不是说改变理想视口大小）；<br>
缩放值越大（没有设置 width=device-width 的前提下），当前布局视口<code>document.documentHtml.clientWidth</code>跟可视视口<code>window.clientWidth</code>的宽度都会越小，反之亦然。</p> <blockquote><blockquote><p>缩放值为 1 的时候就表示当前 viewport 的宽度设为 ideal viewport 的宽度，这个时候，逻辑像素 = CSS 像素宽度 = 理想视口的宽度 = 布局视口的宽度。</p></blockquote></blockquote> <blockquote><blockquote><p>例如在 iphone 中，ideal viewport 的宽度是 320px，如果我们设置 initial-scale=2 ，此时 viewport 的宽度会变为只有 160px 了。<br>
这也好理解，放大了一倍嘛，就是原来 1px 的东西变成 2px 了，但是 1px 变为 2px 并不是把原来的 320px 变为 640px 了，而是在实际宽度不变的情况下，1px 变得跟原来的 2px 的长度一样了，所以放大 2 倍后原来需要 320px 才能填满的宽度现在只需要 160px 就做到了。</p></blockquote></blockquote> <p>单独设置 initial-scale 或 width 都会有兼容性问题，所以设置布局视口为理想视口的最佳方法是同时设置这两个属性。如果两个值有冲突，layout viewport 则取两值中的最大值。</p> <h2 id="rem-原理"><a href="#rem-原理" class="header-anchor">#</a> Rem 原理</h2> <p>Rem 相对于文档的根元素 html 的 <code>front-size</code>；em 相对于父元素的<code>front-size</code>。</p> <h3 id="flexible-js"><a href="#flexible-js" class="header-anchor">#</a> flexible.js</h3> <ul><li>flexible.js 主要就是利用 Rem 对页面元素进行适配，其中：</li></ul> <ol><li><p>把宽高是 px 的转换成 rem<br>
为了保证在不同宽度尺寸的设备中能够保证布局的等比例缩放。</p></li> <li><p>字体使用 px 而不使用 rem<br>
因为使用 rem 后由于不同的尺寸，换算之后出现各种奇奇怪怪的数值，最为明显的就是更多的小数位，比如 13.755px 之类的数值，这些时候会被浏览器四舍五入而字体大小导致不精确。<br>
由于 Retina 屏幕下 DPR 各不相同，我们又想显示的字体一样大，于是就给字体再增大 DPR 的倍数，这样当缩小 DPR 倍时，那么字体也就和设计稿所示的大小一样大了，在不同的手机中显示的大小也是一致的。</p></li></ol> <p>其中 flexible 仅仅只是针对 iPhone 进行适配，而默认所有的安卓设备都强制性设置 DPR 为 1。</p> <ul><li>flexible.js 主要原理：</li></ul> <ol><li><strong>根据 dpr 值来修改根 html 元素的 font-size</strong>，模拟 vw 将页面分成十分，然后使用 rem 实现等比缩放，适配布局。</li></ol> <p>一般 1rem 通常会被设置为设备可视区域/10。</p> <p>现在设计稿上有一块区域宽 B，那它是不是等比放到设备可视区域的宽度为 B/A rem。即 B 在设计稿上占 B/A 份，那在设备可视区域上也要占 B/A 份，所以宽是 B/A rem。</p> <p>比如：设备可视区域为 375 像素，1rem = 37.5rem，一个 div 元素为宽高 75px 的正方形，那 div 的 widht/height 都应该被设置为 2rem。同理，这份代码放到 750 像素的设备里面，1rem 会被重新计算为 75，因为这个正方形 div 被设置成了 widht/height=2rem，因此也会自动被等比例放大两倍，变成了一个 150px 的正方形，以此来实现等比例缩放的效果。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// * dpr 是因为initial-scale值有可能被进行了 1/dpr 的缩放，所以需要乘上这个dpr值来保证等比例缩放，不缩放时默认为1</span>
rem <span class="token operator">=</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">*</span> dpr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li><strong>根据 dpr 值来修改 viewport</strong>，实现 1px 线（压缩 px，使 1px=1 个物理像素）</li></ol> <p>对于 dpr=2 的屏幕，1px=2 个物理像素，会让 1px 的线看起来比设计稿更粗，因此需要让 1px = 1 个物理像素。</p> <p>这个时候可以通过将缩放比 initial-scale 设置为 0.5 （1/2） 来实现。以此类推 dpr=3 的屏幕可以将 initial-scale 设置为 0.33=1/3 来实现。</p> <p>通过借助 JS 的 <code>window.devicePixelRatio</code> 去动态获取设备的 DPR，然后设置 <code>initial-scale = 1/dpr</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> metaEL<span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name=&quot;viewport&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>

<span class="token keyword">var</span> scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> dpr；

metaEl<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'width=device-width, initial-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">', maximum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">', minimum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">', user-scalable=no'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="vw-vh-原理"><a href="#vw-vh-原理" class="header-anchor">#</a> vw/vh 原理</h2> <p>基于 css3 中 Viewport 相关采用 vw、vh、vmin 和 vmax 单位。</p> <div class="language-js extra-class"><pre class="language-js"><code>vw – 视区宽度百分值
vh – 视区高度百分值
vmin – vw或vh，取小的那个
vmax – vw或vh，取大的那个

1vw <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">*</span> <span class="token number">1</span><span class="token operator">%</span><span class="token punctuation">;</span>
1vh <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">*</span> <span class="token number">1</span><span class="token operator">%</span><span class="token punctuation">;</span>
</code></pre></div><p>即 1vw 在可视视口宽度为 400px 宽时是 4px，在可视视口宽度为 1000px 时，就变成了 10px，自动会进行等比例缩放。</p> <p>使用<code>postcss-px-to-viewport</code>可实现编译时候的自动帮你转换为 vw，只需要在配置时指定设计图宽度就可以了。</p> <h2 id="_1px-方案"><a href="#_1px-方案" class="header-anchor">#</a> 1px 方案</h2> <h3 id="产生原因"><a href="#产生原因" class="header-anchor">#</a> 产生原因</h3> <p>这个 1px 是指 1 个 CSS 像素，在有些设备上（比如 dpr=3），就是用了 3 个物理像素矩阵（即：3x3=9 个 CSS 像素）来显示这 1px，导致在这些设备上，这条线看上去非常粗。</p> <p>但设计师想要的 retina 下 border: 1px;，其实就是 1 物理像素宽，对于 css 而言，应该是 1/3px 显示这条线。</p> <h3 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h3> <h4 id="flexible-动态设置initial-scale值为-1-dpr"><a href="#flexible-动态设置initial-scale值为-1-dpr" class="header-anchor">#</a> flexible 动态设置<code>initial-scale</code>值为 1/dpr</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initial-scale=1/dpr<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="伪元素-transform-scale"><a href="#伪元素-transform-scale" class="header-anchor">#</a> 伪元素 + transform scale</h4> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 1px线/单边边框 - 上边框*/</span>
<span class="token selector">.setOnePx</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 4条边 边框的圆角 */</span>
<span class="token selector">.contain::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform-origin</span><span class="token punctuation">:</span> left top<span class="token punctuation">;</span>
    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #e5e5e5<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过 less 抽离的方案：</p> <div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.border(
    <span class="token variable">@borderWidth</span>: 1px;
    <span class="token variable">@borderStyle</span>: solid;
    <span class="token variable">@borderColor</span>: <span class="token variable">@lignt-gray-color</span>;
    <span class="token variable">@borderRadius</span>: 0)</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">transform-origin</span><span class="token punctuation">:</span> left top<span class="token punctuation">;</span>
        <span class="token property">-webkit-transform-origin</span><span class="token punctuation">:</span> left top<span class="token punctuation">;</span>
        <span class="token property">box-sizing</span><span class="token punctuation">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
        <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token atrule">@media <span class="token punctuation">(</span>-webkit-min-device-pixel-ratio<span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
        <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
            <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token atrule">@media <span class="token punctuation">(</span>-webkit-min-device-pixel-ratio<span class="token punctuation">:</span> 2.5<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
        <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 250%<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 250%<span class="token punctuation">;</span>
            <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token atrule">@media <span class="token punctuation">(</span>-webkit-min-device-pixel-ratio<span class="token punctuation">:</span> 2.75<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
        <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 275%<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 275%<span class="token punctuation">;</span>
            <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1 <span class="token operator">/</span> 2.75<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token atrule">@media <span class="token punctuation">(</span>-webkit-min-device-pixel-ratio<span class="token punctuation">:</span> 3<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
        <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 300%<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 300%<span class="token punctuation">;</span>
            <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1 <span class="token operator">/</span> 3<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1 <span class="token operator">/</span> 3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    .<span class="token function">border-radius</span><span class="token punctuation">(</span><span class="token variable">@borderRadius</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token selector">&amp;:before</span> <span class="token punctuation">{</span>
        <span class="token property">border-width</span><span class="token punctuation">:</span> <span class="token variable">@borderWidth</span><span class="token punctuation">;</span>
        <span class="token property">border-style</span><span class="token punctuation">:</span> <span class="token variable">@borderStyle</span><span class="token punctuation">;</span>
        <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token variable">@borderColor</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.border-all(
	<span class="token variable">@borderWidth</span>: 1px;
	<span class="token variable">@borderStyle</span>: solid;
	<span class="token variable">@borderColor</span>: <span class="token variable">@lignt-gray-color</span>;
	<span class="token variable">@borderRadius</span>: 0)</span> <span class="token punctuation">{</span>
    <span class="token mixin-usage function">.border</span><span class="token punctuation">(</span><span class="token variable">@borderWidth</span><span class="token punctuation">;</span> <span class="token variable">@borderStyle</span><span class="token punctuation">;</span> <span class="token variable">@borderColor</span><span class="token punctuation">;</span> <span class="token variable">@borderRadius</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="box-shadow"><a href="#box-shadow" class="header-anchor">#</a> box-shadow</h4> <div class="language- extra-class"><pre class="language-text"><code>box-shadow:  x偏移量 | y偏移量 | 阴影模糊半径 | 阴影扩散半径 | 阴影颜色

0 -1px 1px -1px #e5e5e5, //上边线

0 1px 1px -1px #e5e5e5, //下边线

1px 0 1px -1px #e5e5e5, //右边线

-1px 0 1px -1px #e5e5e5; //左边线
</code></pre></div><h4 id="background-image"><a href="#background-image" class="header-anchor">#</a> background-image</h4></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/articles/Browser/数据存储和通信方式.html" class="prev">
        👉 数据存储和通信方式
      </a></span> <span class="next"><a href="/articles/Browser/输入 URL 到展示页面的过程.html">
        👉 从输入 URL 到展示页面的过程经历了些什么？
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.448d156c.js" defer></script><script src="/assets/js/2.fefa3fa1.js" defer></script><script src="/assets/js/1.67a15f5a.js" defer></script><script src="/assets/js/38.f86fa51b.js" defer></script>
  </body>
</html>
