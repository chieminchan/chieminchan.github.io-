(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{375:function(t,a,e){"use strict";e.r(a);var s=e(25),r=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"http-ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-ç¼“å­˜"}},[t._v("#")]),t._v(" ğŸ‘‰ HTTP ç¼“å­˜")]),t._v(" "),a("p",[t._v("åœ¨ HTTP ç½‘ç»œè¯·æ±‚äº¤äº’ä¸­ï¼Œç¼“å­˜æ˜¯æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ‰‹æ®µã€‚")]),t._v(" "),a("p",[t._v("æ²¡æœ‰ç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨å°±è¦å¤šæ¬¡é‡å¤è¯·æ±‚æœåŠ¡å™¨èµ„æºï¼Œè€ŒæœåŠ¡å™¨ä¹Ÿéœ€è¦å¤šæ¬¡é‡å¤è¯»å–ç£ç›˜çš„å¯¹åº”èµ„æºï¼Œè¿™æ ·å­å¤§å¤§å»¶è¿Ÿäº†æµè§ˆå™¨è·å¾—å’Œå¤„ç†å†…å®¹çš„æ—¶é—´ä»¥åŠå¢åŠ äº†è®¿é—®è€…çš„æµé‡è´¹ç”¨ï¼Œé€ æˆéå¸¸å·®çš„ç”¨æˆ·ä½“éªŒã€‚å› æ­¤æµè§ˆå™¨å’ŒæœåŠ¡ç«¯äº’ç›¸çº¦å®šå¥½"),a("code",[t._v("ç¼“å­˜æœºåˆ¶")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æµè§ˆå™¨é¦–æ¬¡åŠ è½½èµ„æºæˆåŠŸæ—¶ï¼ŒæœåŠ¡å™¨è¿”å› 200ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¸ä»…å°†èµ„æºä¸‹è½½ä¸‹æ¥ï¼Œè€Œä¸”æŠŠ response çš„ header(date å±æ€§éå¸¸é‡è¦ï¼Œç”¨æ¥è®¡ç®—ç¬¬äºŒæ¬¡ç›¸åŒèµ„æºæ—¶å½“å‰æ—¶é—´å’Œ date çš„æ—¶é—´å·®)ä¸€å¹¶ç¼“å­˜ã€‚æ¥ç€åœ¨äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œå°†ä¼šè¿›å…¥ HTTP ç¼“å­˜é˜¶æ®µã€‚")]),t._v(" "),a("p",[t._v("HTTP çš„ç¼“å­˜ä¸»è¦æœ‰ä¸¤å¤§ç±»ï¼šå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚ä¼˜å…ˆçº§è¾ƒé«˜çš„æ˜¯å¼ºç¼“å­˜ï¼Œåœ¨å‘½ä¸­å¼ºç¼“å­˜å¤±è´¥çš„æƒ…å†µä¸‹æ‰ä¼šè¿›è¡Œåå•†ç¼“å­˜ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_1-å¼ºç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¼ºç¼“å­˜"}},[t._v("#")]),t._v(" 1. å¼ºç¼“å­˜")]),t._v(" "),a("p",[t._v("å¼ºç¼“å­˜ä¸»è¦æ˜¯é€šè¿‡ "),a("code",[t._v("Expire")]),t._v("å’Œ"),a("code",[t._v("Cache-Control")]),t._v(" ä¸¤ä¸ª HTTP Header å±æ€§å…±åŒæ§åˆ¶ã€‚å½“è¯·æ±‚å†æ¬¡å‘é€æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆè¿›è¡Œå¼ºç¼“å­˜ï¼Œè‹¥å‘½ä¸­ï¼Œåˆ™ä¸éœ€è¦å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œç›´æ¥è¯»å–æµè§ˆå™¨æœ¬åœ°ç¼“å­˜ã€‚")]),t._v(" "),a("p",[t._v("å‘½ä¸­å¼ºç¼“å­˜æ—¶ï¼Œè¿”å›çš„ HTTP çŠ¶æ€ç ä¸º 200ã€‚ "),a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/whenUrl/url-CacheControl-response.png",alt:"cache-200",title:"cache-200"}})]),t._v(" "),a("h3",{attrs:{id:"_1-1-expire"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-expire"}},[t._v("#")]),t._v(" 1.1 Expire")]),t._v(" "),a("p",[t._v("Expire æ˜¯ HTTP/1.0 æ ‡å‡†çš„å­—æ®µã€‚Expire æ ‡è¯†åœ¨æŒ‡å®šçš„"),a("strong",[t._v("è¿‡æœŸæ—¶é—´ç‚¹")]),t._v("åç¼“å­˜è¿‡æœŸã€‚")]),t._v(" "),a("p",[t._v("æœåŠ¡ç«¯ä¼šåœ¨è¿”å›çš„å“åº”å¤´ä¸­é€šè¿‡ Expire å­—æ®µå‘Šè¯‰æµè§ˆå™¨åœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æ¥ä»ç¼“å­˜é‡Œé¢è·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚æœåŠ¡ç«¯ï¼Œä½†å¯èƒ½å­˜åœ¨æœåŠ¡ç«¯æ—¶é—´å’Œå®¢æˆ·ç«¯æ—¶é—´ä¸ä¸€è‡´è€Œå¯¼è‡´æœåŠ¡ç«¯çš„è¿‡æœŸæ—¶é—´ä¸å‡†ç¡®çš„æƒ…å†µã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-2-cache-control"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-cache-control"}},[t._v("#")]),t._v(" 1.2 Cache-Control")]),t._v(" "),a("p",[t._v("Cache-Control æ˜¯ HTTP/1.1 æ ‡å‡†çš„å­—æ®µã€‚Cache-Control æ ‡è¯†åœ¨æŒ‡å®šçš„"),a("strong",[t._v("è¿‡æœŸæ—¶é•¿")]),t._v("åç¼“å­˜è¿‡æœŸã€‚Cache-Control ç›¸å¯¹äº Expire æ›´åŠ ç²¾ç¡®ï¼Œä¼˜å…ˆçº§æ›´é«˜ã€‚")]),t._v(" "),a("p",[t._v("Cache-Control å¸¸è§çš„å±æ€§å€¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("å±æ€§")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("æè¿°")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("no-cache")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("å¼ºåˆ¶è¦æ±‚ç¼“å­˜æŠŠè¯·æ±‚è°ƒæ•™ç»™æœåŠ¡å™¨éªŒè¯ï¼ˆå³è¿›è¡Œåå•†ç¼“å­˜ï¼‰")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("no-store")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ä¸é€‚ç”¨ä»»ä½•ç¼“å­˜")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("public")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("å“åº”å¯ä»¥è¢«ä¸­é—´ä»£ç†ã€CDN ç­‰ç¼“å­˜")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("private")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("åªæœ‰æµè§ˆå™¨å¯ç¼“å­˜ï¼Œä»£ç†æœåŠ¡å™¨ä¸å¯ç¼“å­˜")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("max-age="),a("code",[t._v("<seconds>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ç¼“å­˜å­˜å‚¨çš„æœ€å¤§å‘¨æœŸæ—¶é—´")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("s-maxage="),a("code",[t._v("<seconds>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ä»£ç†æœåŠ¡å™¨ç¼“å­˜å‘¨æœŸæ—¶é—´ï¼Œä¼˜å…ˆçº§æ¯” max-age æ›´é«˜")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("must-revalidate")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("ç¼“å­˜ä¸€æ—¦è¿‡æœŸå°±è¦æ±‚é‡æ–°å‘åŸå§‹æœåŠ¡å™¨éªŒè¯ï¼Œä¸èƒ½ç»§ç»­ä½¿ç”¨æ—§èµ„æºå“åº”è¯·æ±‚")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("proxy-revalidate")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("è¡¨ç¤ºä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜è¿‡æœŸååˆ°æºæœåŠ¡å™¨è·å–ã€‚")])])])]),t._v(" "),a("p",[t._v("æµè§ˆå™¨ä¼šå…ˆæ¯”è¾ƒå½“å‰æ—¶é—´å’Œä¸Šä¸€æ¬¡è¿”å› 200 çš„ date çš„æ—¶é—´å·®ï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡ max-ageï¼Œå‘½ä¸­å¼ºç¼“å­˜ï¼Œä¸å‘è¯·æ±‚ç›´æ¥ä»æœ¬åœ°ç¼“å­˜è¯»å–è¯¥æ–‡ä»¶ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰ cache-controlï¼Œä¼šå– expires çš„å€¼ï¼Œæ¥å¯¹æ¯”æ˜¯å¦è¿‡æœŸï¼‰")]),t._v(" "),a("p",[t._v("å¦å¤–ï¼Œå…³äº max-age å’Œ s-maxage çš„ä¸€ä¸ªä¾‹å­ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Cache"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("maxage"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n")])])]),a("p",[t._v("ç›¸å½“äºæºæœåŠ¡å™¨è¯´: æˆ‘è¿™ä¸ªå“åº”æ˜¯å…è®¸ä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„ï¼Œå®¢æˆ·ç«¯ç¼“å­˜è¿‡æœŸäº†åˆ°ä»£ç†ä¸­æ‹¿ï¼Œå¹¶ä¸”åœ¨å®¢æˆ·ç«¯çš„ç¼“å­˜æ—¶é—´ä¸º 1000 ç§’ï¼Œåœ¨ä»£ç†æœåŠ¡å™¨ä¸­çš„ç¼“å­˜æ—¶é—´ä¸º 2000 sã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-3-pragma"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-pragma"}},[t._v("#")]),t._v(" 1.3 Pragma")]),t._v(" "),a("p",[t._v("é™¤äº†ä»¥ä¸Šä¸¤ä¸ªå­—æ®µï¼Œè¿˜æœ‰ä¸€ä¸ªå±æ€§ "),a("code",[t._v("Pragma")]),t._v("ä¹Ÿå±äºå¼ºç¼“å­˜ï¼Œæ˜¯åœ¨ HTTP/1.0 ä¸­è§„å®šçš„é€šç”¨é¦–éƒ¨ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå±æ€§å€¼ "),a("code",[t._v("no-cache")]),t._v("ï¼Œæ•ˆæœå’Œ "),a("code",[t._v("Cache-Control: no-cache")]),t._v(" ä¸€è‡´ã€‚"),a("br"),t._v("\nå½“ Pragma å’Œ Cache-Control åŒæ—¶å­˜åœ¨æ—¶ï¼ŒPragma ä¼˜å…ˆã€‚")]),t._v(" "),a("p",[t._v("ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ Pragma -> Cache-Control -> Expires ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_2-åå•†ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-åå•†ç¼“å­˜"}},[t._v("#")]),t._v(" 2. åå•†ç¼“å­˜")]),t._v(" "),a("p",[t._v("å½“å¼ºç¼“å­˜å¤±æ•ˆåæˆ–è¯·æ±‚å¤´ä¸­è®¾ç½®äº†ä¸èµ°å¼ºç¼“å­˜ï¼Œä¼šè¿›è¡Œåå•†ç¼“å­˜ã€‚åœ¨åå•†ç¼“å­˜çš„æœºåˆ¶ä¸‹ï¼Œæµè§ˆå™¨éœ€è¦å…ˆåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ç›¸åº”çš„"),a("code",[t._v("ç¼“å­˜ tag")]),t._v("å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨éªŒè¯ç¼“å­˜ç›¸å…³ä¿¡æ¯ï¼Œè¿›è€Œåˆ¤æ–­æ˜¯é‡æ–°å‘é€è¯·æ±‚è¿˜æ˜¯é‡‡ç”¨ç¼“å­˜èµ„æºã€‚å¦‚æœæœåŠ¡ç«¯æç¤ºç¼“å­˜èµ„æºæœªæ”¹åŠ¨ï¼ˆNot Modifiedï¼‰ï¼Œèµ„æºä¼šè¢«é‡å®šå‘åˆ°æµè§ˆå™¨ç¼“å­˜ï¼Œè¿™ç§æƒ…å†µä¸‹ç½‘ç»œè¯·æ±‚å¯¹åº”çš„çŠ¶æ€ç æ˜¯ "),a("code",[t._v("304")]),t._v("ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/whenUrl/url-NotModified-response.png",alt:"cache-304",title:"cache-304"}})]),t._v(" "),a("p",[t._v("åå•†ç¼“å­˜ä¸»è¦ç”±"),a("code",[t._v("ETag / If-None-Match")]),t._v("ã€"),a("code",[t._v("Last-Modified / If-Modified-Since")]),t._v("å…±åŒæ§åˆ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-1-last-modified-if-modified-since"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-last-modified-if-modified-since"}},[t._v("#")]),t._v(" 2.1 Last-Modified / If-Modified-Since")]),t._v(" "),a("p",[a("code",[t._v("Last-Modified")]),t._v("æ ‡è¯†èµ„æºæœ€åä¸€æ¬¡çš„ä¿®æ”¹æ—¶é—´ã€‚ä¸€èˆ¬ä¼šé€‰æ–‡ä»¶çš„ mtimeï¼Œè¡¨ç¤ºæ–‡ä»¶å†…å®¹çš„ä¿®æ”¹æ—¶é—´ã€‚")]),t._v(" "),a("p",[t._v("åœ¨é¦–æ¬¡è¯·æ±‚æœåŠ¡ç«¯åï¼ŒæœåŠ¡ç«¯å¯åœ¨ HTTP å“åº”å¤´ä¸­åŠ å…¥"),a("code",[t._v("Last-Modified")]),t._v("è¿™ä¸ªæ ‡è¯†ã€‚åç»­çš„é‡å¤è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´éƒ¨ä¸­åŠ å…¥ "),a("code",[t._v("If-Modified-Since")]),t._v("ï¼Œå€¼ä¸ºæœåŠ¡å™¨ä¼ æ¥çš„"),a("code",[t._v("Last-Modified")]),t._v("å¯¹åº”çš„æœ€åä¿®æ”¹æ—¶é—´å€¼ã€‚")]),t._v(" "),a("p",[t._v("æœåŠ¡ç«¯ä¼šå°†è¯·æ±‚å¤´ä¸­çš„"),a("code",[t._v("If-Modified-Since")]),t._v("å±æ€§å€¼å’ŒæœåŠ¡å™¨å¯¹åº”è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼š"),a("br"),t._v("\nï¼ˆ1ï¼‰è‹¥"),a("code",[t._v("If-Modified-Since")]),t._v("æ—¶é—´å€¼æ¯”èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´è¦å°ï¼Œåˆ™è¯´æ˜èµ„æºæ›´æ–°äº†ï¼Œå¯ä»¥è¿”å›æ–°èµ„æºï¼Œåˆ™èµ°å¸¸è§„çš„ HTTP å“åº”æµç¨‹ã€‚"),a("br"),t._v("\nï¼ˆ2ï¼‰å¦åˆ™ï¼Œè¯´æ˜èµ„æºè¿˜æ²¡æ›´æ–°äº†ï¼Œè¿”å›"),a("code",[t._v("304")]),t._v("æç¤ºæµè§ˆå™¨æ— éœ€é‡ä¿®åŠ è½½èµ„æºï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚")]),t._v(" "),a("p",[t._v("Last-Modified å­˜åœ¨ä¸€äº›å¼Šç«¯ï¼š"),a("br"),t._v("\nï¼ˆ1ï¼‰å½“ä»…ç¼–è¾‘äº†æ–‡ä»¶ï¼ˆæ–‡ä»¶åï¼‰ï¼Œä½†æ–‡ä»¶å†…å®¹å¹¶æ²¡ä½œä»»ä½•ä¿®æ”¹ã€‚æ­¤æ—¶æœåŠ¡ç«¯çš„æœ€åä¿®æ”¹æ—¶é—´è¢«æ›´æ–°ï¼Œæµè§ˆå™¨ç«¯å†æ¬¡è¯·æ±‚æ—¶ï¼Œå°†ä¼šå½“ä½œæ–°è¯·æ±‚è¿›è¡Œé‡æ–°å“åº”ã€‚ï¼ˆä¸è¯¥é‡æ–°è¯·æ±‚æ—¶é‡æ–°è¯·æ±‚ï¼‰"),a("br"),t._v("\nï¼ˆ2ï¼‰If-Modified-Since åªèƒ½æ£€æŸ¥åˆ°ä»¥ç§’ä¸ºæœ€å°è®¡é‡å•ä½çš„æ—¶é—´å·®ï¼Œå¦‚æœèµ„æºå†…å®¹ä¿®æ”¹é€Ÿåº¦è¿‡å¿«ï¼ˆ100ms å®Œæˆäº†æ”¹åŠ¨ï¼‰ï¼Œæ­¤æ—¶å°†ä¸èƒ½æ„ŸçŸ¥åˆ°å˜åŠ¨ï¼Œè¿™æ ·å­ä¼šå¯¼è‡´è¯¥é‡æ–°è¯·æ±‚æ—¶ä»ç„¶ä½¿ç”¨äº†æ—§çš„ç¼“å­˜èµ„æºã€‚ï¼ˆè¯¥é‡æ–°è¯·æ±‚æ—¶æœªèƒ½é‡æ–°è¯·æ±‚ï¼‰")]),t._v(" "),a("h3",{attrs:{id:"_2-2-etag-if-none-match"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-etag-if-none-match"}},[t._v("#")]),t._v(" 2.2 ETag / If-None-Match")]),t._v(" "),a("p",[a("code",[t._v("ETag")]),t._v("æ˜¯ç”±æœåŠ¡å™¨ä¸ºæ¯ä¸ªèµ„æºç”Ÿæˆçš„å”¯ä¸€çš„ Hash æ ‡è¯†å­—ç¬¦ä¸²ï¼Œå½“æœåŠ¡å™¨çš„èµ„æºå†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¹åº”çš„ Hash å­—ç¬¦ä¸²ä¹Ÿä¼šå‘é€å˜åŒ–ã€‚")]),t._v(" "),a("p",[t._v("å’Œ Last-Modified ç±»ä¼¼ï¼Œåœ¨é¦–æ¬¡è¯·æ±‚æœåŠ¡ç«¯åï¼Œæµè§ˆå™¨åœ¨å“åº”å¤´éƒ¨è·å–åˆ°èµ„æºçš„æœ€åˆæ ‡è¯†å­—ç¬¦ä¸²"),a("code",[t._v("ETag")]),t._v("å€¼åã€‚åç»­çš„é‡å¤è¯·æ±‚ï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´éƒ¨ä¸­åŠ å…¥"),a("code",[t._v("If-None-Match")]),t._v("ï¼Œå€¼ä¸ºæœåŠ¡å™¨ä¼ æ¥çš„ "),a("code",[t._v("ETag")]),t._v(" å€¼ã€‚")]),t._v(" "),a("p",[t._v("æœåŠ¡ç«¯å°†è¯·æ±‚å¤´ä¸­çš„"),a("code",[t._v("If-None-Match")]),t._v("å’Œè¯¥èµ„æºçš„æ ‡è¯†å­—ç¬¦ä¸²è¿›è¡Œå¯¹æ¯”ï¼š"),a("br"),t._v("\nï¼ˆ1ï¼‰è‹¥å€¼ä¸ä¸€æ ·ï¼Œåˆ™è¯´æ˜èµ„æºå†…å®¹æ›´æ–°äº†ï¼Œå¯ä»¥è¿”å›æ–°èµ„æºï¼Œåˆ™èµ°å¸¸è§„çš„ HTTP å“åº”æµç¨‹ã€‚"),a("br"),t._v("\nï¼ˆ2ï¼‰å¦åˆ™ï¼Œè¯´æ˜èµ„æºè¿˜æ²¡æ›´æ–°äº†ï¼Œè¿”å›"),a("code",[t._v("304")]),t._v("æç¤ºæµè§ˆå™¨æ— éœ€é‡ä¿®åŠ è½½èµ„æºï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚")]),t._v(" "),a("p",[t._v('è¿™é‡Œçš„ ETag åˆæœ‰å¼ºå¼±æ ¡éªŒä¹‹åˆ†ï¼Œå¦‚æœ Hash ç æ˜¯ä»¥ "W/" å¼€å¤´çš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ­¤æ—¶åå•†ç¼“å­˜çš„æ ¡éªŒæ˜¯å¼±æ ¡éªŒçš„ã€‚'),a("br"),t._v("\nåªæœ‰æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å·®å¼‚ï¼ˆæ ¹æ® ETag è®¡ç®—æ–¹å¼æ¥å†³å®šï¼‰è¾¾åˆ°èƒ½å¤Ÿè§¦å‘ Hash å€¼åç¼€å˜åŒ–çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£åœ°è¯·æ±‚èµ„æºï¼Œå¦åˆ™è¿”å›"),a("code",[t._v("304")]),t._v(" å¹¶åŠ è½½æµè§ˆå™¨ç¼“å­˜ã€‚")]),t._v(" "),a("p",[t._v("ETag ä¹Ÿå­˜åœ¨ä¸€äº›å¼Šç«¯ï¼š"),a("br"),t._v("\nETag çš„ Hash æ ‡è¯†å­—ç¬¦å€¼çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œéœ€è¦æœåŠ¡å™¨é¢å¤–ä»˜å‡ºå¼€é”€ï¼Œä¼šå¯¹æœåŠ¡ç«¯æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚")]),t._v(" "),a("p",[t._v("Etag éœ€è¦ hash å¼€é”€ï¼Œé€‚åˆé‡è¦é‡å°çš„èµ„æºï¼›Last-Modified é€‚åˆä¸é‡è¦çš„é‡å¤§çš„èµ„æºï¼Œéœ€è¦ä¿è¯æœåŠ¡å™¨æ—¶é—´å‡†ç¡®ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ETag åœ¨æ„ŸçŸ¥æ–‡ä»¶å†…å®¹å˜åŒ–çš„å‡†ç¡®åº¦ä¼šæ¯” Last-Modified çš„é«˜ï¼Œå› æ­¤ä¼˜å…ˆçº§ä¹Ÿæ›´é«˜ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"etag-ç”Ÿæˆæ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etag-ç”Ÿæˆæ–¹å¼"}},[t._v("#")]),t._v(" ETag ç”Ÿæˆæ–¹å¼")]),t._v(" "),a("p",[t._v("ETag æœ‰å¼ºå¼±æ ¡éªŒä¹‹åˆ†ï¼Œä½† http å¹¶æ²¡æœ‰ç‰¹å®šå­—æ®µå»æŒ‡å®šå®ƒçš„ç”Ÿæˆæ–¹å¼ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ETag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("W")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<etag_value>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ETag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<etag_value>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[a("code",[t._v("W/")]),t._v("(å¤§å°å†™æ•æ„Ÿ) è¡¨ç¤ºä½¿ç”¨å¼±éªŒè¯å™¨ï¼Œå¯é€‰ã€‚å¼±éªŒè¯å™¨å¾ˆå®¹æ˜“ç”Ÿæˆï¼Œä½†ä¸åˆ©äºæ¯”è¾ƒã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("å¼ºéªŒè¯å™¨æ˜¯æ¯”è¾ƒçš„ç†æƒ³é€‰æ‹©ï¼Œä½†å¾ˆéš¾æœ‰æ•ˆåœ°ç”Ÿæˆã€‚ç›¸åŒèµ„æºçš„ä¸¤ä¸ªå¼± Etag å€¼å¯èƒ½è¯­ä¹‰ç­‰åŒï¼Œä½†ä¸æ˜¯æ¯ä¸ªå­—èŠ‚éƒ½ç›¸åŒã€‚")])]),t._v(" "),a("p",[t._v("åœ¨ nginx ä¸­ï¼Œ ETag ç”±å“åº”å¤´çš„ "),a("code",[t._v("Last-Modified")]),t._v(" ä¸ "),a("code",[t._v("Content-Length")]),t._v(" è¡¨ç¤ºä¸ºåå…­è¿›åˆ¶ç»„åˆè€Œæˆï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Server")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.16")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("612")]),t._v("\nLast"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Modified"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Tue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Connection")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" keep"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("alive\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ETag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5cbee66d-264"')]),t._v("\nAccept"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Ranges"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bytes\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¹Etagè§£æ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5cbee66d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// ("2019-04-23T10:18:21.000Z");ï¼Œå³å¯¹Last-Modifiedè¿›è¡Œ16è¿›åˆ¶æ¢ç®—')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"264"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 612ï¼Œå³å¯¹Content-Lengthè¿›è¡Œ16è¿›åˆ¶æ¢ç®—")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-3-ç¼“å­˜çš„å­˜å‚¨ä½ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-ç¼“å­˜çš„å­˜å‚¨ä½ç½®"}},[t._v("#")]),t._v(" 2.3 ç¼“å­˜çš„å­˜å‚¨ä½ç½®")]),t._v(" "),a("p",[t._v("æµè¿”å› 304 åçš„ç¼“å­˜èµ„æºå»å“ªé‡Œè·å–ï¼Œæµè§ˆè§ˆå™¨ä¸­çš„ç¼“å­˜å­˜å‚¨ä½ç½®ä¸€å…±æœ‰å››ç§ï¼ŒæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ’åˆ—ï¼ˆç”±ä¸Šåˆ°ä¸‹å¯»æ‰¾ï¼Œæ‰¾åˆ°å³è¿”å›ï¼›æ‰¾ä¸åˆ°åˆ™ç»§ç»­ï¼‰åˆ†åˆ«æ˜¯ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Memory Cache")])]),t._v(" "),a("p",[t._v("Memory Cacheï¼Œæ˜¯æŒ‡å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œå®ƒæ˜¯å“åº”é€Ÿåº¦æœ€å¿«çš„ä¸€ç§ç¼“å­˜ï¼Œä½†ç¼“å­˜æŒç»­æ€§å¾ˆçŸ­ã€‚")]),t._v(" "),a("p",[t._v("å‡ ä¹æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚èµ„æºéƒ½æœ‰å¯èƒ½è¢«æµè§ˆå™¨è‡ªåŠ¨åŠ å…¥åˆ° Memory Cache ä¸­ï¼Œä½†æ˜¯ä¹Ÿæ­£å› ä¸ºç¼“å­˜æ–‡ä»¶æ•°é‡å¤§å’Œæµè§ˆå™¨çš„å ç”¨å†…å­˜é™åˆ¶,Memory Cache åªèƒ½è¿›è¡Œ â€œçŸ­æœŸå­˜å‚¨â€ã€‚")]),t._v(" "),a("p",[t._v("å¸¸è§„æƒ…å†µä¸‹ï¼Œ"),a("strong",[t._v("æµè§ˆå™¨çš„ Tab å…³é—­åè¯¥æ¬¡æµè§ˆçš„ Memory Cache ä¾¿å‘Šå¤±æ•ˆ")]),t._v(" (ä¸ºäº†ç»™å…¶ä»– Tab è…¾å‡ºä½ç½®)ã€‚å¦‚æœæç«¯æƒ…å†µä¸‹ (ä¾‹å¦‚ä¸€ä¸ªé¡µé¢çš„ç¼“å­˜å°±å ç”¨äº†è¶…çº§å¤šçš„å†…å­˜)ï¼Œé‚£å¯èƒ½åœ¨ Tab æ²¡å…³é—­ä¹‹å‰ï¼Œæ’åœ¨å‰é¢çš„ç¼“å­˜å°±å·²ç»å¤±æ•ˆäº†ã€‚")]),t._v(" "),a("p",[t._v("èµ„æºå­˜ä¸å­˜å†…å­˜ï¼Œæµè§ˆå™¨ä¸»è¦ç§‰æ‰¿â€œèŠ‚çº¦åŸåˆ™â€ã€‚ä¸€èˆ¬ä»¥ä¸‹ç±»å‹ä¼šè¢«ä¸¢è¿›å†…å­˜ç¼“å­˜ï¼š"),a("br"),t._v("\nï¼ˆ1ï¼‰Base64 æ ¼å¼çš„å›¾ç‰‡ï¼Œå‡ ä¹éƒ½ä¼šå¯ä»¥è¢«å¡è¿› Memory Cacheï¼Œè¿™å¯ä»¥è§†ä½œæµè§ˆå™¨ä¸ºèŠ‚çœæ¸²æŸ“å¼€é”€çš„â€œè‡ªä¿è¡Œä¸ºâ€ï¼›"),a("br"),t._v("\nï¼ˆ2ï¼‰ä½“ç§¯ä¸å¤§çš„ JSã€CSS æ–‡ä»¶ï¼Œä¹Ÿæœ‰è¾ƒå¤§åœ°è¢«å†™å…¥å†…å­˜çš„å‡ ç‡ï¼Œè€Œè¾ƒå¤§çš„ JSã€CSS æ–‡ä»¶å› å†…å­˜èµ„æºæ˜¯æœ‰é™çš„ï¼Œå®ƒä»¬ä¸€èˆ¬ä¼šè¢«ç›´æ¥ç”©è¿›ç£ç›˜ç¼“å­˜ï¼›"),a("br"),t._v("\nï¼ˆ3ï¼‰é’ˆå¯¹é¢„åŠ è½½"),a("code",[t._v("preload")]),t._v("å’Œé¢„è¯»å–"),a("code",[t._v("prefetch")]),t._v("çš„èµ„æºï¼Œä¹Ÿä¼šè¿›å…¥åˆ° Memery Cacheã€‚")]),t._v(" "),a("p",[t._v("å¾ˆå¤šæ—¶å€™éœ€è¦å…ˆè€ƒè™‘å³æ—¶å‘ˆç°çš„å†…å­˜ä½™é‡ï¼Œå†æ ¹æ®å…·ä½“çš„æƒ…å†µå†³å®šåˆ†é…ç»™å†…å­˜å’Œç£ç›˜çš„èµ„æºé‡çš„æ¯”é‡ï¼Œå› æ­¤èµ„æºå­˜æ”¾çš„ä½ç½®å…·æœ‰ä¸€å®šçš„éšæœºæ€§ã€‚")]),t._v(" "),a("p",[t._v("å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒMemory Cache ä¼šå¿½è§†èµ„æºçš„ HTTP ç¼“å­˜å¤´ Cache-Control æ˜¯ä»€ä¹ˆå€¼ï¼ˆé™¤äº†"),a("code",[t._v("no-store")]),t._v("ï¼Œ"),a("code",[t._v("max-age=0")]),t._v("ï¼Œ"),a("code",[t._v("no-cache")]),t._v("ä¹Ÿä¼šç…§å¸¸è¯»å–ï¼‰ï¼ŒåŒæ—¶èµ„æºçš„åŒ¹é…ä¹Ÿå¹¶éä»…ä»…æ˜¯å¯¹ URL åšåŒ¹é…ï¼Œè¿˜å¯èƒ½ä¼šå¯¹"),a("code",[t._v("Content-Type")]),t._v("ï¼ŒCORS ç­‰å…¶ä»–ç‰¹å¾åšæ ¡éªŒã€‚")]),t._v(" "),a("p",[t._v("memory cache æœºåˆ¶ä¿è¯äº†ä¸€ä¸ªé¡µé¢ä¸­å¦‚æœæœ‰ä¸¤ä¸ªç›¸åŒçš„è¯·æ±‚ (ä¾‹å¦‚ä¸¤ä¸ª src ç›¸åŒçš„ "),a("img"),t._v("ï¼Œä¸¤ä¸ª href ç›¸åŒçš„ "),a("link"),t._v(")éƒ½å®é™…åªä¼šè¢«è¯·æ±‚æœ€å¤šä¸€æ¬¡ï¼Œé¿å…æµªè´¹ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Disk Cache")])]),t._v(" "),a("p",[t._v("Disk Cache ä¹Ÿå« HTTP Cacheï¼Œæ˜¯æŒ‡å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„ç¼“å­˜ï¼Œå› æ­¤å®ƒæ˜¯æŒä¹…å­˜å‚¨çš„ã€‚å®ƒä»å­˜å–æ•ˆç‡ä¸Šæ¯”å†…å­˜ç¼“å­˜è¦æ…¢ä¸€ç‚¹ï¼Œä¼˜åŠ¿åœ¨äºå­˜å‚¨å®¹é‡å’Œå­˜å‚¨æ—¶é•¿ã€‚å®ƒå…è®¸ç›¸åŒçš„èµ„æºåœ¨è·¨ä¼šè¯ï¼Œç”šè‡³è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¾‹å¦‚ä¸¤ä¸ªç«™ç‚¹éƒ½ä½¿ç”¨äº†åŒä¸€å¼ å›¾ç‰‡ã€‚")]),t._v(" "),a("p",[t._v("Disk Cache ä¼šä¸¥æ ¼æ ¹æ® HTTP Herder ä¸­çš„å­—æ®µåˆ¤æ–­å“ªäº›èµ„æºéœ€è¦ç¼“å­˜ï¼Œå“ªäº›èµ„æºå¯ä»¥ä¸è¯·æ±‚ç›´æ¥ä½¿ç”¨ï¼Œå“ªäº›èµ„æºå·²ç»è¿‡æœŸéœ€è¦é‡æ–°è¯·æ±‚ã€‚å³ä½¿åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œç›¸åŒåœ°å€çš„èµ„æºä¸€æ—¦è¢«ç¡¬ç›˜ç¼“å­˜ä¸‹æ¥ï¼Œå°±ä¸ä¼šå†æ¬¡å»è¯·æ±‚æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("ä¸€èˆ¬æ¯”è¾ƒå¤§çš„ JSã€CSS æ–‡ä»¶ä¼šç›´æ¥è¢«ä¸¢è¿›ç£ç›˜ï¼Œä»¥åŠå†…å­˜ä½¿ç”¨ç‡æ¯”è¾ƒé«˜çš„æ—¶å€™ï¼Œæ–‡ä»¶ä¹Ÿä¼šä¼˜å…ˆè¿›å…¥ç£ç›˜ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Service Worker Cache")])]),t._v(" "),a("p",[t._v("Service Worker æ˜¯ä¸€ç§ç‹¬ç«‹äºä¸»çº¿ç¨‹ä¹‹å¤–çš„ Javascript çº¿ç¨‹ã€‚å®ƒè„±ç¦»äºæµè§ˆå™¨çª—ä½“ï¼Œå› æ­¤æ— æ³•ç›´æ¥è®¿é—® DOMã€‚åˆæ­£å› ä¸ºå®ƒçš„â€œä¸ªäººè¡Œä¸ºâ€ä¸ä¼šå¹²æ‰°ä¸»çº¿ç¨‹çš„ç‰¹ç‚¹ï¼Œä½¿å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬å®Œæˆå¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æ¨é€å’Œç½‘ç»œä»£ç†ç­‰åŠŸèƒ½ã€‚å…¶ä¸­çš„ç¦»çº¿ç¼“å­˜å°±æ˜¯ Service Worker Cacheã€‚")]),t._v(" "),a("p",[t._v("Service Worker çš„ç¼“å­˜æœºåˆ¶å’Œæµè§ˆå†…ç½®ç¼“å­˜æœºåˆ¶ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±æ§åˆ¶ç¼“å­˜å“ªäº›æ–‡ä»¶ã€å¦‚ä½•åŒ¹é…ç¼“å­˜ã€å¦‚ä½•è¯»å–ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜æ˜¯æŒç»­æ€§çš„ã€‚")]),t._v(" "),a("p",[t._v("Service Worker å®ç° Service Worker Cache çš„æ­¥éª¤åœ¨è¿™é‡Œä¸è¿›è¡Œè¯¦ç»†å±•å¼€ï¼Œä¸»è¦çš„æ­¥éª¤å¤§æ¦‚åŒ…æ‹¬ï¼šé¦–å…ˆéœ€è¦å…ˆæ³¨å†Œ Service Workerï¼ˆ"),a("code",[t._v("navigator.serviceWorker.register")]),t._v("ï¼‰ï¼Œç„¶åé€šè¿‡ç›‘å¬ "),a("code",[t._v("install")]),t._v(" äº‹ä»¶ç¼“å­˜éœ€è¦çš„èµ„æºï¼Œä½¿å¾—ç”¨æˆ·å†æ¬¡è®¿é—®çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡æ‹¦æˆªè¯·æ±‚çš„æ–¹å¼æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œé€šè¿‡åŒ¹é…ç¼“å­˜å†³å®šæ˜¯ç›´æ¥è¯»å–ç¼“å­˜æ–‡ä»¶è¿˜æ˜¯å»é‡æ–°è¯·æ±‚æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªç¼“å­˜æ˜¯æ°¸ä¹…æ€§çš„ï¼Œé™¤äº†ä»¥åä¸¤ç§æƒ…å†µä¼šè¢«æ¸…ç©ºï¼šæ‰‹åŠ¨è°ƒç”¨ API cache.delete(resource) æˆ–è€…å®¹é‡è¶…è¿‡é™åˆ¶ï¼Œè¢«æµè§ˆå™¨å…¨éƒ¨æ¸…ç©ºã€‚")]),t._v(" "),a("p",[t._v("âš ï¸Server Worker å¯¹åè®®æ˜¯æœ‰è¦æ±‚çš„ï¼Œå¿…é¡»ä»¥ HTTPS åè®®ä¸ºå‰æã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Push Cache")])]),t._v(" "),a("p",[t._v("Push Cache æ˜¯æŒ‡ HTTP2 åœ¨ server push é˜¶æ®µå­˜åœ¨çš„æ¨é€ç¼“å­˜ã€‚ä½†ç›®å‰åº”ç”¨æ²¡æœ‰å¾ˆå¹¿æ³›ï¼Œä»¥ä¸‹æ˜¯å…³äºå®ƒçš„ç®€å•ä»‹ç»ï¼š")]),t._v(" "),a("p",[t._v("ï¼ˆ1ï¼‰Push Cache æ˜¯ç¼“å­˜çš„æœ€åä¸€é“é˜²çº¿ã€‚æµè§ˆå™¨åªæœ‰åœ¨ Memory Cacheã€Disk Cache å’Œ Service Worker Cache å‡æœªå‘½ä¸­çš„æƒ…å†µä¸‹æ‰ä¼šå»è¯¢é—® Push Cacheã€‚"),a("br"),t._v("\nï¼ˆ2ï¼‰å¤šä¸ªé¡µé¢åªè¦å…±äº«äº†åŒä¸€ä¸ª HTTP2 è¿æ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥å…±äº«åŒä¸€ä¸ª Push Cacheã€‚"),a("br"),t._v("\nï¼ˆ3ï¼‰æ‰€æœ‰çš„èµ„æºéƒ½èƒ½è¢«æ¨é€ï¼ˆåŒ…æ‹¬ no-cache å’Œ no-store çš„èµ„æºï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç¼“å­˜ã€‚"),a("br"),t._v("\nï¼ˆ4ï¼‰Push Cache æ˜¯ä¸€ç§å­˜åœ¨äºä¼šè¯é˜¶æ®µçš„ç¼“å­˜ï¼Œå½“ session ç»ˆæ­¢æ—¶ï¼Œç¼“å­˜ä¹Ÿéšä¹‹é‡Šæ”¾ã€‚")])])]),t._v(" "),a("blockquote",[a("p",[t._v("ä»¥ä¸Šç»“åˆæ¥è¯´ï¼š"),a("br"),t._v("\næ ¹æ® Service Worker ä¸­çš„ handler å†³å®šæ˜¯å¦å­˜å…¥ Cache Storage (é¢å¤–çš„ç¼“å­˜ä½ç½®)ã€‚"),a("br"),t._v("\næ ¹æ® HTTP å¤´éƒ¨çš„ç›¸å…³å­—æ®µ(Cache-control, Pragma ç­‰)å†³å®šæ˜¯å¦å­˜å…¥ disk cache"),a("br"),t._v("\nmemory cache ä¿å­˜ä¸€ä»½èµ„æº çš„å¼•ç”¨ï¼Œä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨ã€‚")])]),t._v(" "),a("p",[t._v("æ¶‰åŠé—®é¢˜ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("preload å’Œ prefetch çš„åŒºåˆ«å’Œä¼˜å…ˆçº§ï¼ˆè§ˆå™¨çš„åŠ è½½ä¼˜å…ˆçº§ï¼‰ï¼Ÿ")]),t._v(" "),a("p",[t._v("preload åŠ è½½èµ„æºä¸€èˆ¬æ˜¯å½“å‰é¡µé¢éœ€è¦çš„ï¼Œå‘Šè¯‰æµè§ˆå™¨é¢„å…ˆè¯·æ±‚å½“å‰é¡µé¢éœ€è¦çš„èµ„æºï¼ˆå…³é”®çš„è„šæœ¬ï¼Œå­—ä½“ï¼Œä¸»è¦å›¾ç‰‡ç­‰ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("prefetch ä¸€èˆ¬æ˜¯å…¶å®ƒé¡µé¢æœ‰å¯èƒ½ç”¨åˆ°çš„èµ„æºã€‚")]),t._v(" "),a("p",[t._v("https://www.jianshu.com/p/fa85d25b1c4e")])])]),t._v(" "),a("h2",{attrs:{id:"_3-http-ç¼“å­˜å†³ç­–è¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-http-ç¼“å­˜å†³ç­–è¿‡ç¨‹"}},[t._v("#")]),t._v(" 3. HTTP ç¼“å­˜å†³ç­–è¿‡ç¨‹")]),t._v(" "),a("p",[t._v("æ¥è‡ª Chrome å®˜æ–¹çš„æµç¨‹å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/whenUrl/url-cache-progress.png",alt:"cache-progess",title:"cache-progess"}})]),t._v(" "),a("p",[t._v("è§£æï¼ˆä»åç«¯è¿›è¡Œå†³ç­–çš„è§’åº¦ç†è§£ï¼‰ï¼š"),a("br"),t._v("\nï¼ˆ1ï¼‰é¦–å…ˆåˆ¤æ–­æ˜¯å¦éœ€è¦æ¯æ¬¡éƒ½é‡æ–°å‘æœåŠ¡å™¨é‡æ–°èµ„æºï¼›æ˜¯åˆ™å°† Cache-Control è®¾ç½®ä¸º "),a("code",[t._v("no-store")]),t._v("ï¼Œè¡¨æ˜æ‹’ç»ä¸€åˆ‡å½¢å¼çš„ç¼“å­˜ï¼›å¦åˆ™å°†è€ƒè™‘æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨è¿›è¡Œç¼“å­˜æœ‰æ•ˆç¡®è®¤ï¼ˆåå•†ç¼“å­˜ï¼‰ï¼›"),a("br"),t._v("\nï¼ˆ2ï¼‰å¦‚æœéœ€è¦æ¯æ¬¡éƒ½è¿›è¡Œåå•†ç¼“å­˜ï¼Œåˆ™éœ€è¦æŠŠ Cache-Control è®¾ç½®ä¸º "),a("code",[t._v("no-cache")]),t._v("ï¼›å¦åˆ™è€ƒè™‘è¯¥èµ„æºæ˜¯å¦å¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼Œå°†å†³å®šçš„ç»“æœè®¾ç½®ä¸º private è¿˜æ˜¯ publicï¼›"),a("br"),t._v("\nï¼ˆ3ï¼‰ç„¶åè€ƒè™‘è¯¥èµ„æºçš„è¿‡æœŸæ—¶é—´ï¼Œè®¾ç½®å¯¹åº”çš„ max-age å’Œ s-maxage å€¼ï¼›"),a("br"),t._v("\nï¼ˆ4ï¼‰æœ€åï¼Œé…ç½®åå•†ç¼“å­˜éœ€è¦ç”¨åˆ°çš„ Etagã€Last-Modified ç­‰å‚æ•°ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_4-http-ç¼“å­˜è·å–è¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-http-ç¼“å­˜è·å–è¿‡ç¨‹"}},[t._v("#")]),t._v(" 4. HTTP ç¼“å­˜è·å–è¿‡ç¨‹")]),t._v(" "),a("p",[t._v("è§£æï¼ˆä»å‰ç«¯è·å–ç¼“å­˜çš„è§’åº¦ç†è§£ï¼‰ï¼š")]),t._v(" "),a("h4",{attrs:{id:"_4-1-æºæœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-æºæœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶"}},[t._v("#")]),t._v(" 4.1 æºæœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶")]),t._v(" "),a("h5",{attrs:{id:"publicã€private"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publicã€private"}},[t._v("#")]),t._v(" publicã€private")]),t._v(" "),a("h5",{attrs:{id:"proxy-rerevalidate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proxy-rerevalidate"}},[t._v("#")]),t._v(" proxy-rerevalidate")]),t._v(" "),a("h5",{attrs:{id:"s-maxage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s-maxage"}},[t._v("#")]),t._v(" s-maxage")]),t._v(" "),a("h4",{attrs:{id:"_4-2-ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶"}},[t._v("#")]),t._v(" 4.2 ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶")]),t._v(" "),a("h5",{attrs:{id:"max-stale-å’Œ-min-fresh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#max-stale-å’Œ-min-fresh"}},[t._v("#")]),t._v(" max-stale å’Œ min-fresh")]),t._v(" "),a("h5",{attrs:{id:"only-if-cached"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#only-if-cached"}},[t._v("#")]),t._v(" only-if-cached")]),t._v(" "),a("h2",{attrs:{id:"_5-æœ€ä½³å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-æœ€ä½³å®è·µ"}},[t._v("#")]),t._v(" 5. æœ€ä½³å®è·µ")]),t._v(" "),a("p",[t._v("ç¼“å­˜çš„æ„ä¹‰åœ¨äºèƒ½å¤Ÿå°½å¯èƒ½å‡å°‘è¯·æ±‚èµ„æºçš„æ¬¡æ•°ï¼Œæ›´å¤šåœ°ä½¿ç”¨æœ¬åœ°ç¼“å­˜èµ„æºï¼Œå‡è½»è¯·æ±‚å¼€é”€å’ŒæœåŠ¡å™¨å‹åŠ›ï¼Œç»™ç”¨æˆ·å¸¦æ¥å¥½çš„ä½¿ç”¨ä½“éªŒã€‚æ‰€ä»¥æœ€ä½³çš„å®è·µåº”è¯¥æ˜¯ï¼Œèƒ½å¤Ÿå°½å¯èƒ½çš„å‘½ä¸­å¼ºç¼“å­˜ï¼ŒåŒæ—¶ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨èµ„æºæ–‡ä»¶ç‰ˆæœ¬æ›´æ–°ä»¥åï¼Œè®©æµè§ˆå™¨çš„ç¼“å­˜å¤±æ•ˆï¼Œé‡æ–°è·å–åˆ°æ–°çš„èµ„æºã€‚")]),t._v(" "),a("p",[t._v("é‚£åº”å¦‚ä½•èƒ½åœ¨èµ„æºæ–‡ä»¶ç‰ˆæœ¬æ›´æ–°ä»¥åï¼Œé©¬ä¸Šå°±è®©æµè§ˆå™¨çŸ¥é“éœ€è¦é‡æ–°è¯·æ±‚æ–°ç‰ˆæœ¬æ–‡ä»¶å‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("æœºæ™ºçš„å¼€å‘è€…ä»¬ï¼Œäºæ˜¯å°±æƒ³å‡ºäº†å¯¹ç­–ï¼š"),a("br"),t._v("\nåœ¨æ›´æ–°ç‰ˆæœ¬çš„æ—¶å€™ï¼Œå°†é™æ€èµ„æºçš„è·¯å¾„æ”¹äº†ï¼ˆåŠ ä¸Šç‰ˆæœ¬å·/å“ˆå¸Œå€¼ï¼‰ï¼Œè¿™æ ·å°±ç›¸å½“äºç¬¬ä¸€æ¬¡è®¿é—®è¿™äº›èµ„æºï¼Œå°±ä¸ä¼šå­˜åœ¨ç¼“å­˜çš„é—®é¢˜äº†ã€‚")]),t._v(" "),a("p",[t._v("ä¼Ÿå¤§çš„ Webpack é…ç½®å·¥å…·å¯ä»¥è®©æˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œåœ¨æ–‡ä»¶å‘½åä¸Šå¸¦ä¸Š hash å€¼ã€‚Webpack æä¾›äº†ä¸‰ç§å“ˆå¸Œå€¼è®¡ç®—æ–¹å¼ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("hash")]),a("br"),t._v("\nè·Ÿæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹ç›®é‡Œæœ‰æ–‡ä»¶æ›´æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„ hash å€¼éƒ½ä¼šæ›´æ”¹ï¼Œå¹¶ä¸”å…¨éƒ¨æ–‡ä»¶éƒ½å…±ç”¨ç›¸åŒçš„ hash å€¼ã€‚")]),t._v(" "),a("p",[t._v("é‡‡ç”¨ hash è®¡ç®—çš„è¯ï¼Œæ¯ä¸€æ¬¡æ„å»ºåç”Ÿæˆå“ˆå¸Œå€¼éƒ½ä¸ä¸€æ ·ï¼Œå³ä½¿æ–‡ä»¶å†…å®¹å‹æ ¹æ²¡æœ‰æ”¹å˜ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨è¿™ç§è®¡ç®—æ–¹å¼ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("chunkhash")]),a("br"),t._v("\næ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶ï¼ˆEntryï¼‰è¿›è¡Œä¾èµ–æ–‡ä»¶ï¼ˆvendorï¼‰è§£æã€æ„å»ºå¯¹åº”çš„ chunk ä»¥åŠç”Ÿæˆå¯¹åº”çš„å“ˆå¸Œå€¼ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªçš„åº”ç”¨åœºæ™¯å¯ä»¥ç”¨åœ¨ï¼šåœ¨ä»£ç åˆ†åŒ…çš„æ—¶å€™ï¼Œåº”è¯¥å°†ä¸€äº›ä¸å¸¸å˜çš„å…¬å…±åº“ç‹¬ç«‹æ‰“åŒ…ï¼Œä½¿å…¶èƒ½å¤Ÿæ›´æŒä¹…çš„ç¼“å­˜ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("contenthash")]),a("br"),t._v("\nç”±æ–‡ä»¶å†…å®¹äº§ç”Ÿçš„ hash å€¼ï¼Œå†…å®¹ä¸åŒæ—¶æ‰ä¼šäº§ç”Ÿä¸ä¸€æ ·çš„ contenthash å€¼ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªçš„åº”ç”¨åœºæ™¯å¯ä»¥ç”¨åœ¨ï¼šå½“éœ€è¦æŠŠé¡¹ç›®çš„ css æŠ½ç¦»å‡ºå¯¹åº”çš„ css æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ contenthashã€‚åœ¨é¡µé¢æ–‡ä»¶ä¸­åªä¿®æ”¹äº† dom ç»“æ„å†…å®¹è€Œæ— ä¿®æ”¹ css æ—¶ï¼Œå¯¹åº”çš„ css æ–‡ä»¶ hash å€¼å°†ä¸ä¼šå˜ï¼›éœ€è¦ä¿®æ”¹äº† css å†…å®¹æ›´æ–°äº†ï¼ŒæŠ½ç¦»çš„ css æ–‡ä»¶ hash å€¼æ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚")])])]),t._v(" "),a("h2",{attrs:{id:"_6-æµè§ˆå™¨çš„è¡Œä¸ºå½±å“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-æµè§ˆå™¨çš„è¡Œä¸ºå½±å“"}},[t._v("#")]),t._v(" 6. æµè§ˆå™¨çš„è¡Œä¸ºå½±å“")]),t._v(" "),a("p",[t._v("ç”¨æˆ·è‡ªå‘å¼•èµ·ä¸åŒçš„æµè§ˆå™¨è¡Œä¸ºä¼šè§¦å‘ä¸ä¸€æ ·çš„ç¼“å­˜ç­–ç•¥ï¼š")]),t._v(" "),a("h4",{attrs:{id:"åœ¨-uri-è¾“å…¥æ ä¸­è¾“å…¥ç„¶åå›è½¦-é€šè¿‡ä¹¦ç­¾è®¿é—®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-uri-è¾“å…¥æ ä¸­è¾“å…¥ç„¶åå›è½¦-é€šè¿‡ä¹¦ç­¾è®¿é—®"}},[t._v("#")]),t._v(" åœ¨ URI è¾“å…¥æ ä¸­è¾“å…¥ç„¶åå›è½¦/é€šè¿‡ä¹¦ç­¾è®¿é—®")]),t._v(" "),a("p",[t._v("è¿”å›å“åº”ç æ˜¯ 200 OK (from cache)ï¼Œæµè§ˆå™¨å‘ç°è¯¥èµ„æºå·²ç»ç¼“å­˜äº†è€Œä¸”æ²¡æœ‰è¿‡æœŸï¼ˆé€šè¿‡ Expires å¤´éƒ¨æˆ–è€… Cache-Control å¤´éƒ¨ï¼‰ï¼Œæ²¡æœ‰è·ŸæœåŠ¡å™¨ç¡®è®¤ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨äº†æµè§ˆå™¨ç¼“å­˜çš„å†…å®¹ã€‚å…¶ä¸­å“åº”å†…å®¹å’Œä¹‹å‰çš„å“åº”å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œä¾‹å¦‚å…¶ä¸­çš„ Date æ—¶é—´æ˜¯ä¸Šä¸€æ¬¡å“åº”çš„æ—¶é—´ã€‚")]),t._v(" "),a("h4",{attrs:{id:"æ™®é€šåˆ·æ–°-f5-ç‚¹å‡»å·¥å…·æ ä¸­çš„åˆ·æ–°æŒ‰é’®-å³é”®èœå•é‡æ–°åŠ è½½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ™®é€šåˆ·æ–°-f5-ç‚¹å‡»å·¥å…·æ ä¸­çš„åˆ·æ–°æŒ‰é’®-å³é”®èœå•é‡æ–°åŠ è½½"}},[t._v("#")]),t._v(" æ™®é€šåˆ·æ–° - F5/ç‚¹å‡»å·¥å…·æ ä¸­çš„åˆ·æ–°æŒ‰é’®/å³é”®èœå•é‡æ–°åŠ è½½")]),t._v(" "),a("p",[t._v("å¦‚æœç¼“å­˜æ²¡æœ‰å¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œåˆå› ä¸º TAB æ²¡æœ‰å…³é—­ï¼Œå› æ­¤å¦‚æœ Memory Cache åŒ¹é…ä¸Šçš„è¯ä¼šè¢«ä¼˜å…ˆä½¿ç”¨ï¼Œå…¶æ¬¡æ‰æ˜¯ Disk Cacheï¼›åä¹‹ï¼Œåˆ™å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Cache-Control: max-age=0\nIf-Modified-Since: Fri, 15 Jul 2016 04:11:51 GMT\n")])])]),a("h4",{attrs:{id:"å¼ºåˆ¶åˆ·æ–°-ctrl-f5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼ºåˆ¶åˆ·æ–°-ctrl-f5"}},[t._v("#")]),t._v(" å¼ºåˆ¶åˆ·æ–° - Ctrl + F5")]),t._v(" "),a("p",[t._v("å¼ºåˆ¶åˆ·æ–°ä½¿å¾—æµè§ˆå™¨ä¸ä½¿ç”¨ç¼“å­˜ï¼Œå› æ­¤å‘é€çš„è¯·æ±‚å¤´éƒ¨å‡å¸¦æœ‰ Cache-control: no-cache(ä¸ºäº†å…¼å®¹ï¼Œéƒ¨é—¨æµè§ˆå™¨ä¼šå¸¦äº† Pragma: no-cache)ã€‚æœåŠ¡å™¨ç›´æ¥è¿”å› 200 å’Œæœ€æ–°å†…å®¹ã€‚æµè§ˆå™¨ä¼šç›´æ¥å¿½ç•¥ç¼“å­˜ï¼Œåœ¨è¯·æ±‚æœåŠ¡å™¨æ—¶åŠ ä¸Š Cache-Control: no-cache å­—æ®µï¼Œç„¶åé‡æ–°å‘æœåŠ¡å™¨æ‹‰å–æ–‡ä»¶ã€‚")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Cache-Control: no-cache\nPragma: no-cache\n")])])]),a("h2",{attrs:{id:"_7-å¯å‘å¼ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-å¯å‘å¼ç¼“å­˜"}},[t._v("#")]),t._v(" 7.å¯å‘å¼ç¼“å­˜")]),t._v(" "),a("p",[t._v("å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“å¦‚æœå¼ºç¼“å­˜ç­–ç•¥éƒ½æ²¡è®¾ç½®ï¼Œå³å“åº”ä¸­æœªæ˜¾ç¤º "),a("code",[t._v("Expires")]),t._v("ï¼Œç¼“å­˜å­˜å‚¨çš„æœ€å¤§å‘¨æœŸæ—¶é—´ "),a("code",[t._v("Cache-Controlï¼šmax-age")]),t._v(" æˆ– ä»£ç†æœåŠ¡å™¨ç¼“å­˜å‘¨æœŸæ—¶é—´ "),a("code",[t._v("Cache-Controlï¼šs-maxage")]),t._v("ï¼Œå¹¶ä¸”å“åº”ä¸­ä¸åŒ…å«å…¶ä»–æœ‰å…³ç¼“å­˜çš„é™åˆ¶ã€‚")]),t._v(" "),a("p",[t._v("æµè§ˆå™¨ä¼šé‡‡ç”¨ä¸€ä¸ª"),a("strong",[t._v("å¯å‘å¼ç®—æ³•")]),t._v("æ¥è®¡ç®—æ–°é²œåº¦å¯¿å‘½ï¼Œé€šå¸¸ä¼šå–å“åº”å¤´ä¸­çš„ Date å‡å» Last-Modified å€¼çš„ 10% ï¼Œè®¾ç½®å¼ºåˆ¶ç¼“å­˜æ—¶é—´ï¼Œè€Œéç›´æ¥è¿›è¡Œåå•†ç¼“å­˜ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Dateï¼šåˆ›å»ºæŠ¥æ–‡çš„æ—¥æœŸæ—¶é—´, Last-Modified æœåŠ¡å™¨å£°æ˜æ–‡æ¡£æœ€åè¢«ä¿®æ”¹æ—¶é—´")]),t._v("\nresponse_is_fresh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ï¼ˆDate "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("  Last"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Modified"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç­‰åŒäº cache-control=max-age=ï¼ˆdate - Last-Modifiedï¼‰/ 10")]),t._v("\n")])])]),a("h2",{attrs:{id:"_8-ä¸‰çº§ç¼“å­˜åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-ä¸‰çº§ç¼“å­˜åŸç†"}},[t._v("#")]),t._v(" 8. ä¸‰çº§ç¼“å­˜åŸç†")]),t._v(" "),a("p",[t._v("ç¼“å­˜èµ„æºä¸è¿‡æœŸçš„æ—¶å€™ï¼Œå¦‚æœèµ„æºåœ¨å†…å­˜é‚£ä¹ˆå°± from memoryï¼Œå¦‚æœåªæœ‰åœ¨ç£ç›˜ä¸Šå°± from diskã€‚")]),t._v(" "),a("p",[t._v("1ï¼‰å…ˆå»å†…å­˜çœ‹ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥åŠ è½½ï¼›")]),t._v(" "),a("p",[t._v("2ï¼‰å¦‚æœå†…å­˜æ²¡æœ‰ï¼Œæ‹©å–ç¡¬ç›˜è·å–ï¼Œå¦‚æœæœ‰ç›´æ¥åŠ è½½ï¼›")]),t._v(" "),a("p",[t._v("3ï¼‰å¦‚æœç¡¬ç›˜ä¹Ÿæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼›")]),t._v(" "),a("p",[t._v("4ï¼‰åŠ è½½åˆ°çš„èµ„æºç¼“å­˜åˆ°ç¡¬ç›˜å’Œå†…å­˜ã€‚")]),t._v(" "),a("p",[t._v("æ‰€ä»¥å¸¸è§ä¾‹å­ï¼šè®¿é—®-> 200 -> é€€å‡ºæµè§ˆå™¨å†è¿›æ¥-> 200(from disk cache) -> åˆ·æ–° -> 200(from memory cache)")]),t._v(" "),a("h2",{attrs:{id:"å‚è€ƒæ–‡ç« "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡ç« "}},[t._v("#")]),t._v(" å‚è€ƒæ–‡ç« ")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://github.com/shfshanyue/blog/blob/master/frontend-engineering/http-cache.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç½‘ç«™çš„ç¼“å­˜æ§åˆ¶ç­–ç•¥æœ€ä½³å®è·µåŠæ³¨æ„äº‹é¡¹ "),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://juejin.cn/post/6844903747357769742",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸€æ–‡è¯»æ‡‚å‰ç«¯ç¼“å­˜"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=r.exports}}]);