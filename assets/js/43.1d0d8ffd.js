(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{362:function(t,a,s){"use strict";s.r(a);var n=s(25),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"v8-å·¥ä½œåŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-å·¥ä½œåŸç†"}},[t._v("#")]),t._v(" ğŸ‘‰ V8 å·¥ä½œåŸç†")]),t._v(" "),a("h2",{attrs:{id:"javascript-å†…å­˜ç©ºé—´"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-å†…å­˜ç©ºé—´"}},[t._v("#")]),t._v(" JavaScript å†…å­˜ç©ºé—´")]),t._v(" "),a("p",[t._v("JavaScript æ˜¯ä¸€é—¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦æ£€æŸ¥æ•°æ®ç±»å‹ï¼Œå¹¶æ”¯æŒéšå¼ç±»å‹è½¬æ¢çš„è¯­è¨€ï¼Œå³ä¸ºä¸€é—¨å¼±ç±»å‹çš„åŠ¨æ€è¯­è¨€ï¼š")]),t._v(" "),a("p",[t._v("1ï¼‰å¼±ç±»å‹ï¼Œæ„å‘³æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Œä½ ä¸éœ€è¦å‘Šè¯‰ JavaScript å¼•æ“è¿™ä¸ªæˆ–é‚£ä¸ªå˜é‡æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼ŒJavaScript å¼•æ“åœ¨è¿è¡Œä»£ç çš„æ—¶å€™è‡ªå·±ä¼šè®¡ç®—å‡ºæ¥ã€‚")]),t._v(" "),a("p",[t._v("2ï¼‰åŠ¨æ€ï¼Œæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ JavaScript çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸»è¦æœ‰ä¸‰ç§ç±»å‹å†…å­˜ç©ºé—´ï¼Œåˆ†åˆ«æ˜¯ä»£ç ç©ºé—´ã€æ ˆç©ºé—´å’Œå †ç©ºé—´ã€‚å…¶ä¸­çš„ä»£ç ç©ºé—´ä¸»è¦æ˜¯å­˜å‚¨å¯æ‰§è¡Œä»£ç çš„ï¼Œæ ˆç©ºé—´ä¸»è¦æ‹¥æœ‰ç®¡ç†å­˜å‚¨æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå †ç©ºé—´åˆ™æ˜¯å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"æ ˆç©ºé—´å’Œå †ç©ºé—´"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ ˆç©ºé—´å’Œå †ç©ºé—´"}},[t._v("#")]),t._v(" æ ˆç©ºé—´å’Œå †ç©ºé—´")]),t._v(" "),a("h4",{attrs:{id:"æ ˆç©ºé—´-call-stack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ ˆç©ºé—´-call-stack"}},[t._v("#")]),t._v(" æ ˆç©ºé—´ï¼ˆCall Stackï¼‰")]),t._v(" "),a("p",[t._v("æ ˆç©ºé—´å°±æ˜¯è°ƒç”¨æ ˆï¼Œä¸€ç§ç”¨æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ•°æ®ç»“æ„ï¼Œç¬¦åˆåè¿›å…ˆå‡ºçš„è§„åˆ™ã€‚(å¯ä»¥ç†è§£ä¸ºæ˜¯ ã€Š"),a("a",{attrs:{href:"https://chieminchan.vercel.app/articles/JavaScript/JavaScript%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡"),a("OutboundLink")],1),t._v(" ã€‹ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆã€‚)")]),t._v(" "),a("p",[t._v("æ¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒJavaScript å¼•æ“ä¼šä¸ºå…¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶æŠŠè¯¥æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥è°ƒç”¨æ ˆï¼Œç„¶å JavaScript å¼•æ“å¼€å§‹æ‰§è¡Œå‡½æ•°ä»£ç ã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•° A ä¸­è°ƒç”¨äº†å¦å¤–ä¸€ä¸ªå‡½æ•° Bï¼Œé‚£ä¹ˆ JavaScript å¼•æ“ä¼šä¸º B å‡½æ•°åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å°† B å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ ˆé¡¶ã€‚å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼ŒJavaScript å¼•æ“ä¼šå°†è¯¥å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¼¹å‡ºæ ˆã€‚")]),t._v(" "),a("p",[t._v("ä¸è¿‡æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œè°ƒç”¨æ ˆæ˜¯æœ‰å¤§å°çš„ï¼Œå½“å…¥æ ˆçš„æ‰§è¡Œä¸Šä¸‹æ–‡è¶…è¿‡ä¸€å®šæ•°ç›®ï¼ŒJavaScript å¼•æ“å°±ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬æŠŠè¿™ç§é”™è¯¯å«åšæ ˆæº¢å‡ºã€‚ï¼ˆé”™ä½ä¿¡æ¯ï¼šè¶…è¿‡äº†æœ€å¤§æ ˆè°ƒç”¨å¤§å°ï¼Œ"),a("code",[t._v("Uncaught RangeError: Maximum call stack size exceeded")]),t._v("ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ ˆç©ºé—´å­˜å‚¨æ•°æ®çš„æ —å­ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æå®¢æ—¶é—´"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æå®¢æ—¶é—´"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ol",[a("li",[a("p",[t._v("è¿™æ®µä»£ç æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¢«å‹å…¥æ ˆä¸­ï¼›")])]),t._v(" "),a("li",[a("p",[t._v("å¯¹å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å‡ºç°çš„å˜é‡ï¼Œåˆå§‹åŒ–åˆ°å˜é‡ç¯å¢ƒä¸­ï¼Œåˆå§‹åŒ–å€¼ä¸º undefinedï¼›")])]),t._v(" "),a("li",[a("p",[t._v("æ‰§è¡Œé˜¶æ®µï¼Œå˜é‡ a å’Œå˜é‡ b éƒ½è¢«èµ‹å€¼ä¸º"),a("code",[t._v("æå®¢æ—¶é—´")]),t._v("ï¼›æ­¤æ—¶å˜é‡ a å’Œå˜é‡ b çš„å€¼éƒ½è¢«ä¿å­˜åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œæ‰§è¡Œä¸Šä¸‹æ–‡åˆè¢«å‹å…¥åˆ°æ ˆä¸­ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºå˜é‡ a å’Œå˜é‡ b çš„å€¼éƒ½æ˜¯å­˜æ”¾åœ¨æ ˆä¸­çš„ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æ‰§è¡Œç¬¬ 4 è¡Œä»£ç ï¼Œç”±äº JavaScript å¼•æ“åˆ¤æ–­å³è¾¹çš„å€¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œè¿™æ—¶å€™å¤„ç†çš„æƒ…å†µå°±ä¸ä¸€æ ·äº†ï¼šJavaScript å¼•æ“å¹¶ä¸æ˜¯ç›´æ¥å°†è¯¥å¯¹è±¡å­˜æ”¾åˆ°å˜é‡ç¯å¢ƒä¸­ï¼Œè€Œæ˜¯å°†å®ƒåˆ†é…åˆ°å †ç©ºé—´é‡Œé¢ï¼Œåˆ†é…åè¯¥å¯¹è±¡ä¼šæœ‰ä¸€ä¸ªåœ¨â€œå †â€ä¸­çš„åœ°å€ï¼Œç„¶åå†å°†è¯¥æ•°æ®çš„åœ°å€å†™è¿› c çš„å˜é‡å€¼ï¼Œåˆ†é…å¥½å†…å­˜çš„ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/stash1.png",alt:"VM8-å†…å­˜ç©ºé—´",title:"VM8-å†…å­˜ç©ºé—´"}})]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("æ‰§è¡Œç¬¬ 5 è¡Œä»£ç ï¼Œå°† c èµ‹å€¼ç»™ dï¼Œå…¶å®å°±æ˜¯æŠŠ c çš„å¼•ç”¨åœ°å€èµ‹å€¼ç»™ dï¼Œå³ c å’Œ d çš„å€¼éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªåœ¨å †ä¸­çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœé€šè¿‡ c ä¿®æ”¹ name çš„å€¼ï¼Œå˜é‡ d çš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜ã€‚")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/stash2.png",alt:"VM8-å†…å­˜ç©ºé—´",title:"VM8-å†…å­˜ç©ºé—´"}})]),t._v(" "),a("h4",{attrs:{id:"å †ç©ºé—´-memory-heap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å †ç©ºé—´-memory-heap"}},[t._v("#")]),t._v(" å †ç©ºé—´ï¼ˆMemory Heapï¼‰")]),t._v(" "),a("p",[t._v("ç”±ä¸Šè¿°ä¾‹å­å¯çŸ¥ï¼Œå¼•ç”¨ç±»å‹æ˜¯å­˜æ”¾åœ¨å †ç©ºé—´çš„ï¼Œåœ¨æ ˆç©ºé—´ä¸­åªæ˜¯ä¿ç•™äº†å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œå½“ JavaScript éœ€è¦è®¿é—®è¯¥æ•°æ®çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡æ ˆä¸­çš„å¼•ç”¨åœ°å€æ¥è®¿é—®çš„ï¼Œç›¸å½“äºå¤šäº†ä¸€é“è½¬æ‰‹æµç¨‹ã€‚")]),t._v(" "),a("p",[t._v("æ ˆç©ºé—´éƒ½ä¸ä¼šè®¾ç½®å¤ªå¤§ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾ä¸€äº›åŸå§‹ç±»å‹çš„å°æ•°æ®ã€‚")]),t._v(" "),a("p",[t._v("è€Œå¼•ç”¨ç±»å‹çš„æ•°æ®å ç”¨çš„ç©ºé—´éƒ½æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¿™ä¸€ç±»æ•°æ®ä¼šè¢«å­˜æ”¾åˆ°å †ä¸­ï¼Œå †ç©ºé—´å¾ˆå¤§ï¼Œèƒ½å­˜æ”¾å¾ˆå¤šå¤§çš„æ•°æ®ï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯åˆ†é…å†…å­˜å’Œå›æ”¶å†…å­˜éƒ½ä¼šå ç”¨ä¸€å®šçš„æ—¶é—´ã€‚")]),t._v(" "),a("h3",{attrs:{id:"é—­åŒ…çš„å†…å­˜æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é—­åŒ…çš„å†…å­˜æ¨¡å‹"}},[t._v("#")]),t._v(" é—­åŒ…çš„å†…å­˜æ¨¡å‹")]),t._v(" "),a("p",[t._v("åœ¨åŸå§‹ç±»å‹æ•°æ®ä¼šè¢«å­˜å‚¨åˆ°æ ˆç©ºé—´ï¼Œå¼•ç”¨ç±»å‹ä¼šè¢«å­˜åˆ°å †ç©ºé—´çš„åŸºç¡€ä¸Šï¼Œå†å›æ¥çœ‹ä¸€ä¸‹é—­åŒ…çš„ä¾‹å­ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" æå®¢æ—¶é—´ "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" test1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" test2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" innerBar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("setName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            myName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" myName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" innerBar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" æå®¢é‚¦ "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å½“ä¸€ä¸ªå¤–éƒ¨å‡½æ•°åŒ…å«ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼ŒJavaScript å¼•æ“ä¼šå¯¹å†…éƒ¨å‡½æ•°åšä¸€æ¬¡å¿«é€Ÿçš„è¯æ³•æ‰«æï¼Œå¦‚æœå‘ç°å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼ŒJavaScript å¼•æ“ä¼šåˆ¤æ–­è¿™æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œäºæ˜¯åœ¨å †ç©ºé—´åˆ›å»ºæ¢ä¸€ä¸ªâ€œclosure(foo)â€çš„å¯¹è±¡ï¼ˆè¿™æ˜¯ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼ŒJavaScript æ˜¯æ— æ³•è®¿é—®çš„ï¼‰ï¼Œç”¨æ¥ä¿å­˜ myName å˜é‡ã€‚")]),t._v(" "),a("p",[t._v("æ¥ç€ç»§ç»­æ‰«æåˆ° getName æ–¹æ³•æ—¶ï¼Œå‘ç°è¯¥å‡½æ•°å†…éƒ¨è¿˜å¼•ç”¨å˜é‡ test1ï¼Œäºæ˜¯ JavaScript å¼•æ“åˆå°† test1 æ·»åŠ åˆ°â€œclosure(foo)â€å¯¹è±¡ä¸­ã€‚è¿™æ—¶å€™å †ä¸­çš„â€œclosure(foo)â€å¯¹è±¡ä¸­å°±åŒ…å«äº† myName å’Œ test1 ä¸¤ä¸ªå˜é‡äº†ã€‚")]),t._v(" "),a("p",[t._v("å½“äº§ç”Ÿäº†é—­åŒ…æ—¶çš„æ ¸å¿ƒæœ‰ä¸¤æ­¥ï¼š"),a("br"),t._v("\nç¬¬ä¸€æ­¥æ˜¯éœ€è¦é¢„æ‰«æå†…éƒ¨å‡½æ•°ï¼›"),a("br"),t._v("\nç¬¬äºŒæ­¥æ˜¯æŠŠå†…éƒ¨å‡½æ•°å¼•ç”¨çš„å¤–éƒ¨å˜é‡ä¿å­˜åˆ°å †ä¸­ã€‚")]),t._v(" "),a("h2",{attrs:{id:"åƒåœ¾æ•°æ®å¦‚ä½•è‡ªåŠ¨å›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åƒåœ¾æ•°æ®å¦‚ä½•è‡ªåŠ¨å›æ”¶"}},[t._v("#")]),t._v(" åƒåœ¾æ•°æ®å¦‚ä½•è‡ªåŠ¨å›æ”¶")]),t._v(" "),a("h3",{attrs:{id:"è°ƒç”¨æ ˆçš„åƒåœ¾å›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨æ ˆçš„åƒåœ¾å›æ”¶"}},[t._v("#")]),t._v(" è°ƒç”¨æ ˆçš„åƒåœ¾å›æ”¶")]),t._v(" "),a("p",[t._v("è°ƒç”¨æ ˆä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªè®°å½•å½“å‰æ‰§è¡ŒçŠ¶æ€çš„æŒ‡é’ˆï¼ˆç§°ä¸º ESP æŒ‡é’ˆï¼‰ æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å½“æ‰§è¡Œæ—¶å®Œæ¯•ï¼ŒJS ä¼šå°† ESP å‘ä¸‹ç§»åŠ¨ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸ªä¸‹ç§»æ“ä½œå°±æ˜¯é”€æ¯è°ƒç”¨æ ˆä¸­æ‰§è¡Œä¸Šä¸‹æ–‡çš„è¿‡ç¨‹ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å †ç©ºé—´çš„åƒåœ¾å›æ”¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å †ç©ºé—´çš„åƒåœ¾å›æ”¶"}},[t._v("#")]),t._v(" å †ç©ºé—´çš„åƒåœ¾å›æ”¶")]),t._v(" "),a("p",[t._v("åœ¨ä¸Šä¸‹æ–‡é”€æ¯åï¼Œå †å†…å­˜ä¾ç„¶ä¼šè¢«å ç”¨ï¼ŒV8 å¼•æ“å¯¹å †çš„æ•°æ®é‡‡å–åƒåœ¾å›æ”¶å™¨æœºåˆ¶ã€‚")]),t._v(" "),a("p",[t._v("ä¾æ®ä»£é™…å‡è¯´çš„ä¸¤ä¸ªå‡†åˆ™ï¼š"),a("br"),t._v("\n1ï¼‰å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜æ´»æ—¶é—´çŸ­"),a("br"),t._v("\n2ï¼‰ä¸æ­»çš„å¯¹è±¡ä¼šæ´»å¾—æ›´ä¹…")]),t._v(" "),a("p",[t._v("V8 ä¼šæŠŠå †åˆ†æˆæ–°ç”ŸåŒºå’Œè€ç”ŸåŒºï¼š"),a("br"),t._v("\nå¯¹äºæ–°ç”ŸåŒºï¼Œç”¨äºå­˜æ”¾å¤§å¤šæ•°å°çš„å¯¹è±¡ã€‚æ”¯æŒ 1-8M å®¹å™¨ï¼Œå› ä¸ºå†…å­˜ç©ºé—´ä¸ç®—å¤§ï¼Œå›æ”¶æ¬¡æ•°è¾ƒä¸ºé¢‘ç¹ã€‚"),a("br"),t._v("\nå¯¹äºè€ç”ŸåŒºï¼Œç”¨äºå­˜æ”¾å¤§çš„å¯¹è±¡å’Œæ–°ç”Ÿä»£æ™‹å‡çš„å¯¹è±¡ã€‚å ç”¨ç©ºé—´å¤§ï¼Œå­˜æ´»æ—¶é—´é•¿ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºè¿™ä¸¤å—åŒºåŸŸï¼ŒV8 åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„åƒåœ¾å›æ”¶å™¨ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°å®æ–½åƒåœ¾å›æ”¶ï¼š"),a("br"),t._v("\nå‰¯åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚"),a("br"),t._v("\nä¸»åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ä¸»åƒåœ¾å›æ”¶å™¨å’Œå‰¯åƒåœ¾å›æ”¶å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»åƒåœ¾å›æ”¶å™¨å’Œå‰¯åƒåœ¾å›æ”¶å™¨"}},[t._v("#")]),t._v(" ä¸»åƒåœ¾å›æ”¶å™¨å’Œå‰¯åƒåœ¾å›æ”¶å™¨")]),t._v(" "),a("p",[t._v("ä¸¤ç±»åƒåœ¾å›æ”¶å™¨åœ¨å›æ”¶æ“ä½œæ–¹å¼ä¸Šæœ‰ä¸€å®šå·®å¼‚ï¼Œä½†å¤§ä½“ä¸Šéƒ½æœ‰ä¸€å¥—å…±åŒçš„æ‰§è¡Œæµç¨‹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("æ ‡è®°ï¼šæ ‡è®°ç©ºé—´ä¸­çš„æ´»åŠ¨å¯¹è±¡å’Œéæ´»åŠ¨å¯¹è±¡ï¼ŒæŠŠéæ´»åŠ¨å¯¹è±¡æ ‡è®°ä¸ºå¯å›æ”¶å¯¹è±¡ï¼›")]),t._v(" "),a("li",[t._v("æ¸…é™¤ï¼šæ¸…ç†å›æ”¶éæ´»åŠ¨å¯¹è±¡æ‰€å æ®çš„å†…å­˜ç©ºé—´ï¼›")]),t._v(" "),a("li",[t._v("æ•´ç†ï¼šéæ´»åŠ¨å¯¹è±¡æ‰€å æ®çš„å†…å­˜ç©ºé—´è¢«å›æ”¶åä¼šäº§ç”Ÿä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œä¸ºäº†åç»­åˆ†é…è¾ƒå¤§è¿ç»­å†…å­˜ï¼Œéœ€å¯¹è¿™äº›å†…å­˜ç¢ç‰‡è¿›è¡Œæ•´ç†ã€‚")])]),t._v(" "),a("h4",{attrs:{id:"æ–°ç”Ÿä»£åŒºåŸŸ-å‰¯åƒåœ¾å›æ”¶å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ–°ç”Ÿä»£åŒºåŸŸ-å‰¯åƒåœ¾å›æ”¶å™¨"}},[t._v("#")]),t._v(" æ–°ç”Ÿä»£åŒºåŸŸ - å‰¯åƒåœ¾å›æ”¶å™¨")]),t._v(" "),a("p",[t._v("æ–°ç”Ÿä»£åŒºåŸŸä¸­é‡‡ç”¨ Scavenge ç®—æ³•æ¥å¤„ç†ï¼Œå³æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒºåŸŸã€‚")]),t._v(" "),a("p",[t._v("å…¶æµç¨‹æ˜¯ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("æ–°åŠ å…¥çš„å¯¹è±¡å°±è¢«æ”¾è‡³å¯¹è±¡åŒºï¼Œå¯¹è±¡åŒºå¿«æ»¡çš„æ—¶å€™ä¼šè§¦å‘ä¸€è½®åƒåœ¾å›æ”¶ï¼›")]),t._v(" "),a("li",[t._v("åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆä¼šå¯¹å¯¹è±¡åŒºçš„åƒåœ¾å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼›")]),t._v(" "),a("li",[t._v("æ ‡è®°é˜¶æ®µå®Œæˆåï¼Œè¿›å…¥æ¸…ç†é˜¶æ®µï¼Œå‰¯åƒåœ¾å›æ”¶å™¨ä¼šæ¸…ç†å¯å›æ”¶å¯¹è±¡ï¼Œå¹¶å°†å­˜æ´»å¯¹è±¡"),a("strong",[t._v("æœ‰åºåœ°è¿ç»­å¤åˆ¶")]),t._v("è‡³ç©ºé—²åŒºï¼ˆç›¸å½“äºå®Œæˆäº†å†…å­˜ç¢ç‰‡æ•´ç†é‚£ä¸€æ­¥ï¼‰ï¼›")]),t._v(" "),a("li",[t._v("å¤åˆ¶å®Œæ¯•åï¼Œå°†å¯¹è±¡åŒºå’Œç©ºé—²åŒºè¿›è¡Œè§’è‰²ç¿»è½¬ã€‚è¿™æ ·å°±å®Œæˆäº†æ–°ç”Ÿä»£åŒºçš„åƒåœ¾å¯¹è±¡å›æ”¶æ“ä½œã€‚")])]),t._v(" "),a("p",[t._v("ä¸ºäº†ä¿è¯æ–°ç”Ÿä»£åŒºçš„å¤åˆ¶æ“ä½œçš„æ‰§è¡Œæ•ˆç‡ï¼Œæ–°ç”Ÿä»£åŒºåŸŸçš„ç©ºé—´ä¸ä¼šè®¾ç½®å¤ªå¤§ï¼Œé¿å…æ‰§è¡Œæ•ˆç‡ä½è€—æ—¶é•¿ã€‚")]),t._v(" "),a("p",[t._v("å› ä¸ºæ–°ç”Ÿä»£çš„ç©ºé—´ä¸å¤§ï¼Œå®¹æ˜“è¢«éœ€é•¿ä¹…å­˜æ´»çš„å¯¹è±¡å­˜æ»¡ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒV8 å¼•æ“é‡‡ç”¨äº†æ™‹å‡ç­–ç•¥ã€‚å¯¹æ–°ç”Ÿä»£åŒºåŸŸä¸­ç»è¿‡ä¸¤è½®åƒåœ¾å›æ”¶åä¾ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œä¼šæ™‹å‡è¢«æ”¾è‡³è€ç”Ÿä»£åŒºåŸŸä¸­ã€‚")]),t._v(" "),a("h4",{attrs:{id:"è€ç”Ÿä»£åŒºåŸŸ-ä¸»åƒåœ¾å›æ”¶å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è€ç”Ÿä»£åŒºåŸŸ-ä¸»åƒåœ¾å›æ”¶å™¨"}},[t._v("#")]),t._v(" è€ç”Ÿä»£åŒºåŸŸ - ä¸»åƒåœ¾å›æ”¶å™¨")]),t._v(" "),a("p",[t._v("è€ç”Ÿä»£åŒºåŸŸä¸»è¦å­˜æ”¾å¤§å¯¹è±¡å’Œæ–°ç”Ÿä»£æ™‹å‡å¯¹è±¡ï¼Œæœ‰ç€å ç”¨ç©ºé—´å¤§ã€å­˜æ´»æ—¶é—´é•¿çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ä¸é€‚ç”¨ Scavenge ç®—æ³•ï¼Œå¦åˆ™æµªè´¹ç©ºé—´ä¸”æ‰§è¡Œæ•ˆç‡ä½ã€‚")]),t._v(" "),a("p",[t._v("è€ç”Ÿä»£åŒºåŸŸä¸»è¦é‡‡ç”¨"),a("strong",[t._v("æ ‡è®°-æ¸…é™¤")]),t._v("ç®—æ³•ï¼ˆMark-Sweepï¼‰ï¼Œå…¶æµç¨‹æ˜¯ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("é¦–å…ˆæ˜¯æ ‡è®°é˜¶æ®µï¼Œä¼šä»æ ¹å…ƒç´ å¼€å§‹ï¼Œéå†è°ƒç”¨æ ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œèƒ½è¾¾åˆ°çš„å¯¹è±¡ä¼šè¢«æ ‡è®°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œå¦åˆ™ä¼šè¢«æ ‡è®°å¯å›æ”¶æ•°æ®ã€‚")]),t._v(" "),a("li",[t._v("è¿›å…¥æ¸…é™¤é˜¶æ®µï¼Œä¼šå¯¹å¯å›æ”¶æ•°æ®ç›´æ¥è¿›è¡Œæ¸…ç†ï¼Œå› æ­¤ä¼šäº§å‡ºä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ã€‚")]),t._v(" "),a("li",[t._v("è¿›å…¥æ•´ç†é˜¶æ®µï¼Œé‡‡ç”¨**æ ‡è®° - æ•´ç†(Mark-Compact)**æ–¹æ³•ï¼ˆç±»ä¼¼æ ‡è®°-æ¸…é™¤æ³•ï¼‰ï¼Œåªæ˜¯ä¸å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"å…¨åœé¡¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¨åœé¡¿"}},[t._v("#")]),t._v(" å…¨åœé¡¿")]),t._v(" "),a("p",[t._v("ä¸€æ—¦æ‰§è¡Œåƒåœ¾å›æ”¶ç®—æ³•ï¼Œéƒ½éœ€è¦å°†æ­£åœ¨æ‰§è¡Œçš„ JavaScript è„šæœ¬æš‚åœä¸‹æ¥ï¼Œå¾…åƒåœ¾å›æ”¶å®Œæ¯•åå†æ¢å¤è„šæœ¬æ‰§è¡Œã€‚è¿™ç§è¡Œä¸ºå«åšå…¨åœé¡¿ï¼ˆStop-The-Worldï¼‰ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºæ–°ç”Ÿä»£åŒºï¼Œå› å…¶ç©ºé—´è¾ƒå°ï¼Œä¸”å­˜æ´»å¯¹è±¡è¾ƒå°‘ï¼Œå…¨åœé¡¿å½±å“ä¸å¤§ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºè€ç”Ÿä»£åŒºï¼Œå †ç©ºé—´å¯¹è±¡è¾ƒå¤§ï¼Œæ•´ä¸ªå…¨åœé¡¿è¿‡ç¨‹ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚")]),t._v(" "),a("p",[t._v("ä¸ºäº†é™ä½è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶è€Œé€ æˆçš„å¡é¡¿ï¼ŒV8 é‡‡ç”¨"),a("strong",[t._v("å¢é‡æ ‡è®°æ³•")]),t._v("ï¼ˆIncremental Markingï¼‰ç®—æ³•ï¼Œå°†æ ‡è®°è¿‡ç¨‹åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å­æ ‡è®°è¿‡ç¨‹ï¼ŒåŒæ—¶è®©åƒåœ¾å›æ”¶æ ‡è®°å’Œ JavaScript åº”ç”¨é€»è¾‘äº¤æ›¿è¿›è¡Œï¼Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/stop.png",alt:"stop",title:"stop"}})]),t._v(" "),a("h2",{attrs:{id:"v8-æ‰§è¡Œä»£ç æµç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-æ‰§è¡Œä»£ç æµç¨‹"}},[t._v("#")]),t._v(" V8 æ‰§è¡Œä»£ç æµç¨‹")]),t._v(" "),a("h3",{attrs:{id:"ç¼–è¯‘å™¨å’Œè§£æå™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘å™¨å’Œè§£æå™¨"}},[t._v("#")]),t._v(" ç¼–è¯‘å™¨å’Œè§£æå™¨")]),t._v(" "),a("blockquote",[a("p",[t._v("ä¹‹æ‰€ä»¥å­˜åœ¨ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ï¼Œæ˜¯å› ä¸ºæœºå™¨ä¸èƒ½ç›´æ¥ç†è§£æˆ‘ä»¬æ‰€å†™çš„ä»£ç ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œç¨‹åºä¹‹å‰ï¼Œéœ€è¦å°†æˆ‘ä»¬æ‰€å†™çš„ä»£ç â€œç¿»è¯‘â€æˆæœºå™¨èƒ½è¯»æ‡‚çš„æœºå™¨è¯­è¨€ã€‚æŒ‰è¯­è¨€çš„æ‰§è¡Œæµç¨‹ï¼Œå¯ä»¥æŠŠè¯­è¨€åˆ’åˆ†ä¸ºç¼–è¯‘å‹è¯­è¨€å’Œè§£é‡Šå‹è¯­è¨€ã€‚")])]),t._v(" "),a("p",[t._v("å¯¹äºç¼–è¯‘å‹è¯­è¨€å’Œè§£é‡Šå‹è¯­è¨€ï¼Œéƒ½éœ€è¦å°†æºä»£ç é€šè¿‡"),a("strong",[t._v("è¯æ³•è§£æå’Œè¯­æ³•è§£æç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆ ASTï¼‰")]),t._v("ï¼Œç„¶åå†åˆ†åˆ«å¯¹è¿™ä¸ª AST ç»§ç»­è¿›è¡Œä¸åŒæ–¹å¼çš„è§£æã€‚")]),t._v(" "),a("h4",{attrs:{id:"ç¼–è¯‘å™¨å¤„ç†-ast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘å™¨å¤„ç†-ast"}},[t._v("#")]),t._v(" ç¼–è¯‘å™¨å¤„ç† AST")]),t._v(" "),a("p",[t._v("å¯¹äºç¼–è¯‘å‹è¯­è¨€ï¼Œæœ‰äº† AST ä¹‹åï¼Œè®¡ç®—æœºå¯ä»¥èƒ½ç†è§£é«˜çº§è¯­è¨€ä»£ç äº†ï¼Œä½†æ˜¯éœ€è¦ç¼–è¯‘å™¨äº§ç”Ÿä½çº§è¯­è¨€ï¼Œæ¯”å¦‚æ±‡ç¼–ä»£ç æ‰èƒ½è¢«æœºå™¨æ‰§è¡Œã€‚ç›´æ¥ä» AST å¼€å§‹è·ç¦»æ¯”è¾ƒè¿œã€‚")]),t._v(" "),a("p",[t._v("å› ä¸º AST æ˜¯åµŒå¥—çš„ã€æ ‘å½¢çš„ï¼›æ±‡ç¼–ä»£ç æ˜¯çº¿æ€§çš„ã€é¡ºåºçš„ã€‚æ‰€ä»¥éœ€è¦å…ˆè½¬æˆä¸€ç§çº¿æ€§çš„ä»£ç ï¼Œå†ç”Ÿæˆä½çº§ä»£ç ã€‚è¿™é‡Œæš‚æ—¶ä¸è¯¦ç»†å±•å¼€å…·ä½“æµç¨‹ï¼Œå¤§æ¦‚çš„æµç¨‹å°±æ˜¯ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å¯¹ AST æ ‘è¿›è¡Œè¯­æ³•åˆ†æï¼ˆä»£ç è¯­æ³•æ­£ç¡®æ€§æ£€æŸ¥ï¼‰ã€ä½œç”¨åŸŸåˆ†æï¼ˆåˆ†æå‡½æ•°å—ï¼‰...ï¼›")]),t._v(" "),a("li",[t._v("å¯¹è¯­æ³•åˆ†æåçš„ AST ç¿»è¯‘å’Œä¼˜åŒ–æˆçº¿æ€§ä»£ç ï¼ˆä¸­é—´ä»£ç ï¼‰ï¼›")]),t._v(" "),a("li",[t._v("å°†çº¿æ€§ä»£ç ç”Ÿæˆæ±‡ç¼–ä»£ç ï¼›")]),t._v(" "),a("li",[t._v("é€šè¿‡æ±‡ç¼–å™¨ç”Ÿæˆå¤„ç†å™¨èƒ½è¯†åˆ«çš„æœºå™¨ç ï¼›")]),t._v(" "),a("li",[t._v("å¦‚æœç¼–è¯‘æˆåŠŸï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ã€‚ä½†å¦‚æœç¼–è¯‘è¿‡ç¨‹å‘ç”Ÿäº†è¯­æ³•æˆ–è€…å…¶ä»–çš„é”™è¯¯ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæœ€åçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¹Ÿä¸ä¼šç”ŸæˆæˆåŠŸã€‚")])]),t._v(" "),a("h4",{attrs:{id:"è§£é‡Šå™¨å¤„ç†æµç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§£é‡Šå™¨å¤„ç†æµç¨‹"}},[t._v("#")]),t._v(" è§£é‡Šå™¨å¤„ç†æµç¨‹")]),t._v(" "),a("p",[t._v("JavaScript å±äºè§£é‡Šå‹è¯­è¨€ï¼Œå› æ­¤ä¸éœ€è¦ç”Ÿæˆçº¿æ€§ä»£ç å’Œè¿›è¡Œæ±‡ç¼–è¿‡ç¨‹ï¼Œåªéœ€è¦åœ¨æ¯æ¬¡è¿è¡Œæ—¶é€šè¿‡è§£é‡Šå™¨å¯¹ç¨‹åºè¿›è¡ŒåŠ¨æ€è§£é‡Šå’Œæ‰§è¡Œã€‚å®ƒçš„æµç¨‹ä¸»è¦æœ‰ï¼š")]),t._v(" "),a("h5",{attrs:{id:"_1-ç”Ÿæˆ-ast-å’Œæ‰§è¡Œä¸Šä¸‹æ–‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç”Ÿæˆ-ast-å’Œæ‰§è¡Œä¸Šä¸‹æ–‡"}},[t._v("#")]),t._v(" 1. ç”Ÿæˆ AST å’Œæ‰§è¡Œä¸Šä¸‹æ–‡")]),t._v(" "),a("p",[t._v("æºä»£ç é€šè¿‡è¯æ³•è§£æå’Œè¯­æ³•è§£æç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ ASTï¼ŒåŒæ—¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("åˆ†è¯/è¯æ³•è§£æï¼ˆtokenizeï¼‰")])]),t._v(" "),a("p",[t._v("è¯æ³•æè¿°çš„æ˜¯æœ€å°çš„å•è¯æ ¼å¼ï¼Œè¯æ³•è§£æå°±æ˜¯å¯¹æºä»£ç è¿›è¡Œåˆ†è¯ï¼Œå°†å­—ç¬¦ä¸²æ‹†åˆ†æˆä¸€ä¸ªä¸ªæœ€å°çš„ä¸å¯å†æ‹†çš„å•è¯ï¼Œåˆå« tokenï¼Œæ¯”å¦‚ ifã€elseã€break...ï¼Œæ¯ä¸ª token è¯†åˆ«å®Œå°±å¯ä»¥æŠ›å‡ºæ¥ï¼Œæœ€ç»ˆäº§å‡ºä¸€ä¸ª token æ•°ç»„ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/tokenize.png",alt:"tokenize",title:"tokenize"}})]),t._v(" "),a("ul",[a("li",[t._v("è§£æ/è¯­æ³•è§£æï¼ˆparseï¼‰")])]),t._v(" "),a("p",[t._v("è¯­æ³•è§£æå°±æ˜¯å°†ä¸Šä¸€æ­¥çš„ token æ•°ç»„æŒ‰ç…§è¯­æ³•è§„åˆ™è¿›è¡Œç»„è£…ï¼Œç»„è£…æˆ AST æ ‘ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/ast.png",alt:"ast",title:"ast"}})]),t._v(" "),a("p",[t._v("æœ‰äº† AST ä»¥åï¼Œ V8 å°±ä¼šç”Ÿæˆè¯¥æ®µä»£ç çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚")]),t._v(" "),a("h5",{attrs:{id:"_2-ç”Ÿæˆå­—èŠ‚ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç”Ÿæˆå­—èŠ‚ç "}},[t._v("#")]),t._v(" 2. ç”Ÿæˆå­—èŠ‚ç ")]),t._v(" "),a("p",[t._v("æœ‰äº†æŠ½è±¡è¯­æ³•æ ‘ AST å’Œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œé€šè¿‡"),a("strong",[t._v("è§£æå™¨ Ignition")]),t._v("æ ¹æ® AST ç”Ÿæˆå­—èŠ‚ç ï¼›ï¼ˆä¹‹å‰æ²¡æœ‰å­—èŠ‚ç ä¸€è¯´ï¼Œè€Œæ˜¯ç›´æ¥å°† AST è½¬æˆæœºå™¨ç ï¼Œæœºå™¨ç æ‰§è¡Œæ•ˆç‡é«˜ä½†å ç”¨å†…å­˜å¤§ã€‚ï¼‰")]),t._v(" "),a("p",[t._v("å­—èŠ‚ç å°±æ˜¯ä»‹äº AST å’Œæœºå™¨ç ä¸­é—´çš„ä¸€ç§ä»£ç ï¼Œé«˜çº§ä»£ç ã€å­—èŠ‚ç å’Œæœºå™¨ç çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/bytecode.png",alt:"bytecode",title:"bytecode"}})]),t._v(" "),a("blockquote",[a("p",[t._v("ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæœºå™¨ç æ‰€å ç”¨çš„ç©ºé—´è¿œè¿œè¶…è¿‡äº†å­—èŠ‚ç ï¼Œæ‰€ä»¥ä½¿ç”¨å­—èŠ‚ç å¯ä»¥å‡å°‘ç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨ã€‚")])]),t._v(" "),a("h5",{attrs:{id:"_3-æ‰§è¡Œå­—èŠ‚ç -æœºå™¨ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ‰§è¡Œå­—èŠ‚ç -æœºå™¨ç "}},[t._v("#")]),t._v(" 3. æ‰§è¡Œå­—èŠ‚ç ï¼ˆ&æœºå™¨ç ï¼‰")]),t._v(" "),a("p",[t._v("åœ¨ç”Ÿæˆäº†å­—èŠ‚ç ä»¥åï¼Œè¿›å…¥æ‰§è¡Œé˜¶æ®µï¼Œè§£æå™¨ä¼šå¯¹å­—èŠ‚ç é€æ¡è§£ææ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("å¦‚æœåœ¨æ‰§è¡Œä¸­ï¼Œå‘ç°è¯¥æ®µå­—èŠ‚ç è¢«é‡å¤æ‰§è¡Œï¼ˆä¹Ÿç§°ä¸ºçƒ­ç‚¹ä»£ç ï¼‰ï¼Œè¿™æ—¶å€™åå°"),a("strong",[t._v("ç¼–è¯‘å™¨ turbofan")]),t._v("ç™»åœºï¼Œä¼šå°†è¯¥çƒ­ç‚¹ä»£ç ç¼–è¯‘æˆä¸ºé«˜æ•ˆçš„æœºå™¨ç ã€‚å½“å†æ¬¡æ‰§è¡Œåˆ°è¯¥æ®µçƒ­ç‚¹ä»£ç æ—¶ï¼Œåªéœ€è¦ç›´æ¥æ‰§è¡Œç¼–è¯‘åçš„æœºå™¨ç å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±å¤§å¤§æå‡äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/chieminchan/chieminchan.github.io/master/images/articles/v8/JIT.png",alt:"JIT",title:"JIT"}})]),t._v(" "),a("blockquote",[a("p",[t._v("å…¶å®å­—èŠ‚ç é…åˆè§£é‡Šå™¨å’Œç¼–è¯‘å™¨æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´å¾ˆç«çš„æŠ€æœ¯ï¼Œæ¯”å¦‚ Java å’Œ Python çš„è™šæ‹Ÿæœºä¹Ÿéƒ½æ˜¯åŸºäºè¿™ç§æŠ€æœ¯å®ç°çš„ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æŠ€æœ¯ç§°ä¸ºå³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ã€‚å…·ä½“åˆ° V8ï¼Œå°±æ˜¯æŒ‡è§£é‡Šå™¨ Ignition åœ¨è§£é‡Šæ‰§è¡Œå­—èŠ‚ç çš„åŒæ—¶ï¼Œæ”¶é›†ä»£ç ä¿¡æ¯ï¼Œå½“å®ƒå‘ç°æŸä¸€éƒ¨åˆ†ä»£ç å˜çƒ­äº†ä¹‹åï¼ŒTurboFan ç¼–è¯‘å™¨ä¾¿é—ªäº®ç™»åœºï¼ŒæŠŠçƒ­ç‚¹çš„å­—èŠ‚ç è½¬æ¢ä¸ºæœºå™¨ç ï¼Œå¹¶æŠŠè½¬æ¢åçš„æœºå™¨ç ä¿å­˜èµ·æ¥ï¼Œä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨ã€‚")])])])}),[],!1,null,null,null);a.default=r.exports}}]);